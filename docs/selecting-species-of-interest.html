<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Section 2 Selecting species of interest | Source code and supplementary material for Using citizen science to parse climatic and landcover influences on bird occupancy within a tropical biodiversity hotspot</title>
  <meta name="description" content="Section 2 Selecting species of interest | Source code and supplementary material for Using citizen science to parse climatic and landcover influences on bird occupancy within a tropical biodiversity hotspot" />
  <meta name="generator" content="bookdown 0.24 and GitBook 2.6.7" />

  <meta property="og:title" content="Section 2 Selecting species of interest | Source code and supplementary material for Using citizen science to parse climatic and landcover influences on bird occupancy within a tropical biodiversity hotspot" />
  <meta property="og:type" content="book" />
  
  
  
  <meta name="github-repo" content="vjjan91/eBirdOccupancy" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Section 2 Selecting species of interest | Source code and supplementary material for Using citizen science to parse climatic and landcover influences on bird occupancy within a tropical biodiversity hotspot" />
  
  
  



<meta name="date" content="2022-04-26" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="index.html"/>
<link rel="next" href="preparing-ebird-data.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<script src="libs/accessible-code-block-0.0.1/empty-anchor.js"></script>
<link href="libs/anchor-sections-1.0.1/anchor-sections.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.0.1/anchor-sections.js"></script>


<style type="text/css">
code.sourceCode > span { display: inline-block; line-height: 1.25; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Introduction</a><ul>
<li class="chapter" data-level="1.1" data-path="index.html"><a href="index.html#data-access"><i class="fa fa-check"></i><b>1.1</b> Data access</a></li>
<li class="chapter" data-level="1.2" data-path="index.html"><a href="index.html#data-processing"><i class="fa fa-check"></i><b>1.2</b> Data processing</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="selecting-species-of-interest.html"><a href="selecting-species-of-interest.html"><i class="fa fa-check"></i><b>2</b> Selecting species of interest</a><ul>
<li class="chapter" data-level="2.1" data-path="selecting-species-of-interest.html"><a href="selecting-species-of-interest.html#prepare-libraries"><i class="fa fa-check"></i><b>2.1</b> Prepare libraries</a></li>
<li class="chapter" data-level="2.2" data-path="selecting-species-of-interest.html"><a href="selecting-species-of-interest.html#subset-species-by-geographical-confines-of-the-study-area"><i class="fa fa-check"></i><b>2.2</b> Subset species by geographical confines of the study area</a></li>
<li class="chapter" data-level="2.3" data-path="selecting-species-of-interest.html"><a href="selecting-species-of-interest.html#subset-an-initial-list-of-terrestrial-birds-based-on-a-minimum-of-1000-detections-between-2013-2021-and-b-remove-species-that-are-often-easily-confused-with-congeners"><i class="fa fa-check"></i><b>2.3</b> Subset an initial list of terrestrial birds based on a) minimum of 1000 detections between 2013-2021 and b) remove species that are often easily confused with congeners</a></li>
<li class="chapter" data-level="2.4" data-path="selecting-species-of-interest.html"><a href="selecting-species-of-interest.html#read-subset-of-species-following-filtering-and-removal-of-waterbirds-raptors-and-other-noctural-species"><i class="fa fa-check"></i><b>2.4</b> Read subset of species following filtering and removal of waterbirds, raptors, and other noctural species</a></li>
<li class="chapter" data-level="2.5" data-path="selecting-species-of-interest.html"><a href="selecting-species-of-interest.html#load-raw-data-for-locations"><i class="fa fa-check"></i><b>2.5</b> Load raw data for locations</a></li>
<li class="chapter" data-level="2.6" data-path="selecting-species-of-interest.html"><a href="selecting-species-of-interest.html#get-proportional-obs-counts-in-25km-cells"><i class="fa fa-check"></i><b>2.6</b> Get proportional obs counts in 25km cells</a></li>
<li class="chapter" data-level="2.7" data-path="selecting-species-of-interest.html"><a href="selecting-species-of-interest.html#which-species-are-reported-sufficiently-in-checklists"><i class="fa fa-check"></i><b>2.7</b> Which species are reported sufficiently in checklists?</a></li>
<li class="chapter" data-level="2.8" data-path="selecting-species-of-interest.html"><a href="selecting-species-of-interest.html#figure-checklist-distribution"><i class="fa fa-check"></i><b>2.8</b> Figure: Checklist distribution</a></li>
<li class="chapter" data-level="2.9" data-path="selecting-species-of-interest.html"><a href="selecting-species-of-interest.html#prepare-the-species-list"><i class="fa fa-check"></i><b>2.9</b> Prepare the species list</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="preparing-ebird-data.html"><a href="preparing-ebird-data.html"><i class="fa fa-check"></i><b>3</b> Preparing eBird Data</a><ul>
<li class="chapter" data-level="3.1" data-path="preparing-ebird-data.html"><a href="preparing-ebird-data.html#prepare-libraries-and-data-sources"><i class="fa fa-check"></i><b>3.1</b> Prepare libraries and data sources</a></li>
<li class="chapter" data-level="3.2" data-path="preparing-ebird-data.html"><a href="preparing-ebird-data.html#filter-data"><i class="fa fa-check"></i><b>3.2</b> Filter data</a></li>
<li class="chapter" data-level="3.3" data-path="preparing-ebird-data.html"><a href="preparing-ebird-data.html#process-filtered-data"><i class="fa fa-check"></i><b>3.3</b> Process filtered data</a></li>
<li class="chapter" data-level="3.4" data-path="preparing-ebird-data.html"><a href="preparing-ebird-data.html#spatial-filter"><i class="fa fa-check"></i><b>3.4</b> Spatial filter</a></li>
<li class="chapter" data-level="3.5" data-path="preparing-ebird-data.html"><a href="preparing-ebird-data.html#handle-presence-data"><i class="fa fa-check"></i><b>3.5</b> Handle presence data</a></li>
<li class="chapter" data-level="3.6" data-path="preparing-ebird-data.html"><a href="preparing-ebird-data.html#add-decimal-time"><i class="fa fa-check"></i><b>3.6</b> Add decimal time</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="preparing-environmental-predictors.html"><a href="preparing-environmental-predictors.html"><i class="fa fa-check"></i><b>4</b> Preparing Environmental Predictors</a><ul>
<li class="chapter" data-level="4.1" data-path="preparing-environmental-predictors.html"><a href="preparing-environmental-predictors.html#prepare-libraries-1"><i class="fa fa-check"></i><b>4.1</b> Prepare libraries</a></li>
<li class="chapter" data-level="4.2" data-path="preparing-environmental-predictors.html"><a href="preparing-environmental-predictors.html#prepare-spatial-extent"><i class="fa fa-check"></i><b>4.2</b> Prepare spatial extent</a></li>
<li class="chapter" data-level="4.3" data-path="preparing-environmental-predictors.html"><a href="preparing-environmental-predictors.html#prepare-terrain-rasters"><i class="fa fa-check"></i><b>4.3</b> Prepare terrain rasters</a></li>
<li class="chapter" data-level="4.4" data-path="preparing-environmental-predictors.html"><a href="preparing-environmental-predictors.html#prepare-chelsa-rasters"><i class="fa fa-check"></i><b>4.4</b> Prepare CHELSA rasters</a><ul>
<li class="chapter" data-level="4.4.1" data-path="preparing-environmental-predictors.html"><a href="preparing-environmental-predictors.html#prepare-bioclim-4a-and-15"><i class="fa fa-check"></i><b>4.4.1</b> Prepare BIOCLIM 4a and 15</a></li>
<li class="chapter" data-level="4.4.2" data-path="preparing-environmental-predictors.html"><a href="preparing-environmental-predictors.html#prepare-bioclim-4a"><i class="fa fa-check"></i><b>4.4.2</b> Prepare BIOCLIM 4a</a></li>
<li class="chapter" data-level="4.4.3" data-path="preparing-environmental-predictors.html"><a href="preparing-environmental-predictors.html#prepare-bioclim-15"><i class="fa fa-check"></i><b>4.4.3</b> Prepare Bioclim 15</a></li>
<li class="chapter" data-level="4.4.4" data-path="preparing-environmental-predictors.html"><a href="preparing-environmental-predictors.html#stack-terrain-and-climate"><i class="fa fa-check"></i><b>4.4.4</b> Stack terrain and climate</a></li>
<li class="chapter" data-level="4.4.5" data-path="preparing-environmental-predictors.html"><a href="preparing-environmental-predictors.html#stack-terrain-and-climate-1"><i class="fa fa-check"></i><b>4.4.5</b> Stack terrain and climate</a></li>
</ul></li>
<li class="chapter" data-level="4.5" data-path="preparing-environmental-predictors.html"><a href="preparing-environmental-predictors.html#resample-landcover-from-10m-to-1km"><i class="fa fa-check"></i><b>4.5</b> Resample landcover from 10m to 1km</a></li>
<li class="chapter" data-level="4.6" data-path="preparing-environmental-predictors.html"><a href="preparing-environmental-predictors.html#resample-other-rasters-to-1km"><i class="fa fa-check"></i><b>4.6</b> Resample other rasters to 1km</a><ul>
<li class="chapter" data-level="4.6.1" data-path="preparing-environmental-predictors.html"><a href="preparing-environmental-predictors.html#read-in-resampled-landcover"><i class="fa fa-check"></i><b>4.6.1</b> Read in resampled landcover</a></li>
<li class="chapter" data-level="4.6.2" data-path="preparing-environmental-predictors.html"><a href="preparing-environmental-predictors.html#reproject-environmental-data-using-landcover-as-a-template"><i class="fa fa-check"></i><b>4.6.2</b> Reproject environmental data using landcover as a template</a></li>
</ul></li>
<li class="chapter" data-level="4.7" data-path="preparing-environmental-predictors.html"><a href="preparing-environmental-predictors.html#climate-variables-in-relation-to-elevation"><i class="fa fa-check"></i><b>4.7</b> Climate variables in relation to elevation</a><ul>
<li class="chapter" data-level="4.7.1" data-path="preparing-environmental-predictors.html"><a href="preparing-environmental-predictors.html#load-resampled-environmental-rasters"><i class="fa fa-check"></i><b>4.7.1</b> Load resampled environmental rasters</a></li>
</ul></li>
<li class="chapter" data-level="4.8" data-path="preparing-environmental-predictors.html"><a href="preparing-environmental-predictors.html#climate-across-land-cover-types"><i class="fa fa-check"></i><b>4.8</b> Climate across land cover types</a></li>
<li class="chapter" data-level="4.9" data-path="preparing-environmental-predictors.html"><a href="preparing-environmental-predictors.html#land-cover-type-in-relation-to-elevation"><i class="fa fa-check"></i><b>4.9</b> Land cover type in relation to elevation</a></li>
<li class="chapter" data-level="4.10" data-path="preparing-environmental-predictors.html"><a href="preparing-environmental-predictors.html#main-text-figure-2"><i class="fa fa-check"></i><b>4.10</b> Main Text Figure 2</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="preparing-checklist-calibration-index.html"><a href="preparing-checklist-calibration-index.html"><i class="fa fa-check"></i><b>5</b> Preparing Checklist Calibration Index</a><ul>
<li class="chapter" data-level="5.1" data-path="preparing-checklist-calibration-index.html"><a href="preparing-checklist-calibration-index.html#prepare-libraries-2"><i class="fa fa-check"></i><b>5.1</b> Prepare libraries</a></li>
<li class="chapter" data-level="5.2" data-path="preparing-checklist-calibration-index.html"><a href="preparing-checklist-calibration-index.html#prepare-data"><i class="fa fa-check"></i><b>5.2</b> Prepare data</a></li>
<li class="chapter" data-level="5.3" data-path="preparing-checklist-calibration-index.html"><a href="preparing-checklist-calibration-index.html#spatially-explicit-filter-on-checklists"><i class="fa fa-check"></i><b>5.3</b> Spatially explicit filter on checklists</a></li>
<li class="chapter" data-level="5.4" data-path="preparing-checklist-calibration-index.html"><a href="preparing-checklist-calibration-index.html#prepare-species-of-interest"><i class="fa fa-check"></i><b>5.4</b> Prepare species of interest</a></li>
<li class="chapter" data-level="5.5" data-path="preparing-checklist-calibration-index.html"><a href="preparing-checklist-calibration-index.html#prepare-checklists-for-observer-score"><i class="fa fa-check"></i><b>5.5</b> Prepare checklists for observer score</a></li>
<li class="chapter" data-level="5.6" data-path="preparing-checklist-calibration-index.html"><a href="preparing-checklist-calibration-index.html#get-landcover"><i class="fa fa-check"></i><b>5.6</b> Get landcover</a></li>
<li class="chapter" data-level="5.7" data-path="preparing-checklist-calibration-index.html"><a href="preparing-checklist-calibration-index.html#filter-checklist-data"><i class="fa fa-check"></i><b>5.7</b> Filter checklist data</a></li>
<li class="chapter" data-level="5.8" data-path="preparing-checklist-calibration-index.html"><a href="preparing-checklist-calibration-index.html#model-observer-expertise"><i class="fa fa-check"></i><b>5.8</b> Model observer expertise</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="examining-spatial-sampling-bias.html"><a href="examining-spatial-sampling-bias.html"><i class="fa fa-check"></i><b>6</b> Examining Spatial Sampling Bias</a><ul>
<li class="chapter" data-level="6.1" data-path="examining-spatial-sampling-bias.html"><a href="examining-spatial-sampling-bias.html#prepare-libraries-3"><i class="fa fa-check"></i><b>6.1</b> Prepare libraries</a></li>
<li class="chapter" data-level="6.2" data-path="examining-spatial-sampling-bias.html"><a href="examining-spatial-sampling-bias.html#read-checklist-data"><i class="fa fa-check"></i><b>6.2</b> Read checklist data</a><ul>
<li class="chapter" data-level="6.2.1" data-path="examining-spatial-sampling-bias.html"><a href="examining-spatial-sampling-bias.html#spatially-explicit-filter-on-checklists-1"><i class="fa fa-check"></i><b>6.2.1</b> Spatially explicit filter on checklists</a></li>
<li class="chapter" data-level="6.2.2" data-path="examining-spatial-sampling-bias.html"><a href="examining-spatial-sampling-bias.html#get-background-land-for-plotting"><i class="fa fa-check"></i><b>6.2.2</b> Get background land for plotting</a></li>
</ul></li>
<li class="chapter" data-level="6.3" data-path="examining-spatial-sampling-bias.html"><a href="examining-spatial-sampling-bias.html#prepare-main-text-figure-3"><i class="fa fa-check"></i><b>6.3</b> Prepare Main Text Figure 3</a><ul>
<li class="chapter" data-level="6.3.1" data-path="examining-spatial-sampling-bias.html"><a href="examining-spatial-sampling-bias.html#prepare-histogram-of-distance-to-roads"><i class="fa fa-check"></i><b>6.3.1</b> Prepare histogram of distance to roads</a></li>
<li class="chapter" data-level="6.3.2" data-path="examining-spatial-sampling-bias.html"><a href="examining-spatial-sampling-bias.html#table-distance-to-roads"><i class="fa fa-check"></i><b>6.3.2</b> Table: Distance to roads</a></li>
<li class="chapter" data-level="6.3.3" data-path="examining-spatial-sampling-bias.html"><a href="examining-spatial-sampling-bias.html#distance-to-nearest-neighbouring-site"><i class="fa fa-check"></i><b>6.3.3</b> Distance to nearest neighbouring site</a></li>
<li class="chapter" data-level="6.3.4" data-path="examining-spatial-sampling-bias.html"><a href="examining-spatial-sampling-bias.html#spatial-distribution-of-distances-to-neighbours"><i class="fa fa-check"></i><b>6.3.4</b> Spatial distribution of distances to neighbours</a></li>
</ul></li>
<li class="chapter" data-level="6.4" data-path="examining-spatial-sampling-bias.html"><a href="examining-spatial-sampling-bias.html#figure-spatial-sampling-bias"><i class="fa fa-check"></i><b>6.4</b> Figure: Spatial sampling bias</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="checking-temporal-sampling-frequency.html"><a href="checking-temporal-sampling-frequency.html"><i class="fa fa-check"></i><b>7</b> Checking Temporal Sampling Frequency</a><ul>
<li class="chapter" data-level="7.1" data-path="checking-temporal-sampling-frequency.html"><a href="checking-temporal-sampling-frequency.html#load-libraries"><i class="fa fa-check"></i><b>7.1</b> Load libraries</a></li>
<li class="chapter" data-level="7.2" data-path="checking-temporal-sampling-frequency.html"><a href="checking-temporal-sampling-frequency.html#load-checklist-data"><i class="fa fa-check"></i><b>7.2</b> Load checklist data</a></li>
<li class="chapter" data-level="7.3" data-path="checking-temporal-sampling-frequency.html"><a href="checking-temporal-sampling-frequency.html#get-time-differences-per-grid-cell"><i class="fa fa-check"></i><b>7.3</b> Get time differences per grid cell</a></li>
<li class="chapter" data-level="7.4" data-path="checking-temporal-sampling-frequency.html"><a href="checking-temporal-sampling-frequency.html#time-since-previous-checklist"><i class="fa fa-check"></i><b>7.4</b> Time Since Previous Checklist</a><ul>
<li class="chapter" data-level="7.4.1" data-path="checking-temporal-sampling-frequency.html"><a href="checking-temporal-sampling-frequency.html#get-aux-data"><i class="fa fa-check"></i><b>7.4.1</b> Get aux data</a></li>
<li class="chapter" data-level="7.4.2" data-path="checking-temporal-sampling-frequency.html"><a href="checking-temporal-sampling-frequency.html#histogram-of-lags"><i class="fa fa-check"></i><b>7.4.2</b> Histogram of lags</a></li>
</ul></li>
<li class="chapter" data-level="7.5" data-path="checking-temporal-sampling-frequency.html"><a href="checking-temporal-sampling-frequency.html#main-text-figure-3"><i class="fa fa-check"></i><b>7.5</b> Main Text Figure 3</a></li>
<li class="chapter" data-level="7.6" data-path="checking-temporal-sampling-frequency.html"><a href="checking-temporal-sampling-frequency.html#checklists-per-month"><i class="fa fa-check"></i><b>7.6</b> Checklists per Month</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="adding-covariates-to-checklist-data.html"><a href="adding-covariates-to-checklist-data.html"><i class="fa fa-check"></i><b>8</b> Adding Covariates to Checklist Data</a><ul>
<li class="chapter" data-level="8.1" data-path="adding-covariates-to-checklist-data.html"><a href="adding-covariates-to-checklist-data.html#prepare-libraries-and-data"><i class="fa fa-check"></i><b>8.1</b> Prepare libraries and data</a></li>
<li class="chapter" data-level="8.2" data-path="adding-covariates-to-checklist-data.html"><a href="adding-covariates-to-checklist-data.html#spatial-subsampling"><i class="fa fa-check"></i><b>8.2</b> Spatial subsampling</a><ul>
<li class="chapter" data-level="8.2.1" data-path="adding-covariates-to-checklist-data.html"><a href="adding-covariates-to-checklist-data.html#counting-presence-observation-proportion"><i class="fa fa-check"></i><b>8.2.1</b> Counting presence observation proportion</a></li>
<li class="chapter" data-level="8.2.2" data-path="adding-covariates-to-checklist-data.html"><a href="adding-covariates-to-checklist-data.html#count-absences-after-spatial-thinning"><i class="fa fa-check"></i><b>8.2.2</b> Count absences after spatial thinning</a></li>
</ul></li>
<li class="chapter" data-level="8.3" data-path="adding-covariates-to-checklist-data.html"><a href="adding-covariates-to-checklist-data.html#temporal-subsampling"><i class="fa fa-check"></i><b>8.3</b> Temporal subsampling</a><ul>
<li class="chapter" data-level="8.3.1" data-path="adding-covariates-to-checklist-data.html"><a href="adding-covariates-to-checklist-data.html#count-absences-after-temporal-thinning"><i class="fa fa-check"></i><b>8.3.1</b> Count absences after temporal thinning</a></li>
</ul></li>
<li class="chapter" data-level="8.4" data-path="adding-covariates-to-checklist-data.html"><a href="adding-covariates-to-checklist-data.html#add-checklist-calibration-index"><i class="fa fa-check"></i><b>8.4</b> Add checklist calibration index</a></li>
<li class="chapter" data-level="8.5" data-path="adding-covariates-to-checklist-data.html"><a href="adding-covariates-to-checklist-data.html#add-climatic-and-landscape-covariates"><i class="fa fa-check"></i><b>8.5</b> Add climatic and landscape covariates</a></li>
<li class="chapter" data-level="8.6" data-path="adding-covariates-to-checklist-data.html"><a href="adding-covariates-to-checklist-data.html#spatial-buffers-around-selected-checklists"><i class="fa fa-check"></i><b>8.6</b> Spatial buffers around selected checklists</a></li>
<li class="chapter" data-level="8.7" data-path="adding-covariates-to-checklist-data.html"><a href="adding-covariates-to-checklist-data.html#spatial-buffer-wide-covariates"><i class="fa fa-check"></i><b>8.7</b> Spatial buffer-wide covariates</a><ul>
<li class="chapter" data-level="8.7.1" data-path="adding-covariates-to-checklist-data.html"><a href="adding-covariates-to-checklist-data.html#mean-climatic-covariates"><i class="fa fa-check"></i><b>8.7.1</b> Mean climatic covariates</a></li>
<li class="chapter" data-level="8.7.2" data-path="adding-covariates-to-checklist-data.html"><a href="adding-covariates-to-checklist-data.html#proportions-of-land-cover-type"><i class="fa fa-check"></i><b>8.7.2</b> Proportions of land cover type</a></li>
<li class="chapter" data-level="8.7.3" data-path="adding-covariates-to-checklist-data.html"><a href="adding-covariates-to-checklist-data.html#link-environmental-covariates-to-checklists"><i class="fa fa-check"></i><b>8.7.3</b> Link environmental covariates to checklists</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="9" data-path="modelling-species-occupancy.html"><a href="modelling-species-occupancy.html"><i class="fa fa-check"></i><b>9</b> Modelling Species Occupancy</a><ul>
<li class="chapter" data-level="9.0.1" data-path="modelling-species-occupancy.html"><a href="modelling-species-occupancy.html#load-necessary-libraries"><i class="fa fa-check"></i><b>9.0.1</b> Load necessary libraries</a></li>
<li class="chapter" data-level="9.1" data-path="modelling-species-occupancy.html"><a href="modelling-species-occupancy.html#load-dataframe-and-prepare-covariates"><i class="fa fa-check"></i><b>9.1</b> Load dataframe and prepare covariates</a><ul>
<li class="chapter" data-level="9.1.1" data-path="modelling-species-occupancy.html"><a href="modelling-species-occupancy.html#handle-the-sampling-protocol"><i class="fa fa-check"></i><b>9.1.1</b> Handle the sampling protocol</a></li>
<li class="chapter" data-level="9.1.2" data-path="modelling-species-occupancy.html"><a href="modelling-species-occupancy.html#handle-time-and-date"><i class="fa fa-check"></i><b>9.1.2</b> Handle time and date</a></li>
<li class="chapter" data-level="9.1.3" data-path="modelling-species-occupancy.html"><a href="modelling-species-occupancy.html#scaling-covariates"><i class="fa fa-check"></i><b>9.1.3</b> Scaling covariates</a></li>
<li class="chapter" data-level="9.1.4" data-path="modelling-species-occupancy.html"><a href="modelling-species-occupancy.html#correct-date-format"><i class="fa fa-check"></i><b>9.1.4</b> Correct date format</a></li>
<li class="chapter" data-level="9.1.5" data-path="modelling-species-occupancy.html"><a href="modelling-species-occupancy.html#check-for-correlated-covariates"><i class="fa fa-check"></i><b>9.1.5</b> Check for correlated covariates</a></li>
</ul></li>
<li class="chapter" data-level="9.2" data-path="modelling-species-occupancy.html"><a href="modelling-species-occupancy.html#running-a-null-model"><i class="fa fa-check"></i><b>9.2</b> Running a null model</a></li>
<li class="chapter" data-level="9.3" data-path="modelling-species-occupancy.html"><a href="modelling-species-occupancy.html#identifying-covariates-necessary-to-model-the-detection-process"><i class="fa fa-check"></i><b>9.3</b> Identifying covariates necessary to model the detection process</a></li>
<li class="chapter" data-level="9.4" data-path="modelling-species-occupancy.html"><a href="modelling-species-occupancy.html#land-cover-and-climate"><i class="fa fa-check"></i><b>9.4</b> Land Cover and Climate</a></li>
<li class="chapter" data-level="9.5" data-path="modelling-species-occupancy.html"><a href="modelling-species-occupancy.html#goodness-of-fit-tests"><i class="fa fa-check"></i><b>9.5</b> Goodness-of-fit tests</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="visualizing-occupancy-predictor-effects.html"><a href="visualizing-occupancy-predictor-effects.html"><i class="fa fa-check"></i><b>10</b> Visualizing Occupancy Predictor Effects</a><ul>
<li class="chapter" data-level="10.1" data-path="visualizing-occupancy-predictor-effects.html"><a href="visualizing-occupancy-predictor-effects.html#prepare-libraries-4"><i class="fa fa-check"></i><b>10.1</b> Prepare libraries</a></li>
<li class="chapter" data-level="10.2" data-path="visualizing-occupancy-predictor-effects.html"><a href="visualizing-occupancy-predictor-effects.html#load-species-list"><i class="fa fa-check"></i><b>10.2</b> Load species list</a></li>
<li class="chapter" data-level="10.3" data-path="visualizing-occupancy-predictor-effects.html"><a href="visualizing-occupancy-predictor-effects.html#show-aic-weight-importance"><i class="fa fa-check"></i><b>10.3</b> Show AIC weight importance</a><ul>
<li class="chapter" data-level="10.3.1" data-path="visualizing-occupancy-predictor-effects.html"><a href="visualizing-occupancy-predictor-effects.html#read-in-aic-weight-data"><i class="fa fa-check"></i><b>10.3.1</b> Read in AIC weight data</a></li>
<li class="chapter" data-level="10.3.2" data-path="visualizing-occupancy-predictor-effects.html"><a href="visualizing-occupancy-predictor-effects.html#prepare-cumulative-aic-weight-data"><i class="fa fa-check"></i><b>10.3.2</b> Prepare cumulative AIC weight data</a></li>
</ul></li>
<li class="chapter" data-level="10.4" data-path="visualizing-occupancy-predictor-effects.html"><a href="visualizing-occupancy-predictor-effects.html#prepare-model-coefficient-data"><i class="fa fa-check"></i><b>10.4</b> Prepare model coefficient data</a></li>
<li class="chapter" data-level="10.5" data-path="visualizing-occupancy-predictor-effects.html"><a href="visualizing-occupancy-predictor-effects.html#get-predictor-effects"><i class="fa fa-check"></i><b>10.5</b> Get predictor effects</a></li>
</ul></li>
<li class="chapter" data-level="11" data-path="predicting-species-specific-occupancy-as-a-function-of-significant-predictors.html"><a href="predicting-species-specific-occupancy-as-a-function-of-significant-predictors.html"><i class="fa fa-check"></i><b>11</b> Predicting species-specific occupancy as a function of significant predictors</a><ul>
<li class="chapter" data-level="11.1" data-path="predicting-species-specific-occupancy-as-a-function-of-significant-predictors.html"><a href="predicting-species-specific-occupancy-as-a-function-of-significant-predictors.html#prepare-libraries-5"><i class="fa fa-check"></i><b>11.1</b> Prepare libraries</a></li>
<li class="chapter" data-level="11.2" data-path="predicting-species-specific-occupancy-as-a-function-of-significant-predictors.html"><a href="predicting-species-specific-occupancy-as-a-function-of-significant-predictors.html#read-data"><i class="fa fa-check"></i><b>11.2</b> Read data</a></li>
<li class="chapter" data-level="11.3" data-path="predicting-species-specific-occupancy-as-a-function-of-significant-predictors.html"><a href="predicting-species-specific-occupancy-as-a-function-of-significant-predictors.html#prepare-predictor-data"><i class="fa fa-check"></i><b>11.3</b> Prepare predictor data</a></li>
<li class="chapter" data-level="11.4" data-path="predicting-species-specific-occupancy-as-a-function-of-significant-predictors.html"><a href="predicting-species-specific-occupancy-as-a-function-of-significant-predictors.html#get-predictor-responses"><i class="fa fa-check"></i><b>11.4</b> Get predictor responses</a></li>
<li class="chapter" data-level="11.5" data-path="predicting-species-specific-occupancy-as-a-function-of-significant-predictors.html"><a href="predicting-species-specific-occupancy-as-a-function-of-significant-predictors.html#get-probability-of-occupancy"><i class="fa fa-check"></i><b>11.5</b> Get probability of occupancy</a></li>
<li class="chapter" data-level="11.6" data-path="predicting-species-specific-occupancy-as-a-function-of-significant-predictors.html"><a href="predicting-species-specific-occupancy-as-a-function-of-significant-predictors.html#add-scaling-for-predictors"><i class="fa fa-check"></i><b>11.6</b> Add scaling for predictors</a><ul>
<li class="chapter" data-level="11.6.1" data-path="predicting-species-specific-occupancy-as-a-function-of-significant-predictors.html"><a href="predicting-species-specific-occupancy-as-a-function-of-significant-predictors.html#figure-occupancy-predictors"><i class="fa fa-check"></i><b>11.6.1</b> Figure: Occupancy ~ predictors</a></li>
<li class="chapter" data-level="11.6.2" data-path="predicting-species-specific-occupancy-as-a-function-of-significant-predictors.html"><a href="predicting-species-specific-occupancy-as-a-function-of-significant-predictors.html#figures-occupancy-predictors-for-all-species"><i class="fa fa-check"></i><b>11.6.2</b> Figures: Occupancy ~ predictors for all species</a></li>
</ul></li>
<li class="chapter" data-level="11.7" data-path="predicting-species-specific-occupancy-as-a-function-of-significant-predictors.html"><a href="predicting-species-specific-occupancy-as-a-function-of-significant-predictors.html#mapping-species-occupancy"><i class="fa fa-check"></i><b>11.7</b> Mapping species occupancy</a><ul>
<li class="chapter" data-level="11.7.1" data-path="predicting-species-specific-occupancy-as-a-function-of-significant-predictors.html"><a href="predicting-species-specific-occupancy-as-a-function-of-significant-predictors.html#read-in-raster-layers"><i class="fa fa-check"></i><b>11.7.1</b> Read in raster layers</a></li>
<li class="chapter" data-level="11.7.2" data-path="predicting-species-specific-occupancy-as-a-function-of-significant-predictors.html"><a href="predicting-species-specific-occupancy-as-a-function-of-significant-predictors.html#split-landcover-into-proportions-per-1km"><i class="fa fa-check"></i><b>11.7.2</b> Split landcover into proportions per 1km</a></li>
<li class="chapter" data-level="11.7.3" data-path="predicting-species-specific-occupancy-as-a-function-of-significant-predictors.html"><a href="predicting-species-specific-occupancy-as-a-function-of-significant-predictors.html#prepare-climatic-layers"><i class="fa fa-check"></i><b>11.7.3</b> Prepare climatic layers</a></li>
<li class="chapter" data-level="11.7.4" data-path="predicting-species-specific-occupancy-as-a-function-of-significant-predictors.html"><a href="predicting-species-specific-occupancy-as-a-function-of-significant-predictors.html#mask-by-study-area"><i class="fa fa-check"></i><b>11.7.4</b> Mask by study area</a></li>
<li class="chapter" data-level="11.7.5" data-path="predicting-species-specific-occupancy-as-a-function-of-significant-predictors.html"><a href="predicting-species-specific-occupancy-as-a-function-of-significant-predictors.html#plot-full-bounds-of-landscape-variables"><i class="fa fa-check"></i><b>11.7.5</b> Plot full bounds of landscape variables</a></li>
<li class="chapter" data-level="11.7.6" data-path="predicting-species-specific-occupancy-as-a-function-of-significant-predictors.html"><a href="predicting-species-specific-occupancy-as-a-function-of-significant-predictors.html#prepare-soi-predictors"><i class="fa fa-check"></i><b>11.7.6</b> Prepare soi predictors</a></li>
<li class="chapter" data-level="11.7.7" data-path="predicting-species-specific-occupancy-as-a-function-of-significant-predictors.html"><a href="predicting-species-specific-occupancy-as-a-function-of-significant-predictors.html#prepare-species-occupancy-for-soi"><i class="fa fa-check"></i><b>11.7.7</b> Prepare species occupancy for SOI</a></li>
<li class="chapter" data-level="11.7.8" data-path="predicting-species-specific-occupancy-as-a-function-of-significant-predictors.html"><a href="predicting-species-specific-occupancy-as-a-function-of-significant-predictors.html#prepare-species-occupancy-for-all-species"><i class="fa fa-check"></i><b>11.7.8</b> Prepare species occupancy for all species</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="12" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i><b>12</b> References</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Source code and supplementary material for <em>Using citizen science to parse climatic and landcover influences on bird occupancy within a tropical biodiversity hotspot</em></a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="selecting-species-of-interest" class="section level1">
<h1><span class="header-section-number">Section 2</span> Selecting species of interest</h1>
<p>Prior to preparing eBird data for occupancy modeling, we selected a list of species using a simple and objective criteria. Our primary focus is to understand how terrestrial bird species occupancy (largely passerine species) varied as a function of climate and land cover across the Nilgiri and the Anamalai hills of the Western Ghats.</p>
<p>We derived this list from inclusion criteria adapted from the State of India’s Birds 2020. Initially, we considered all species reported on eBird that occurred within the outlines of our study area. We then added a filter to consider only terrestrial birds and removed species that are often easily confused for their congeners (eg. green/greenish warbler). In addition, we considered only those species that had a minimum of 1000 detections each between 2013 and 2021. Next, the study area was divided into 25 x 25 km cells following Viswanathan et al. (2020). We then kept only those species that occurred in at least 5% of all checklists across half of the 25 x 25 km cells from where they have been reported (there are 42 unique 25 x 25 km grid cells across our study area). We used the above criteria to ensure as much uniform sampling of a species as possible across our study area and to reduce any erroneous associations between environmental drivers and species occupancy. This resulted in a total of 79 species, prior to occupancy modeling.</p>
<p>This script shows the proportion of checklists that report a particular species across every 25km by 25km grid across the Nilgiris and the Anamalais. Using this analysis, we arrived at a final list of species for occupancy modeling.</p>
<div id="prepare-libraries" class="section level2">
<h2><span class="header-section-number">2.1</span> Prepare libraries</h2>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="selecting-species-of-interest.html#cb1-1"></a><span class="co"># load libraries</span></span>
<span id="cb1-2"><a href="selecting-species-of-interest.html#cb1-2"></a><span class="kw">library</span>(data.table)</span>
<span id="cb1-3"><a href="selecting-species-of-interest.html#cb1-3"></a><span class="kw">library</span>(readxl)</span>
<span id="cb1-4"><a href="selecting-species-of-interest.html#cb1-4"></a><span class="kw">library</span>(magrittr)</span>
<span id="cb1-5"><a href="selecting-species-of-interest.html#cb1-5"></a><span class="kw">library</span>(stringr)</span>
<span id="cb1-6"><a href="selecting-species-of-interest.html#cb1-6"></a><span class="kw">library</span>(dplyr)</span>
<span id="cb1-7"><a href="selecting-species-of-interest.html#cb1-7"></a><span class="kw">library</span>(tidyr)</span>
<span id="cb1-8"><a href="selecting-species-of-interest.html#cb1-8"></a><span class="kw">library</span>(readr)</span>
<span id="cb1-9"><a href="selecting-species-of-interest.html#cb1-9"></a><span class="kw">library</span>(ggplot2)</span>
<span id="cb1-10"><a href="selecting-species-of-interest.html#cb1-10"></a><span class="kw">library</span>(ggthemes)</span>
<span id="cb1-11"><a href="selecting-species-of-interest.html#cb1-11"></a><span class="kw">library</span>(scico)</span>
<span id="cb1-12"><a href="selecting-species-of-interest.html#cb1-12"></a><span class="co"># round any function</span></span>
<span id="cb1-13"><a href="selecting-species-of-interest.html#cb1-13"></a>round_any &lt;-<span class="st"> </span><span class="cf">function</span>(x, <span class="dt">accuracy =</span> <span class="dv">25000</span>) {</span>
<span id="cb1-14"><a href="selecting-species-of-interest.html#cb1-14"></a>  <span class="kw">round</span>(x <span class="op">/</span><span class="st"> </span>accuracy) <span class="op">*</span><span class="st"> </span>accuracy</span>
<span id="cb1-15"><a href="selecting-species-of-interest.html#cb1-15"></a>}</span>
<span id="cb1-16"><a href="selecting-species-of-interest.html#cb1-16"></a></span>
<span id="cb1-17"><a href="selecting-species-of-interest.html#cb1-17"></a><span class="co"># set file paths for auk functions</span></span>
<span id="cb1-18"><a href="selecting-species-of-interest.html#cb1-18"></a><span class="co"># To use these two datasets, please download the latest versions from https://ebird.org/data/download and set the file path accordingly. Since these two datasets are extremely large, we have not uploaded the same to github.</span></span>
<span id="cb1-19"><a href="selecting-species-of-interest.html#cb1-19"></a><span class="co"># In this study, the version of data loaded corresponds to November 2021.</span></span>
<span id="cb1-20"><a href="selecting-species-of-interest.html#cb1-20"></a></span>
<span id="cb1-21"><a href="selecting-species-of-interest.html#cb1-21"></a>f_in_ebd &lt;-<span class="st"> </span><span class="kw">file.path</span>(<span class="st">&quot;data/ebd_IN_relNov-2021.txt&quot;</span>)</span>
<span id="cb1-22"><a href="selecting-species-of-interest.html#cb1-22"></a>f_in_sampling &lt;-<span class="st"> </span><span class="kw">file.path</span>(<span class="st">&quot;data/ebd_sampling_relNov-2021.txt&quot;</span>)</span></code></pre></div>
</div>
<div id="subset-species-by-geographical-confines-of-the-study-area" class="section level2">
<h2><span class="header-section-number">2.2</span> Subset species by geographical confines of the study area</h2>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="selecting-species-of-interest.html#cb2-1"></a><span class="co"># read in shapefile of the study area to subset by bounding box</span></span>
<span id="cb2-2"><a href="selecting-species-of-interest.html#cb2-2"></a><span class="kw">library</span>(sf)</span>
<span id="cb2-3"><a href="selecting-species-of-interest.html#cb2-3"></a>wg &lt;-<span class="st"> </span><span class="kw">st_read</span>(<span class="st">&quot;data/spatial/hillsShapefile/Nil_Ana_Pal.shp&quot;</span>)</span>
<span id="cb2-4"><a href="selecting-species-of-interest.html#cb2-4"></a>box &lt;-<span class="st"> </span><span class="kw">st_bbox</span>(wg)</span>
<span id="cb2-5"><a href="selecting-species-of-interest.html#cb2-5"></a></span>
<span id="cb2-6"><a href="selecting-species-of-interest.html#cb2-6"></a><span class="co"># read in data and subset</span></span>
<span id="cb2-7"><a href="selecting-species-of-interest.html#cb2-7"></a></span>
<span id="cb2-8"><a href="selecting-species-of-interest.html#cb2-8"></a><span class="co"># To access the latest dataset, please visit: https://ebird.org/data/download and set the file path accordingly.</span></span>
<span id="cb2-9"><a href="selecting-species-of-interest.html#cb2-9"></a>ebd &lt;-<span class="st"> </span><span class="kw">fread</span>(<span class="st">&quot;data/ebd_IN_relNov-2021.txt&quot;</span>)</span>
<span id="cb2-10"><a href="selecting-species-of-interest.html#cb2-10"></a>ebd &lt;-<span class="st"> </span>ebd[<span class="kw">between</span>(LONGITUDE, box[<span class="st">&quot;xmin&quot;</span>], box[<span class="st">&quot;xmax&quot;</span>]) <span class="op">&amp;</span></span>
<span id="cb2-11"><a href="selecting-species-of-interest.html#cb2-11"></a><span class="st">  </span><span class="kw">between</span>(LATITUDE, box[<span class="st">&quot;ymin&quot;</span>], box[<span class="st">&quot;ymax&quot;</span>]), ]</span>
<span id="cb2-12"><a href="selecting-species-of-interest.html#cb2-12"></a>ebd &lt;-<span class="st"> </span>ebd[<span class="kw">year</span>(<span class="st">`</span><span class="dt">OBSERVATION DATE</span><span class="st">`</span>) <span class="op">&gt;=</span><span class="st"> </span><span class="dv">2013</span>, ]</span>
<span id="cb2-13"><a href="selecting-species-of-interest.html#cb2-13"></a><span class="co"># make new column names</span></span>
<span id="cb2-14"><a href="selecting-species-of-interest.html#cb2-14"></a>newNames &lt;-<span class="st"> </span><span class="kw">str_replace_all</span>(<span class="kw">colnames</span>(ebd), <span class="st">&quot; &quot;</span>, <span class="st">&quot;_&quot;</span>) <span class="op">%&gt;%</span></span>
<span id="cb2-15"><a href="selecting-species-of-interest.html#cb2-15"></a><span class="st">  </span><span class="kw">str_to_lower</span>()</span>
<span id="cb2-16"><a href="selecting-species-of-interest.html#cb2-16"></a><span class="kw">setnames</span>(ebd, newNames)</span>
<span id="cb2-17"><a href="selecting-species-of-interest.html#cb2-17"></a><span class="co"># keep useful columns</span></span>
<span id="cb2-18"><a href="selecting-species-of-interest.html#cb2-18"></a>columnsOfInterest &lt;-<span class="st"> </span><span class="kw">c</span>(</span>
<span id="cb2-19"><a href="selecting-species-of-interest.html#cb2-19"></a>  <span class="st">&quot;common_name&quot;</span>, <span class="st">&quot;scientific_name&quot;</span>, <span class="st">&quot;observation_count&quot;</span>, <span class="st">&quot;locality&quot;</span>,</span>
<span id="cb2-20"><a href="selecting-species-of-interest.html#cb2-20"></a>  <span class="st">&quot;locality_id&quot;</span>, <span class="st">&quot;locality_type&quot;</span>, <span class="st">&quot;latitude&quot;</span>,</span>
<span id="cb2-21"><a href="selecting-species-of-interest.html#cb2-21"></a>  <span class="st">&quot;longitude&quot;</span>, <span class="st">&quot;observation_date&quot;</span>, <span class="st">&quot;sampling_event_identifier&quot;</span></span>
<span id="cb2-22"><a href="selecting-species-of-interest.html#cb2-22"></a>)</span>
<span id="cb2-23"><a href="selecting-species-of-interest.html#cb2-23"></a>ebd &lt;-<span class="st"> </span>ebd[, ..columnsOfInterest]</span></code></pre></div>
</div>
<div id="subset-an-initial-list-of-terrestrial-birds-based-on-a-minimum-of-1000-detections-between-2013-2021-and-b-remove-species-that-are-often-easily-confused-with-congeners" class="section level2">
<h2><span class="header-section-number">2.3</span> Subset an initial list of terrestrial birds based on a) minimum of 1000 detections between 2013-2021 and b) remove species that are often easily confused with congeners</h2>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="selecting-species-of-interest.html#cb3-1"></a><span class="co"># Convert all presences marked &#39;X&#39; as &#39;1&#39;</span></span>
<span id="cb3-2"><a href="selecting-species-of-interest.html#cb3-2"></a>ebd &lt;-<span class="st"> </span>ebd <span class="op">%&gt;%</span></span>
<span id="cb3-3"><a href="selecting-species-of-interest.html#cb3-3"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">observation_count =</span> <span class="kw">ifelse</span>(observation_count <span class="op">==</span><span class="st"> &quot;X&quot;</span>,</span>
<span id="cb3-4"><a href="selecting-species-of-interest.html#cb3-4"></a>    <span class="st">&quot;1&quot;</span>, observation_count</span>
<span id="cb3-5"><a href="selecting-species-of-interest.html#cb3-5"></a>  ))</span>
<span id="cb3-6"><a href="selecting-species-of-interest.html#cb3-6"></a></span>
<span id="cb3-7"><a href="selecting-species-of-interest.html#cb3-7"></a><span class="co"># Convert observation count to numeric</span></span>
<span id="cb3-8"><a href="selecting-species-of-interest.html#cb3-8"></a>ebd<span class="op">$</span>observation_count &lt;-<span class="st"> </span><span class="kw">as.numeric</span>(ebd<span class="op">$</span>observation_count)</span>
<span id="cb3-9"><a href="selecting-species-of-interest.html#cb3-9"></a></span>
<span id="cb3-10"><a href="selecting-species-of-interest.html#cb3-10"></a>totCount &lt;-<span class="st"> </span>ebd <span class="op">%&gt;%</span></span>
<span id="cb3-11"><a href="selecting-species-of-interest.html#cb3-11"></a><span class="st">  </span>dplyr<span class="op">::</span><span class="kw">select</span>(scientific_name, common_name, observation_count) <span class="op">%&gt;%</span></span>
<span id="cb3-12"><a href="selecting-species-of-interest.html#cb3-12"></a><span class="st">  </span><span class="kw">group_by</span>(scientific_name, common_name) <span class="op">%&gt;%</span></span>
<span id="cb3-13"><a href="selecting-species-of-interest.html#cb3-13"></a><span class="st">  </span><span class="kw">summarise</span>(<span class="dt">tot =</span> <span class="kw">sum</span>(observation_count))</span>
<span id="cb3-14"><a href="selecting-species-of-interest.html#cb3-14"></a></span>
<span id="cb3-15"><a href="selecting-species-of-interest.html#cb3-15"></a><span class="co"># subset species with a min of 1000 detections</span></span>
<span id="cb3-16"><a href="selecting-species-of-interest.html#cb3-16"></a>tot1000 &lt;-<span class="st"> </span>totCount <span class="op">%&gt;%</span></span>
<span id="cb3-17"><a href="selecting-species-of-interest.html#cb3-17"></a><span class="st">  </span><span class="kw">filter</span>(tot <span class="op">&gt;</span><span class="st"> </span><span class="dv">1000</span>)</span>
<span id="cb3-18"><a href="selecting-species-of-interest.html#cb3-18"></a></span>
<span id="cb3-19"><a href="selecting-species-of-interest.html#cb3-19"></a>species1000 &lt;-<span class="st"> </span>tot1000<span class="op">$</span>scientific_name</span>
<span id="cb3-20"><a href="selecting-species-of-interest.html#cb3-20"></a></span>
<span id="cb3-21"><a href="selecting-species-of-interest.html#cb3-21"></a>ebd1000 &lt;-<span class="st"> </span>ebd[scientific_name <span class="op">%in%</span><span class="st"> </span>species1000, ]</span>
<span id="cb3-22"><a href="selecting-species-of-interest.html#cb3-22"></a></span>
<span id="cb3-23"><a href="selecting-species-of-interest.html#cb3-23"></a><span class="co"># Beginning with 3.37 million observations of 684 species in eBird that occurred within the outlines of our study area (Fig. 1), over the years 2013–2021, we retained only those species that had a minimum of 1,000 detections each between 2013 and 2021 (347 species remaining; 3.33 million observations). Next, we divided the study area into 25x25 km cells following State of India’s Birds 2020 methodology. We kept only those species that occurred in at least 5% of all checklists across half of the grids (42 unique grid cells) from which they had been reported. </span></span>
<span id="cb3-24"><a href="selecting-species-of-interest.html#cb3-24"></a></span>
<span id="cb3-25"><a href="selecting-species-of-interest.html#cb3-25"></a><span class="co"># export the above list as .csv to carry out initial filtering based on natural history</span></span>
<span id="cb3-26"><a href="selecting-species-of-interest.html#cb3-26"></a><span class="kw">write.csv</span>(totCount, <span class="st">&quot;data/species_list.csv&quot;</span>, <span class="dt">row.names =</span> F)</span></code></pre></div>
</div>
<div id="read-subset-of-species-following-filtering-and-removal-of-waterbirds-raptors-and-other-noctural-species" class="section level2">
<h2><span class="header-section-number">2.4</span> Read subset of species following filtering and removal of waterbirds, raptors, and other noctural species</h2>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="selecting-species-of-interest.html#cb4-1"></a><span class="co"># add species of interest</span></span>
<span id="cb4-2"><a href="selecting-species-of-interest.html#cb4-2"></a><span class="co"># please note the below script is obtained after manual subsetting based on natural history and hence the user is asked to examine the dataset obtained in the previous time step prior to further processing</span></span>
<span id="cb4-3"><a href="selecting-species-of-interest.html#cb4-3"></a></span>
<span id="cb4-4"><a href="selecting-species-of-interest.html#cb4-4"></a>specieslist &lt;-<span class="st"> </span><span class="kw">read.csv</span>(<span class="st">&quot;data/species_list.csv&quot;</span>)</span>
<span id="cb4-5"><a href="selecting-species-of-interest.html#cb4-5"></a>speciesOfInterest &lt;-<span class="st"> </span>specieslist<span class="op">$</span>scientific_name</span></code></pre></div>
</div>
<div id="load-raw-data-for-locations" class="section level2">
<h2><span class="header-section-number">2.5</span> Load raw data for locations</h2>
<p>Add a spatial filter and assign grids of 25km x 25km.</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="selecting-species-of-interest.html#cb5-1"></a><span class="co"># strict spatial filter and assign grid</span></span>
<span id="cb5-2"><a href="selecting-species-of-interest.html#cb5-2"></a>locs &lt;-<span class="st"> </span>ebd[, .(longitude, latitude)]</span>
<span id="cb5-3"><a href="selecting-species-of-interest.html#cb5-3"></a></span>
<span id="cb5-4"><a href="selecting-species-of-interest.html#cb5-4"></a><span class="co"># transform to UTM and get 25km boxes</span></span>
<span id="cb5-5"><a href="selecting-species-of-interest.html#cb5-5"></a>coords &lt;-<span class="st"> </span><span class="kw">setDF</span>(locs) <span class="op">%&gt;%</span></span>
<span id="cb5-6"><a href="selecting-species-of-interest.html#cb5-6"></a><span class="st">  </span><span class="kw">st_as_sf</span>(<span class="dt">coords =</span> <span class="kw">c</span>(<span class="st">&quot;longitude&quot;</span>, <span class="st">&quot;latitude&quot;</span>)) <span class="op">%&gt;%</span></span>
<span id="cb5-7"><a href="selecting-species-of-interest.html#cb5-7"></a><span class="st">  `</span><span class="dt">st_crs&lt;-</span><span class="st">`</span>(<span class="dv">4326</span>) <span class="op">%&gt;%</span></span>
<span id="cb5-8"><a href="selecting-species-of-interest.html#cb5-8"></a><span class="st">  </span><span class="kw">bind_cols</span>(<span class="kw">as.data.table</span>(<span class="kw">st_coordinates</span>(.))) <span class="op">%&gt;%</span></span>
<span id="cb5-9"><a href="selecting-species-of-interest.html#cb5-9"></a><span class="st">  </span><span class="kw">st_transform</span>(<span class="dv">32643</span>) <span class="op">%&gt;%</span></span>
<span id="cb5-10"><a href="selecting-species-of-interest.html#cb5-10"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">id =</span> <span class="dv">1</span><span class="op">:</span><span class="kw">nrow</span>(.))</span>
<span id="cb5-11"><a href="selecting-species-of-interest.html#cb5-11"></a></span>
<span id="cb5-12"><a href="selecting-species-of-interest.html#cb5-12"></a><span class="co"># convert wg to UTM for filter</span></span>
<span id="cb5-13"><a href="selecting-species-of-interest.html#cb5-13"></a>wg &lt;-<span class="st"> </span><span class="kw">st_transform</span>(wg, <span class="dv">32643</span>)</span>
<span id="cb5-14"><a href="selecting-species-of-interest.html#cb5-14"></a>coords &lt;-<span class="st"> </span>coords <span class="op">%&gt;%</span></span>
<span id="cb5-15"><a href="selecting-species-of-interest.html#cb5-15"></a><span class="st">  </span><span class="kw">filter</span>(id <span class="op">%in%</span><span class="st"> </span><span class="kw">unlist</span>(<span class="kw">st_contains</span>(wg, coords))) <span class="op">%&gt;%</span></span>
<span id="cb5-16"><a href="selecting-species-of-interest.html#cb5-16"></a><span class="st">  </span><span class="kw">rename</span>(<span class="dt">longitude =</span> X, <span class="dt">latitude =</span> Y) <span class="op">%&gt;%</span></span>
<span id="cb5-17"><a href="selecting-species-of-interest.html#cb5-17"></a><span class="st">  </span><span class="kw">bind_cols</span>(<span class="kw">as.data.table</span>(<span class="kw">st_coordinates</span>(.))) <span class="op">%&gt;%</span></span>
<span id="cb5-18"><a href="selecting-species-of-interest.html#cb5-18"></a><span class="st">  </span><span class="kw">st_drop_geometry</span>() <span class="op">%&gt;%</span></span>
<span id="cb5-19"><a href="selecting-species-of-interest.html#cb5-19"></a><span class="st">  </span><span class="kw">as.data.table</span>()</span>
<span id="cb5-20"><a href="selecting-species-of-interest.html#cb5-20"></a></span>
<span id="cb5-21"><a href="selecting-species-of-interest.html#cb5-21"></a><span class="co"># remove unneeded objects</span></span>
<span id="cb5-22"><a href="selecting-species-of-interest.html#cb5-22"></a><span class="kw">rm</span>(locs)</span>
<span id="cb5-23"><a href="selecting-species-of-interest.html#cb5-23"></a><span class="kw">gc</span>()</span>
<span id="cb5-24"><a href="selecting-species-of-interest.html#cb5-24"></a>coords &lt;-<span class="st"> </span>coords[, .N, by =<span class="st"> </span>.(longitude, latitude, X, Y)]</span>
<span id="cb5-25"><a href="selecting-species-of-interest.html#cb5-25"></a>ebd &lt;-<span class="st"> </span><span class="kw">merge</span>(ebd, coords, <span class="dt">all =</span> <span class="ot">FALSE</span>, <span class="dt">by =</span> <span class="kw">c</span>(<span class="st">&quot;longitude&quot;</span>, <span class="st">&quot;latitude&quot;</span>))</span>
<span id="cb5-26"><a href="selecting-species-of-interest.html#cb5-26"></a>ebd &lt;-<span class="st"> </span>ebd[(longitude <span class="op">%in%</span><span class="st"> </span>coords<span class="op">$</span>longitude) <span class="op">&amp;</span></span>
<span id="cb5-27"><a href="selecting-species-of-interest.html#cb5-27"></a><span class="st">  </span>(latitude <span class="op">%in%</span><span class="st"> </span>coords<span class="op">$</span>latitude), ]</span></code></pre></div>
</div>
<div id="get-proportional-obs-counts-in-25km-cells" class="section level2">
<h2><span class="header-section-number">2.6</span> Get proportional obs counts in 25km cells</h2>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="selecting-species-of-interest.html#cb6-1"></a><span class="co"># round to 25km cell in UTM coords</span></span>
<span id="cb6-2"><a href="selecting-species-of-interest.html#cb6-2"></a>ebd[, <span class="st">`</span><span class="dt">:=</span><span class="st">`</span>(<span class="dt">X =</span> <span class="kw">round_any</span>(X), <span class="dt">Y =</span> <span class="kw">round_any</span>(Y))]</span>
<span id="cb6-3"><a href="selecting-species-of-interest.html#cb6-3"></a></span>
<span id="cb6-4"><a href="selecting-species-of-interest.html#cb6-4"></a><span class="co"># count checklists in cell</span></span>
<span id="cb6-5"><a href="selecting-species-of-interest.html#cb6-5"></a>ebd_summary &lt;-<span class="st"> </span>ebd[, nchk <span class="op">:</span><span class="er">=</span><span class="st"> </span><span class="kw">length</span>(<span class="kw">unique</span>(sampling_event_identifier)),</span>
<span id="cb6-6"><a href="selecting-species-of-interest.html#cb6-6"></a>  by =<span class="st"> </span>.(X, Y)</span>
<span id="cb6-7"><a href="selecting-species-of-interest.html#cb6-7"></a>]</span>
<span id="cb6-8"><a href="selecting-species-of-interest.html#cb6-8"></a></span>
<span id="cb6-9"><a href="selecting-species-of-interest.html#cb6-9"></a><span class="co"># count checklists reporting each species in cell and get proportion</span></span>
<span id="cb6-10"><a href="selecting-species-of-interest.html#cb6-10"></a>ebd_summary &lt;-<span class="st"> </span>ebd_summary[, .(<span class="dt">nrep =</span> <span class="kw">length</span>(<span class="kw">unique</span>(</span>
<span id="cb6-11"><a href="selecting-species-of-interest.html#cb6-11"></a>  sampling_event_identifier</span>
<span id="cb6-12"><a href="selecting-species-of-interest.html#cb6-12"></a>))),</span>
<span id="cb6-13"><a href="selecting-species-of-interest.html#cb6-13"></a>by =<span class="st"> </span>.(X, Y, nchk, scientific_name)</span>
<span id="cb6-14"><a href="selecting-species-of-interest.html#cb6-14"></a>]</span>
<span id="cb6-15"><a href="selecting-species-of-interest.html#cb6-15"></a>ebd_summary[, p_rep <span class="op">:</span><span class="er">=</span><span class="st"> </span>nrep <span class="op">/</span><span class="st"> </span>nchk]</span>
<span id="cb6-16"><a href="selecting-species-of-interest.html#cb6-16"></a></span>
<span id="cb6-17"><a href="selecting-species-of-interest.html#cb6-17"></a><span class="co"># filter for soi</span></span>
<span id="cb6-18"><a href="selecting-species-of-interest.html#cb6-18"></a>ebd_summary &lt;-<span class="st"> </span>ebd_summary[scientific_name <span class="op">%in%</span><span class="st"> </span>speciesOfInterest, ]</span>
<span id="cb6-19"><a href="selecting-species-of-interest.html#cb6-19"></a></span>
<span id="cb6-20"><a href="selecting-species-of-interest.html#cb6-20"></a><span class="co"># complete the dataframe for no reports</span></span>
<span id="cb6-21"><a href="selecting-species-of-interest.html#cb6-21"></a><span class="co"># keep no reports as NA --- allows filtering based on proportion reporting</span></span>
<span id="cb6-22"><a href="selecting-species-of-interest.html#cb6-22"></a>ebd_summary &lt;-<span class="st"> </span><span class="kw">setDF</span>(ebd_summary) <span class="op">%&gt;%</span></span>
<span id="cb6-23"><a href="selecting-species-of-interest.html#cb6-23"></a><span class="st">  </span><span class="kw">complete</span>(</span>
<span id="cb6-24"><a href="selecting-species-of-interest.html#cb6-24"></a>    <span class="kw">nesting</span>(X, Y), scientific_name <span class="co"># ,</span></span>
<span id="cb6-25"><a href="selecting-species-of-interest.html#cb6-25"></a>    <span class="co"># fill = list(p_rep = 0)</span></span>
<span id="cb6-26"><a href="selecting-species-of-interest.html#cb6-26"></a>  ) <span class="op">%&gt;%</span></span>
<span id="cb6-27"><a href="selecting-species-of-interest.html#cb6-27"></a><span class="st">  </span><span class="kw">filter</span>(<span class="op">!</span><span class="kw">is.na</span>(p_rep))</span></code></pre></div>
</div>
<div id="which-species-are-reported-sufficiently-in-checklists" class="section level2">
<h2><span class="header-section-number">2.7</span> Which species are reported sufficiently in checklists?</h2>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="selecting-species-of-interest.html#cb7-1"></a><span class="co"># A total of 42 unique grids (of 25km by 25km) across the study area</span></span>
<span id="cb7-2"><a href="selecting-species-of-interest.html#cb7-2"></a><span class="co"># total number of checklists across unique grids</span></span>
<span id="cb7-3"><a href="selecting-species-of-interest.html#cb7-3"></a>tot_n_chklist &lt;-<span class="st"> </span>ebd_summary <span class="op">%&gt;%</span></span>
<span id="cb7-4"><a href="selecting-species-of-interest.html#cb7-4"></a><span class="st">  </span><span class="kw">distinct</span>(X, Y, nchk)</span>
<span id="cb7-5"><a href="selecting-species-of-interest.html#cb7-5"></a><span class="co"># species-specific number of grids</span></span>
<span id="cb7-6"><a href="selecting-species-of-interest.html#cb7-6"></a>spp_grids &lt;-<span class="st"> </span>ebd_summary <span class="op">%&gt;%</span></span>
<span id="cb7-7"><a href="selecting-species-of-interest.html#cb7-7"></a><span class="st">  </span><span class="kw">group_by</span>(scientific_name) <span class="op">%&gt;%</span></span>
<span id="cb7-8"><a href="selecting-species-of-interest.html#cb7-8"></a><span class="st">  </span><span class="kw">distinct</span>(X, Y) <span class="op">%&gt;%</span></span>
<span id="cb7-9"><a href="selecting-species-of-interest.html#cb7-9"></a><span class="st">  </span><span class="kw">count</span>(scientific_name,</span>
<span id="cb7-10"><a href="selecting-species-of-interest.html#cb7-10"></a>    <span class="dt">name =</span> <span class="st">&quot;n_grids&quot;</span></span>
<span id="cb7-11"><a href="selecting-species-of-interest.html#cb7-11"></a>  )</span>
<span id="cb7-12"><a href="selecting-species-of-interest.html#cb7-12"></a></span>
<span id="cb7-13"><a href="selecting-species-of-interest.html#cb7-13"></a><span class="co"># Write the above two results</span></span>
<span id="cb7-14"><a href="selecting-species-of-interest.html#cb7-14"></a><span class="kw">write_csv</span>(tot_n_chklist, <span class="st">&quot;data/01_nchk_per_grid.csv&quot;</span>)</span>
<span id="cb7-15"><a href="selecting-species-of-interest.html#cb7-15"></a><span class="kw">write_csv</span>(spp_grids, <span class="st">&quot;data/01_ngrids_per_spp.csv&quot;</span>)</span>
<span id="cb7-16"><a href="selecting-species-of-interest.html#cb7-16"></a></span>
<span id="cb7-17"><a href="selecting-species-of-interest.html#cb7-17"></a><span class="co"># left-join the datasets</span></span>
<span id="cb7-18"><a href="selecting-species-of-interest.html#cb7-18"></a>ebd_summary &lt;-<span class="st"> </span><span class="kw">left_join</span>(ebd_summary, spp_grids, <span class="dt">by =</span> <span class="st">&quot;scientific_name&quot;</span>)</span>
<span id="cb7-19"><a href="selecting-species-of-interest.html#cb7-19"></a></span>
<span id="cb7-20"><a href="selecting-species-of-interest.html#cb7-20"></a><span class="co"># check the proportion of grids across which this cut-off is met for each species</span></span>
<span id="cb7-21"><a href="selecting-species-of-interest.html#cb7-21"></a><span class="co"># Is it &gt; 90% or 70%?</span></span>
<span id="cb7-22"><a href="selecting-species-of-interest.html#cb7-22"></a><span class="co"># For example, with a 3% cut-off, ~100 species are occurring in &gt;50%</span></span>
<span id="cb7-23"><a href="selecting-species-of-interest.html#cb7-23"></a><span class="co"># of the grids they have been reported in</span></span>
<span id="cb7-24"><a href="selecting-species-of-interest.html#cb7-24"></a>p_cutoff &lt;-<span class="st"> </span><span class="fl">0.05</span> <span class="co"># Proportion of checklists a species has been reported in</span></span>
<span id="cb7-25"><a href="selecting-species-of-interest.html#cb7-25"></a>grid_proportions &lt;-<span class="st"> </span>ebd_summary <span class="op">%&gt;%</span></span>
<span id="cb7-26"><a href="selecting-species-of-interest.html#cb7-26"></a><span class="st">  </span><span class="kw">group_by</span>(scientific_name) <span class="op">%&gt;%</span></span>
<span id="cb7-27"><a href="selecting-species-of-interest.html#cb7-27"></a><span class="st">  </span><span class="kw">tally</span>(p_rep <span class="op">&gt;=</span><span class="st"> </span>p_cutoff) <span class="op">%&gt;%</span></span>
<span id="cb7-28"><a href="selecting-species-of-interest.html#cb7-28"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">prop_grids_cut =</span> n <span class="op">/</span><span class="st"> </span>(spp_grids<span class="op">$</span>n_grids)) <span class="op">%&gt;%</span></span>
<span id="cb7-29"><a href="selecting-species-of-interest.html#cb7-29"></a><span class="st">  </span><span class="kw">arrange</span>(<span class="kw">desc</span>(prop_grids_cut))</span>
<span id="cb7-30"><a href="selecting-species-of-interest.html#cb7-30"></a>grid_prop_cut &lt;-<span class="st"> </span><span class="kw">filter</span>(</span>
<span id="cb7-31"><a href="selecting-species-of-interest.html#cb7-31"></a>  grid_proportions,</span>
<span id="cb7-32"><a href="selecting-species-of-interest.html#cb7-32"></a>  prop_grids_cut <span class="op">&gt;=</span><span class="st"> </span>p_cutoff</span>
<span id="cb7-33"><a href="selecting-species-of-interest.html#cb7-33"></a>)</span>
<span id="cb7-34"><a href="selecting-species-of-interest.html#cb7-34"></a></span>
<span id="cb7-35"><a href="selecting-species-of-interest.html#cb7-35"></a><span class="co"># Write the results</span></span>
<span id="cb7-36"><a href="selecting-species-of-interest.html#cb7-36"></a><span class="kw">write_csv</span>(grid_prop_cut, <span class="st">&quot;data/01_chk_5_percent.csv&quot;</span>)</span>
<span id="cb7-37"><a href="selecting-species-of-interest.html#cb7-37"></a></span>
<span id="cb7-38"><a href="selecting-species-of-interest.html#cb7-38"></a><span class="co"># Identifying the number of species that occur in potentially &lt;5% of all lists</span></span>
<span id="cb7-39"><a href="selecting-species-of-interest.html#cb7-39"></a>total_number_lists &lt;-<span class="st"> </span><span class="kw">sum</span>(tot_n_chklist<span class="op">$</span>nchk)</span>
<span id="cb7-40"><a href="selecting-species-of-interest.html#cb7-40"></a>spp_sum_chk &lt;-<span class="st"> </span>ebd_summary <span class="op">%&gt;%</span></span>
<span id="cb7-41"><a href="selecting-species-of-interest.html#cb7-41"></a><span class="st">  </span><span class="kw">distinct</span>(X, Y, scientific_name, nrep) <span class="op">%&gt;%</span></span>
<span id="cb7-42"><a href="selecting-species-of-interest.html#cb7-42"></a><span class="st">  </span><span class="kw">group_by</span>(scientific_name) <span class="op">%&gt;%</span></span>
<span id="cb7-43"><a href="selecting-species-of-interest.html#cb7-43"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">sum_chk =</span> <span class="kw">sum</span>(nrep)) <span class="op">%&gt;%</span></span>
<span id="cb7-44"><a href="selecting-species-of-interest.html#cb7-44"></a><span class="st">  </span><span class="kw">distinct</span>(scientific_name, sum_chk)</span>
<span id="cb7-45"><a href="selecting-species-of-interest.html#cb7-45"></a></span>
<span id="cb7-46"><a href="selecting-species-of-interest.html#cb7-46"></a><span class="co"># Approximately 90 to 100 species occur in &gt;5% of all checklists</span></span>
<span id="cb7-47"><a href="selecting-species-of-interest.html#cb7-47"></a>prop_all_lists &lt;-<span class="st"> </span>spp_sum_chk <span class="op">%&gt;%</span></span>
<span id="cb7-48"><a href="selecting-species-of-interest.html#cb7-48"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">prop_lists =</span> sum_chk <span class="op">/</span><span class="st"> </span>total_number_lists) <span class="op">%&gt;%</span></span>
<span id="cb7-49"><a href="selecting-species-of-interest.html#cb7-49"></a><span class="st">  </span><span class="kw">arrange</span>(<span class="kw">desc</span>(prop_lists))</span></code></pre></div>
</div>
<div id="figure-checklist-distribution" class="section level2">
<h2><span class="header-section-number">2.8</span> Figure: Checklist distribution</h2>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="selecting-species-of-interest.html#cb8-1"></a><span class="co"># add land</span></span>
<span id="cb8-2"><a href="selecting-species-of-interest.html#cb8-2"></a><span class="kw">library</span>(rnaturalearth)</span>
<span id="cb8-3"><a href="selecting-species-of-interest.html#cb8-3"></a>land &lt;-<span class="st"> </span><span class="kw">ne_countries</span>(</span>
<span id="cb8-4"><a href="selecting-species-of-interest.html#cb8-4"></a>  <span class="dt">scale =</span> <span class="dv">50</span>, <span class="dt">type =</span> <span class="st">&quot;countries&quot;</span>, <span class="dt">continent =</span> <span class="st">&quot;asia&quot;</span>,</span>
<span id="cb8-5"><a href="selecting-species-of-interest.html#cb8-5"></a>  <span class="dt">country =</span> <span class="st">&quot;india&quot;</span>,</span>
<span id="cb8-6"><a href="selecting-species-of-interest.html#cb8-6"></a>  <span class="dt">returnclass =</span> <span class="kw">c</span>(<span class="st">&quot;sf&quot;</span>)</span>
<span id="cb8-7"><a href="selecting-species-of-interest.html#cb8-7"></a>)</span>
<span id="cb8-8"><a href="selecting-species-of-interest.html#cb8-8"></a><span class="co"># crop land</span></span>
<span id="cb8-9"><a href="selecting-species-of-interest.html#cb8-9"></a>land &lt;-<span class="st"> </span><span class="kw">st_transform</span>(land, <span class="dv">32643</span>)</span></code></pre></div>
<div class="figure">
<img src="figs/fig_species_prop_checklists_25kmgrids.png" alt="" />
<p class="caption">Proportion of checklists reporting a species in each grid cell (25km side) between 2013 and 2021. Checklists were filtered to be within the boundaries of the Nilgiris and the Anamalai hills (black outline), but rounding to 25km cells may place cells outside the boundary. Deeper shades of red indicate a higher proportion of checklists reporting a species.</p>
</div>
</div>
<div id="prepare-the-species-list" class="section level2">
<h2><span class="header-section-number">2.9</span> Prepare the species list</h2>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="selecting-species-of-interest.html#cb9-1"></a><span class="co"># write the new list of species that occur in at least 5% of checklists across a minimum of 50% of the grids they have been reported in</span></span>
<span id="cb9-2"><a href="selecting-species-of-interest.html#cb9-2"></a>new_sp_list &lt;-<span class="st"> </span><span class="kw">semi_join</span>(specieslist, grid_prop_cut, <span class="dt">by =</span> <span class="st">&quot;scientific_name&quot;</span>)</span>
<span id="cb9-3"><a href="selecting-species-of-interest.html#cb9-3"></a><span class="kw">write_csv</span>(new_sp_list, <span class="st">&quot;data/01_list-of-species-cutoff.csv&quot;</span>)</span></code></pre></div>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="index.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="preparing-ebird-data.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": false,
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/pratikunterwegs/eBirdOccupancy/edit/master/01_selecting-study-species.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "section"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
