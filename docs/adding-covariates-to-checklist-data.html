<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Section 8 Adding Covariates to Checklist Data | Source code and supplementary material for Using citizen science to parse climatic and landcover influences on bird occupancy within a tropical biodiversity hotspot</title>
  <meta name="description" content="Section 8 Adding Covariates to Checklist Data | Source code and supplementary material for Using citizen science to parse climatic and landcover influences on bird occupancy within a tropical biodiversity hotspot" />
  <meta name="generator" content="bookdown 0.24 and GitBook 2.6.7" />

  <meta property="og:title" content="Section 8 Adding Covariates to Checklist Data | Source code and supplementary material for Using citizen science to parse climatic and landcover influences on bird occupancy within a tropical biodiversity hotspot" />
  <meta property="og:type" content="book" />
  
  
  
  <meta name="github-repo" content="vjjan91/eBirdOccupancy" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Section 8 Adding Covariates to Checklist Data | Source code and supplementary material for Using citizen science to parse climatic and landcover influences on bird occupancy within a tropical biodiversity hotspot" />
  
  
  



<meta name="date" content="2022-04-25" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="checking-temporal-sampling-frequency.html"/>
<link rel="next" href="modelling-species-occupancy.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<script src="libs/accessible-code-block-0.0.1/empty-anchor.js"></script>
<link href="libs/anchor-sections-1.0.1/anchor-sections.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.0.1/anchor-sections.js"></script>


<style type="text/css">
code.sourceCode > span { display: inline-block; line-height: 1.25; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Introduction</a><ul>
<li class="chapter" data-level="1.1" data-path="index.html"><a href="index.html#data-access"><i class="fa fa-check"></i><b>1.1</b> Data access</a></li>
<li class="chapter" data-level="1.2" data-path="index.html"><a href="index.html#data-processing"><i class="fa fa-check"></i><b>1.2</b> Data processing</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="selecting-species-of-interest.html"><a href="selecting-species-of-interest.html"><i class="fa fa-check"></i><b>2</b> Selecting species of interest</a><ul>
<li class="chapter" data-level="2.1" data-path="selecting-species-of-interest.html"><a href="selecting-species-of-interest.html#prepare-libraries"><i class="fa fa-check"></i><b>2.1</b> Prepare libraries</a></li>
<li class="chapter" data-level="2.2" data-path="selecting-species-of-interest.html"><a href="selecting-species-of-interest.html#subset-species-by-geographical-confines-of-the-study-area"><i class="fa fa-check"></i><b>2.2</b> Subset species by geographical confines of the study area</a></li>
<li class="chapter" data-level="2.3" data-path="selecting-species-of-interest.html"><a href="selecting-species-of-interest.html#subset-an-initial-list-of-terrestrial-birds-based-on-a-minimum-of-1000-detections-between-2013-2021-and-b-remove-species-that-are-often-easily-confused-with-congeners"><i class="fa fa-check"></i><b>2.3</b> Subset an initial list of terrestrial birds based on a) minimum of 1000 detections between 2013-2021 and b) remove species that are often easily confused with congeners</a></li>
<li class="chapter" data-level="2.4" data-path="selecting-species-of-interest.html"><a href="selecting-species-of-interest.html#read-subset-of-species-following-filtering-and-removal-of-waterbirds-raptors-and-other-noctural-species"><i class="fa fa-check"></i><b>2.4</b> Read subset of species following filtering and removal of waterbirds, raptors, and other noctural species</a></li>
<li class="chapter" data-level="2.5" data-path="selecting-species-of-interest.html"><a href="selecting-species-of-interest.html#load-raw-data-for-locations"><i class="fa fa-check"></i><b>2.5</b> Load raw data for locations</a></li>
<li class="chapter" data-level="2.6" data-path="selecting-species-of-interest.html"><a href="selecting-species-of-interest.html#get-proportional-obs-counts-in-25km-cells"><i class="fa fa-check"></i><b>2.6</b> Get proportional obs counts in 25km cells</a></li>
<li class="chapter" data-level="2.7" data-path="selecting-species-of-interest.html"><a href="selecting-species-of-interest.html#which-species-are-reported-sufficiently-in-checklists"><i class="fa fa-check"></i><b>2.7</b> Which species are reported sufficiently in checklists?</a></li>
<li class="chapter" data-level="2.8" data-path="selecting-species-of-interest.html"><a href="selecting-species-of-interest.html#figure-checklist-distribution"><i class="fa fa-check"></i><b>2.8</b> Figure: Checklist distribution</a></li>
<li class="chapter" data-level="2.9" data-path="selecting-species-of-interest.html"><a href="selecting-species-of-interest.html#prepare-the-species-list"><i class="fa fa-check"></i><b>2.9</b> Prepare the species list</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="preparing-ebird-data.html"><a href="preparing-ebird-data.html"><i class="fa fa-check"></i><b>3</b> Preparing eBird Data</a><ul>
<li class="chapter" data-level="3.1" data-path="preparing-ebird-data.html"><a href="preparing-ebird-data.html#prepare-libraries-and-data-sources"><i class="fa fa-check"></i><b>3.1</b> Prepare libraries and data sources</a></li>
<li class="chapter" data-level="3.2" data-path="preparing-ebird-data.html"><a href="preparing-ebird-data.html#filter-data"><i class="fa fa-check"></i><b>3.2</b> Filter data</a></li>
<li class="chapter" data-level="3.3" data-path="preparing-ebird-data.html"><a href="preparing-ebird-data.html#process-filtered-data"><i class="fa fa-check"></i><b>3.3</b> Process filtered data</a></li>
<li class="chapter" data-level="3.4" data-path="preparing-ebird-data.html"><a href="preparing-ebird-data.html#spatial-filter"><i class="fa fa-check"></i><b>3.4</b> Spatial filter</a></li>
<li class="chapter" data-level="3.5" data-path="preparing-ebird-data.html"><a href="preparing-ebird-data.html#handle-presence-data"><i class="fa fa-check"></i><b>3.5</b> Handle presence data</a></li>
<li class="chapter" data-level="3.6" data-path="preparing-ebird-data.html"><a href="preparing-ebird-data.html#add-decimal-time"><i class="fa fa-check"></i><b>3.6</b> Add decimal time</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="preparing-environmental-predictors.html"><a href="preparing-environmental-predictors.html"><i class="fa fa-check"></i><b>4</b> Preparing Environmental Predictors</a><ul>
<li class="chapter" data-level="4.1" data-path="preparing-environmental-predictors.html"><a href="preparing-environmental-predictors.html#prepare-libraries-1"><i class="fa fa-check"></i><b>4.1</b> Prepare libraries</a></li>
<li class="chapter" data-level="4.2" data-path="preparing-environmental-predictors.html"><a href="preparing-environmental-predictors.html#prepare-spatial-extent"><i class="fa fa-check"></i><b>4.2</b> Prepare spatial extent</a></li>
<li class="chapter" data-level="4.3" data-path="preparing-environmental-predictors.html"><a href="preparing-environmental-predictors.html#prepare-terrain-rasters"><i class="fa fa-check"></i><b>4.3</b> Prepare terrain rasters</a></li>
<li class="chapter" data-level="4.4" data-path="preparing-environmental-predictors.html"><a href="preparing-environmental-predictors.html#prepare-chelsa-rasters"><i class="fa fa-check"></i><b>4.4</b> Prepare CHELSA rasters</a><ul>
<li class="chapter" data-level="4.4.1" data-path="preparing-environmental-predictors.html"><a href="preparing-environmental-predictors.html#prepare-bioclim-4a-and-15"><i class="fa fa-check"></i><b>4.4.1</b> Prepare BIOCLIM 4a and 15</a></li>
<li class="chapter" data-level="4.4.2" data-path="preparing-environmental-predictors.html"><a href="preparing-environmental-predictors.html#prepare-bioclim-4a"><i class="fa fa-check"></i><b>4.4.2</b> Prepare BIOCLIM 4a</a></li>
<li class="chapter" data-level="4.4.3" data-path="preparing-environmental-predictors.html"><a href="preparing-environmental-predictors.html#prepare-bioclim-15"><i class="fa fa-check"></i><b>4.4.3</b> Prepare Bioclim 15</a></li>
<li class="chapter" data-level="4.4.4" data-path="preparing-environmental-predictors.html"><a href="preparing-environmental-predictors.html#stack-terrain-and-climate"><i class="fa fa-check"></i><b>4.4.4</b> Stack terrain and climate</a></li>
<li class="chapter" data-level="4.4.5" data-path="preparing-environmental-predictors.html"><a href="preparing-environmental-predictors.html#stack-terrain-and-climate-1"><i class="fa fa-check"></i><b>4.4.5</b> Stack terrain and climate</a></li>
</ul></li>
<li class="chapter" data-level="4.5" data-path="preparing-environmental-predictors.html"><a href="preparing-environmental-predictors.html#resample-landcover-from-10m-to-1km"><i class="fa fa-check"></i><b>4.5</b> Resample landcover from 10m to 1km</a></li>
<li class="chapter" data-level="4.6" data-path="preparing-environmental-predictors.html"><a href="preparing-environmental-predictors.html#resample-other-rasters-to-1km"><i class="fa fa-check"></i><b>4.6</b> Resample other rasters to 1km</a><ul>
<li class="chapter" data-level="4.6.1" data-path="preparing-environmental-predictors.html"><a href="preparing-environmental-predictors.html#read-in-resampled-landcover"><i class="fa fa-check"></i><b>4.6.1</b> Read in resampled landcover</a></li>
<li class="chapter" data-level="4.6.2" data-path="preparing-environmental-predictors.html"><a href="preparing-environmental-predictors.html#reproject-environmental-data-using-landcover-as-a-template"><i class="fa fa-check"></i><b>4.6.2</b> Reproject environmental data using landcover as a template</a></li>
</ul></li>
<li class="chapter" data-level="4.7" data-path="preparing-environmental-predictors.html"><a href="preparing-environmental-predictors.html#climate-variables-in-relation-to-elevation"><i class="fa fa-check"></i><b>4.7</b> Climate variables in relation to elevation</a><ul>
<li class="chapter" data-level="4.7.1" data-path="preparing-environmental-predictors.html"><a href="preparing-environmental-predictors.html#load-resampled-environmental-rasters"><i class="fa fa-check"></i><b>4.7.1</b> Load resampled environmental rasters</a></li>
</ul></li>
<li class="chapter" data-level="4.8" data-path="preparing-environmental-predictors.html"><a href="preparing-environmental-predictors.html#climate-across-land-cover-types"><i class="fa fa-check"></i><b>4.8</b> Climate across land cover types</a></li>
<li class="chapter" data-level="4.9" data-path="preparing-environmental-predictors.html"><a href="preparing-environmental-predictors.html#land-cover-type-in-relation-to-elevation"><i class="fa fa-check"></i><b>4.9</b> Land cover type in relation to elevation</a></li>
<li class="chapter" data-level="4.10" data-path="preparing-environmental-predictors.html"><a href="preparing-environmental-predictors.html#main-text-figure-2"><i class="fa fa-check"></i><b>4.10</b> Main Text Figure 2</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="preparing-checklist-calibration-index.html"><a href="preparing-checklist-calibration-index.html"><i class="fa fa-check"></i><b>5</b> Preparing Checklist Calibration Index</a><ul>
<li class="chapter" data-level="5.1" data-path="preparing-checklist-calibration-index.html"><a href="preparing-checklist-calibration-index.html#prepare-libraries-2"><i class="fa fa-check"></i><b>5.1</b> Prepare libraries</a></li>
<li class="chapter" data-level="5.2" data-path="preparing-checklist-calibration-index.html"><a href="preparing-checklist-calibration-index.html#prepare-data"><i class="fa fa-check"></i><b>5.2</b> Prepare data</a></li>
<li class="chapter" data-level="5.3" data-path="preparing-checklist-calibration-index.html"><a href="preparing-checklist-calibration-index.html#spatially-explicit-filter-on-checklists"><i class="fa fa-check"></i><b>5.3</b> Spatially explicit filter on checklists</a></li>
<li class="chapter" data-level="5.4" data-path="preparing-checklist-calibration-index.html"><a href="preparing-checklist-calibration-index.html#prepare-species-of-interest"><i class="fa fa-check"></i><b>5.4</b> Prepare species of interest</a></li>
<li class="chapter" data-level="5.5" data-path="preparing-checklist-calibration-index.html"><a href="preparing-checklist-calibration-index.html#prepare-checklists-for-observer-score"><i class="fa fa-check"></i><b>5.5</b> Prepare checklists for observer score</a></li>
<li class="chapter" data-level="5.6" data-path="preparing-checklist-calibration-index.html"><a href="preparing-checklist-calibration-index.html#get-landcover"><i class="fa fa-check"></i><b>5.6</b> Get landcover</a></li>
<li class="chapter" data-level="5.7" data-path="preparing-checklist-calibration-index.html"><a href="preparing-checklist-calibration-index.html#filter-checklist-data"><i class="fa fa-check"></i><b>5.7</b> Filter checklist data</a></li>
<li class="chapter" data-level="5.8" data-path="preparing-checklist-calibration-index.html"><a href="preparing-checklist-calibration-index.html#model-observer-expertise"><i class="fa fa-check"></i><b>5.8</b> Model observer expertise</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="examining-spatial-sampling-bias.html"><a href="examining-spatial-sampling-bias.html"><i class="fa fa-check"></i><b>6</b> Examining Spatial Sampling Bias</a><ul>
<li class="chapter" data-level="6.1" data-path="examining-spatial-sampling-bias.html"><a href="examining-spatial-sampling-bias.html#prepare-libraries-3"><i class="fa fa-check"></i><b>6.1</b> Prepare libraries</a></li>
<li class="chapter" data-level="6.2" data-path="examining-spatial-sampling-bias.html"><a href="examining-spatial-sampling-bias.html#read-checklist-data"><i class="fa fa-check"></i><b>6.2</b> Read checklist data</a><ul>
<li class="chapter" data-level="6.2.1" data-path="examining-spatial-sampling-bias.html"><a href="examining-spatial-sampling-bias.html#spatially-explicit-filter-on-checklists-1"><i class="fa fa-check"></i><b>6.2.1</b> Spatially explicit filter on checklists</a></li>
<li class="chapter" data-level="6.2.2" data-path="examining-spatial-sampling-bias.html"><a href="examining-spatial-sampling-bias.html#get-background-land-for-plotting"><i class="fa fa-check"></i><b>6.2.2</b> Get background land for plotting</a></li>
</ul></li>
<li class="chapter" data-level="6.3" data-path="examining-spatial-sampling-bias.html"><a href="examining-spatial-sampling-bias.html#prepare-main-text-figure-3"><i class="fa fa-check"></i><b>6.3</b> Prepare Main Text Figure 3</a><ul>
<li class="chapter" data-level="6.3.1" data-path="examining-spatial-sampling-bias.html"><a href="examining-spatial-sampling-bias.html#prepare-histogram-of-distance-to-roads"><i class="fa fa-check"></i><b>6.3.1</b> Prepare histogram of distance to roads</a></li>
<li class="chapter" data-level="6.3.2" data-path="examining-spatial-sampling-bias.html"><a href="examining-spatial-sampling-bias.html#table-distance-to-roads"><i class="fa fa-check"></i><b>6.3.2</b> Table: Distance to roads</a></li>
<li class="chapter" data-level="6.3.3" data-path="examining-spatial-sampling-bias.html"><a href="examining-spatial-sampling-bias.html#distance-to-nearest-neighbouring-site"><i class="fa fa-check"></i><b>6.3.3</b> Distance to nearest neighbouring site</a></li>
<li class="chapter" data-level="6.3.4" data-path="examining-spatial-sampling-bias.html"><a href="examining-spatial-sampling-bias.html#spatial-distribution-of-distances-to-neighbours"><i class="fa fa-check"></i><b>6.3.4</b> Spatial distribution of distances to neighbours</a></li>
</ul></li>
<li class="chapter" data-level="6.4" data-path="examining-spatial-sampling-bias.html"><a href="examining-spatial-sampling-bias.html#figure-spatial-sampling-bias"><i class="fa fa-check"></i><b>6.4</b> Figure: Spatial sampling bias</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="checking-temporal-sampling-frequency.html"><a href="checking-temporal-sampling-frequency.html"><i class="fa fa-check"></i><b>7</b> Checking Temporal Sampling Frequency</a><ul>
<li class="chapter" data-level="7.1" data-path="checking-temporal-sampling-frequency.html"><a href="checking-temporal-sampling-frequency.html#load-libraries"><i class="fa fa-check"></i><b>7.1</b> Load libraries</a></li>
<li class="chapter" data-level="7.2" data-path="checking-temporal-sampling-frequency.html"><a href="checking-temporal-sampling-frequency.html#load-checklist-data"><i class="fa fa-check"></i><b>7.2</b> Load checklist data</a></li>
<li class="chapter" data-level="7.3" data-path="checking-temporal-sampling-frequency.html"><a href="checking-temporal-sampling-frequency.html#get-time-differences-per-grid-cell"><i class="fa fa-check"></i><b>7.3</b> Get time differences per grid cell</a></li>
<li class="chapter" data-level="7.4" data-path="checking-temporal-sampling-frequency.html"><a href="checking-temporal-sampling-frequency.html#time-since-previous-checklist"><i class="fa fa-check"></i><b>7.4</b> Time Since Previous Checklist</a><ul>
<li class="chapter" data-level="7.4.1" data-path="checking-temporal-sampling-frequency.html"><a href="checking-temporal-sampling-frequency.html#get-aux-data"><i class="fa fa-check"></i><b>7.4.1</b> Get aux data</a></li>
<li class="chapter" data-level="7.4.2" data-path="checking-temporal-sampling-frequency.html"><a href="checking-temporal-sampling-frequency.html#histogram-of-lags"><i class="fa fa-check"></i><b>7.4.2</b> Histogram of lags</a></li>
</ul></li>
<li class="chapter" data-level="7.5" data-path="checking-temporal-sampling-frequency.html"><a href="checking-temporal-sampling-frequency.html#main-text-figure-3"><i class="fa fa-check"></i><b>7.5</b> Main Text Figure 3</a></li>
<li class="chapter" data-level="7.6" data-path="checking-temporal-sampling-frequency.html"><a href="checking-temporal-sampling-frequency.html#checklists-per-month"><i class="fa fa-check"></i><b>7.6</b> Checklists per Month</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="adding-covariates-to-checklist-data.html"><a href="adding-covariates-to-checklist-data.html"><i class="fa fa-check"></i><b>8</b> Adding Covariates to Checklist Data</a><ul>
<li class="chapter" data-level="8.1" data-path="adding-covariates-to-checklist-data.html"><a href="adding-covariates-to-checklist-data.html#prepare-libraries-and-data"><i class="fa fa-check"></i><b>8.1</b> Prepare libraries and data</a></li>
<li class="chapter" data-level="8.2" data-path="adding-covariates-to-checklist-data.html"><a href="adding-covariates-to-checklist-data.html#spatial-subsampling"><i class="fa fa-check"></i><b>8.2</b> Spatial subsampling</a><ul>
<li class="chapter" data-level="8.2.1" data-path="adding-covariates-to-checklist-data.html"><a href="adding-covariates-to-checklist-data.html#counting-presence-observation-proportion"><i class="fa fa-check"></i><b>8.2.1</b> Counting presence observation proportion</a></li>
<li class="chapter" data-level="8.2.2" data-path="adding-covariates-to-checklist-data.html"><a href="adding-covariates-to-checklist-data.html#count-absences-after-spatial-thinning"><i class="fa fa-check"></i><b>8.2.2</b> Count absences after spatial thinning</a></li>
</ul></li>
<li class="chapter" data-level="8.3" data-path="adding-covariates-to-checklist-data.html"><a href="adding-covariates-to-checklist-data.html#temporal-subsampling"><i class="fa fa-check"></i><b>8.3</b> Temporal subsampling</a><ul>
<li class="chapter" data-level="8.3.1" data-path="adding-covariates-to-checklist-data.html"><a href="adding-covariates-to-checklist-data.html#count-absences-after-temporal-thinning"><i class="fa fa-check"></i><b>8.3.1</b> Count absences after temporal thinning</a></li>
</ul></li>
<li class="chapter" data-level="8.4" data-path="adding-covariates-to-checklist-data.html"><a href="adding-covariates-to-checklist-data.html#add-checklist-calibration-index"><i class="fa fa-check"></i><b>8.4</b> Add checklist calibration index</a></li>
<li class="chapter" data-level="8.5" data-path="adding-covariates-to-checklist-data.html"><a href="adding-covariates-to-checklist-data.html#add-climatic-and-landscape-covariates"><i class="fa fa-check"></i><b>8.5</b> Add climatic and landscape covariates</a></li>
<li class="chapter" data-level="8.6" data-path="adding-covariates-to-checklist-data.html"><a href="adding-covariates-to-checklist-data.html#spatial-buffers-around-selected-checklists"><i class="fa fa-check"></i><b>8.6</b> Spatial buffers around selected checklists</a></li>
<li class="chapter" data-level="8.7" data-path="adding-covariates-to-checklist-data.html"><a href="adding-covariates-to-checklist-data.html#spatial-buffer-wide-covariates"><i class="fa fa-check"></i><b>8.7</b> Spatial buffer-wide covariates</a><ul>
<li class="chapter" data-level="8.7.1" data-path="adding-covariates-to-checklist-data.html"><a href="adding-covariates-to-checklist-data.html#mean-climatic-covariates"><i class="fa fa-check"></i><b>8.7.1</b> Mean climatic covariates</a></li>
<li class="chapter" data-level="8.7.2" data-path="adding-covariates-to-checklist-data.html"><a href="adding-covariates-to-checklist-data.html#proportions-of-land-cover-type"><i class="fa fa-check"></i><b>8.7.2</b> Proportions of land cover type</a></li>
<li class="chapter" data-level="8.7.3" data-path="adding-covariates-to-checklist-data.html"><a href="adding-covariates-to-checklist-data.html#link-environmental-covariates-to-checklists"><i class="fa fa-check"></i><b>8.7.3</b> Link environmental covariates to checklists</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="9" data-path="modelling-species-occupancy.html"><a href="modelling-species-occupancy.html"><i class="fa fa-check"></i><b>9</b> Modelling Species Occupancy</a><ul>
<li class="chapter" data-level="9.0.1" data-path="modelling-species-occupancy.html"><a href="modelling-species-occupancy.html#load-necessary-libraries"><i class="fa fa-check"></i><b>9.0.1</b> Load necessary libraries</a></li>
<li class="chapter" data-level="9.1" data-path="modelling-species-occupancy.html"><a href="modelling-species-occupancy.html#load-dataframe-and-prepare-covariates"><i class="fa fa-check"></i><b>9.1</b> Load dataframe and prepare covariates</a><ul>
<li class="chapter" data-level="9.1.1" data-path="modelling-species-occupancy.html"><a href="modelling-species-occupancy.html#handle-the-sampling-protocol"><i class="fa fa-check"></i><b>9.1.1</b> Handle the sampling protocol</a></li>
<li class="chapter" data-level="9.1.2" data-path="modelling-species-occupancy.html"><a href="modelling-species-occupancy.html#handle-time-and-date"><i class="fa fa-check"></i><b>9.1.2</b> Handle time and date</a></li>
<li class="chapter" data-level="9.1.3" data-path="modelling-species-occupancy.html"><a href="modelling-species-occupancy.html#scaling-covariates"><i class="fa fa-check"></i><b>9.1.3</b> Scaling covariates</a></li>
<li class="chapter" data-level="9.1.4" data-path="modelling-species-occupancy.html"><a href="modelling-species-occupancy.html#correct-date-format"><i class="fa fa-check"></i><b>9.1.4</b> Correct date format</a></li>
<li class="chapter" data-level="9.1.5" data-path="modelling-species-occupancy.html"><a href="modelling-species-occupancy.html#check-for-correlated-covariates"><i class="fa fa-check"></i><b>9.1.5</b> Check for correlated covariates</a></li>
</ul></li>
<li class="chapter" data-level="9.2" data-path="modelling-species-occupancy.html"><a href="modelling-species-occupancy.html#running-a-null-model"><i class="fa fa-check"></i><b>9.2</b> Running a null model</a></li>
<li class="chapter" data-level="9.3" data-path="modelling-species-occupancy.html"><a href="modelling-species-occupancy.html#identifying-covariates-necessary-to-model-the-detection-process"><i class="fa fa-check"></i><b>9.3</b> Identifying covariates necessary to model the detection process</a></li>
<li class="chapter" data-level="9.4" data-path="modelling-species-occupancy.html"><a href="modelling-species-occupancy.html#land-cover-and-climate"><i class="fa fa-check"></i><b>9.4</b> Land Cover and Climate</a></li>
<li class="chapter" data-level="9.5" data-path="modelling-species-occupancy.html"><a href="modelling-species-occupancy.html#goodness-of-fit-tests"><i class="fa fa-check"></i><b>9.5</b> Goodness-of-fit tests</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="visualizing-occupancy-predictor-effects.html"><a href="visualizing-occupancy-predictor-effects.html"><i class="fa fa-check"></i><b>10</b> Visualizing Occupancy Predictor Effects</a><ul>
<li class="chapter" data-level="10.1" data-path="visualizing-occupancy-predictor-effects.html"><a href="visualizing-occupancy-predictor-effects.html#prepare-libraries-4"><i class="fa fa-check"></i><b>10.1</b> Prepare libraries</a></li>
<li class="chapter" data-level="10.2" data-path="visualizing-occupancy-predictor-effects.html"><a href="visualizing-occupancy-predictor-effects.html#load-species-list"><i class="fa fa-check"></i><b>10.2</b> Load species list</a></li>
<li class="chapter" data-level="10.3" data-path="visualizing-occupancy-predictor-effects.html"><a href="visualizing-occupancy-predictor-effects.html#show-aic-weight-importance"><i class="fa fa-check"></i><b>10.3</b> Show AIC weight importance</a><ul>
<li class="chapter" data-level="10.3.1" data-path="visualizing-occupancy-predictor-effects.html"><a href="visualizing-occupancy-predictor-effects.html#read-in-aic-weight-data"><i class="fa fa-check"></i><b>10.3.1</b> Read in AIC weight data</a></li>
<li class="chapter" data-level="10.3.2" data-path="visualizing-occupancy-predictor-effects.html"><a href="visualizing-occupancy-predictor-effects.html#prepare-cumulative-aic-weight-data"><i class="fa fa-check"></i><b>10.3.2</b> Prepare cumulative AIC weight data</a></li>
</ul></li>
<li class="chapter" data-level="10.4" data-path="visualizing-occupancy-predictor-effects.html"><a href="visualizing-occupancy-predictor-effects.html#prepare-model-coefficient-data"><i class="fa fa-check"></i><b>10.4</b> Prepare model coefficient data</a></li>
<li class="chapter" data-level="10.5" data-path="visualizing-occupancy-predictor-effects.html"><a href="visualizing-occupancy-predictor-effects.html#get-predictor-effects"><i class="fa fa-check"></i><b>10.5</b> Get predictor effects</a></li>
</ul></li>
<li class="chapter" data-level="11" data-path="predicting-species-specific-occupancy-as-a-function-of-significant-predictors.html"><a href="predicting-species-specific-occupancy-as-a-function-of-significant-predictors.html"><i class="fa fa-check"></i><b>11</b> Predicting species-specific occupancy as a function of significant predictors</a><ul>
<li class="chapter" data-level="11.1" data-path="predicting-species-specific-occupancy-as-a-function-of-significant-predictors.html"><a href="predicting-species-specific-occupancy-as-a-function-of-significant-predictors.html#prepare-libraries-5"><i class="fa fa-check"></i><b>11.1</b> Prepare libraries</a></li>
<li class="chapter" data-level="11.2" data-path="predicting-species-specific-occupancy-as-a-function-of-significant-predictors.html"><a href="predicting-species-specific-occupancy-as-a-function-of-significant-predictors.html#read-data"><i class="fa fa-check"></i><b>11.2</b> Read data</a></li>
<li class="chapter" data-level="11.3" data-path="predicting-species-specific-occupancy-as-a-function-of-significant-predictors.html"><a href="predicting-species-specific-occupancy-as-a-function-of-significant-predictors.html#prepare-predictor-data"><i class="fa fa-check"></i><b>11.3</b> Prepare predictor data</a></li>
<li class="chapter" data-level="11.4" data-path="predicting-species-specific-occupancy-as-a-function-of-significant-predictors.html"><a href="predicting-species-specific-occupancy-as-a-function-of-significant-predictors.html#get-predictor-responses"><i class="fa fa-check"></i><b>11.4</b> Get predictor responses</a></li>
<li class="chapter" data-level="11.5" data-path="predicting-species-specific-occupancy-as-a-function-of-significant-predictors.html"><a href="predicting-species-specific-occupancy-as-a-function-of-significant-predictors.html#get-probability-of-occupancy"><i class="fa fa-check"></i><b>11.5</b> Get probability of occupancy</a></li>
<li class="chapter" data-level="11.6" data-path="predicting-species-specific-occupancy-as-a-function-of-significant-predictors.html"><a href="predicting-species-specific-occupancy-as-a-function-of-significant-predictors.html#add-scaling-for-predictors"><i class="fa fa-check"></i><b>11.6</b> Add scaling for predictors</a><ul>
<li class="chapter" data-level="11.6.1" data-path="predicting-species-specific-occupancy-as-a-function-of-significant-predictors.html"><a href="predicting-species-specific-occupancy-as-a-function-of-significant-predictors.html#figure-occupancy-predictors"><i class="fa fa-check"></i><b>11.6.1</b> Figure: Occupancy ~ predictors</a></li>
<li class="chapter" data-level="11.6.2" data-path="predicting-species-specific-occupancy-as-a-function-of-significant-predictors.html"><a href="predicting-species-specific-occupancy-as-a-function-of-significant-predictors.html#figures-occupancy-predictors-for-all-species"><i class="fa fa-check"></i><b>11.6.2</b> Figures: Occupancy ~ predictors for all species</a></li>
</ul></li>
<li class="chapter" data-level="11.7" data-path="predicting-species-specific-occupancy-as-a-function-of-significant-predictors.html"><a href="predicting-species-specific-occupancy-as-a-function-of-significant-predictors.html#mapping-species-occupancy"><i class="fa fa-check"></i><b>11.7</b> Mapping species occupancy</a><ul>
<li class="chapter" data-level="11.7.1" data-path="predicting-species-specific-occupancy-as-a-function-of-significant-predictors.html"><a href="predicting-species-specific-occupancy-as-a-function-of-significant-predictors.html#read-in-raster-layers"><i class="fa fa-check"></i><b>11.7.1</b> Read in raster layers</a></li>
<li class="chapter" data-level="11.7.2" data-path="predicting-species-specific-occupancy-as-a-function-of-significant-predictors.html"><a href="predicting-species-specific-occupancy-as-a-function-of-significant-predictors.html#split-landcover-into-proportions-per-1km"><i class="fa fa-check"></i><b>11.7.2</b> Split landcover into proportions per 1km</a></li>
<li class="chapter" data-level="11.7.3" data-path="predicting-species-specific-occupancy-as-a-function-of-significant-predictors.html"><a href="predicting-species-specific-occupancy-as-a-function-of-significant-predictors.html#prepare-climatic-layers"><i class="fa fa-check"></i><b>11.7.3</b> Prepare climatic layers</a></li>
<li class="chapter" data-level="11.7.4" data-path="predicting-species-specific-occupancy-as-a-function-of-significant-predictors.html"><a href="predicting-species-specific-occupancy-as-a-function-of-significant-predictors.html#mask-by-study-area"><i class="fa fa-check"></i><b>11.7.4</b> Mask by study area</a></li>
<li class="chapter" data-level="11.7.5" data-path="predicting-species-specific-occupancy-as-a-function-of-significant-predictors.html"><a href="predicting-species-specific-occupancy-as-a-function-of-significant-predictors.html#plot-full-bounds-of-landscape-variables"><i class="fa fa-check"></i><b>11.7.5</b> Plot full bounds of landscape variables</a></li>
<li class="chapter" data-level="11.7.6" data-path="predicting-species-specific-occupancy-as-a-function-of-significant-predictors.html"><a href="predicting-species-specific-occupancy-as-a-function-of-significant-predictors.html#prepare-soi-predictors"><i class="fa fa-check"></i><b>11.7.6</b> Prepare soi predictors</a></li>
<li class="chapter" data-level="11.7.7" data-path="predicting-species-specific-occupancy-as-a-function-of-significant-predictors.html"><a href="predicting-species-specific-occupancy-as-a-function-of-significant-predictors.html#prepare-species-occupancy-for-soi"><i class="fa fa-check"></i><b>11.7.7</b> Prepare species occupancy for SOI</a></li>
<li class="chapter" data-level="11.7.8" data-path="predicting-species-specific-occupancy-as-a-function-of-significant-predictors.html"><a href="predicting-species-specific-occupancy-as-a-function-of-significant-predictors.html#prepare-species-occupancy-for-all-species"><i class="fa fa-check"></i><b>11.7.8</b> Prepare species occupancy for all species</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="12" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i><b>12</b> References</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Source code and supplementary material for <em>Using citizen science to parse climatic and landcover influences on bird occupancy within a tropical biodiversity hotspot</em></a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="adding-covariates-to-checklist-data" class="section level1">
<h1><span class="header-section-number">Section 8</span> Adding Covariates to Checklist Data</h1>
<p>In this section, we prepare a final list of covariates, after taking into account spatial sampling bias, temporal bias and observer expertise scores (examined in previous sections).</p>
<div id="prepare-libraries-and-data" class="section level2">
<h2><span class="header-section-number">8.1</span> Prepare libraries and data</h2>
<div class="sourceCode" id="cb69"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb69-1"><a href="adding-covariates-to-checklist-data.html#cb69-1"></a><span class="co"># load libs for data</span></span>
<span id="cb69-2"><a href="adding-covariates-to-checklist-data.html#cb69-2"></a><span class="kw">library</span>(dplyr)</span>
<span id="cb69-3"><a href="adding-covariates-to-checklist-data.html#cb69-3"></a><span class="kw">library</span>(readr)</span>
<span id="cb69-4"><a href="adding-covariates-to-checklist-data.html#cb69-4"></a><span class="kw">library</span>(stringr)</span>
<span id="cb69-5"><a href="adding-covariates-to-checklist-data.html#cb69-5"></a><span class="kw">library</span>(purrr)</span>
<span id="cb69-6"><a href="adding-covariates-to-checklist-data.html#cb69-6"></a><span class="kw">library</span>(glue)</span>
<span id="cb69-7"><a href="adding-covariates-to-checklist-data.html#cb69-7"></a><span class="kw">library</span>(tidyr)</span>
<span id="cb69-8"><a href="adding-covariates-to-checklist-data.html#cb69-8"></a></span>
<span id="cb69-9"><a href="adding-covariates-to-checklist-data.html#cb69-9"></a><span class="co"># check for velox and install</span></span>
<span id="cb69-10"><a href="adding-covariates-to-checklist-data.html#cb69-10"></a><span class="kw">library</span>(devtools)</span>
<span id="cb69-11"><a href="adding-covariates-to-checklist-data.html#cb69-11"></a><span class="cf">if</span> (<span class="op">!</span><span class="st">&quot;velox&quot;</span> <span class="op">%in%</span><span class="st"> </span><span class="kw">installed.packages</span>()) {</span>
<span id="cb69-12"><a href="adding-covariates-to-checklist-data.html#cb69-12"></a>  <span class="kw">install_github</span>(<span class="st">&quot;hunzikp/velox&quot;</span>)</span>
<span id="cb69-13"><a href="adding-covariates-to-checklist-data.html#cb69-13"></a>}</span>
<span id="cb69-14"><a href="adding-covariates-to-checklist-data.html#cb69-14"></a></span>
<span id="cb69-15"><a href="adding-covariates-to-checklist-data.html#cb69-15"></a><span class="co"># load spatial</span></span>
<span id="cb69-16"><a href="adding-covariates-to-checklist-data.html#cb69-16"></a><span class="kw">library</span>(raster)</span>
<span id="cb69-17"><a href="adding-covariates-to-checklist-data.html#cb69-17"></a><span class="kw">library</span>(rgeos)</span>
<span id="cb69-18"><a href="adding-covariates-to-checklist-data.html#cb69-18"></a><span class="kw">library</span>(velox)</span>
<span id="cb69-19"><a href="adding-covariates-to-checklist-data.html#cb69-19"></a><span class="kw">library</span>(sf)</span>
<span id="cb69-20"><a href="adding-covariates-to-checklist-data.html#cb69-20"></a></span>
<span id="cb69-21"><a href="adding-covariates-to-checklist-data.html#cb69-21"></a><span class="co"># load saved data object</span></span>
<span id="cb69-22"><a href="adding-covariates-to-checklist-data.html#cb69-22"></a><span class="kw">load</span>(<span class="st">&quot;data/01_data_prelim_processing.rdata&quot;</span>)</span></code></pre></div>
</div>
<div id="spatial-subsampling" class="section level2">
<h2><span class="header-section-number">8.2</span> Spatial subsampling</h2>
<p>Sampling bias can be introduced into citizen science due to the often ad-hoc nature of data collection (Sullivan et al. 2014). For eBird, this translates into checklists reported when convenient, rather than at regular or random points in time and space, leading to non-independence in the data if observations are spatio-temporally clustered (Johnston et al. 2021). Spatio-temporal autocorrelation in the data can be reduced by sub-sampling at an appropriate spatial resolution, and by avoiding temporal clustering. We estimated two simple measures of spatial clustering: the distance from each site to the nearest road (road data from OpenStreetMap) and the nearest-neighbor distance for each site. Sites were strongly tied to roads (mean distance to road ± SD = 390.77 ± 859.15 m; range = 0.28 m – 7.64 km) and were on average only 297 m away from another site (SD = 553 m; range = 0.14 m – 12.85 km) (Figure 3). This analysis was done in the previous section.</p>
<p>Here, to further reduce spatial autocorrelation, we divided the study area into a grid of 1km wide square cells and picked checklists from one site at random within each grid cell.</p>
<div class="sourceCode" id="cb70"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb70-1"><a href="adding-covariates-to-checklist-data.html#cb70-1"></a><span class="co"># grid based spatial thinning</span></span>
<span id="cb70-2"><a href="adding-covariates-to-checklist-data.html#cb70-2"></a>gridsize &lt;-<span class="st"> </span><span class="dv">500</span> <span class="co"># grid size in metres</span></span>
<span id="cb70-3"><a href="adding-covariates-to-checklist-data.html#cb70-3"></a>effort_distance_max &lt;-<span class="st"> </span><span class="dv">1000</span> <span class="co"># removing checklists with this distance</span></span>
<span id="cb70-4"><a href="adding-covariates-to-checklist-data.html#cb70-4"></a></span>
<span id="cb70-5"><a href="adding-covariates-to-checklist-data.html#cb70-5"></a><span class="co"># make grids across the study site</span></span>
<span id="cb70-6"><a href="adding-covariates-to-checklist-data.html#cb70-6"></a>hills &lt;-<span class="st"> </span><span class="kw">st_read</span>(<span class="st">&quot;data/spatial/hillsShapefile/Nil_Ana_Pal.shp&quot;</span>) <span class="op">%&gt;%</span></span>
<span id="cb70-7"><a href="adding-covariates-to-checklist-data.html#cb70-7"></a><span class="st">  </span><span class="kw">st_transform</span>(<span class="dv">32643</span>)</span>
<span id="cb70-8"><a href="adding-covariates-to-checklist-data.html#cb70-8"></a>grid &lt;-<span class="st"> </span><span class="kw">st_make_grid</span>(hills, <span class="dt">cellsize =</span> gridsize)</span>
<span id="cb70-9"><a href="adding-covariates-to-checklist-data.html#cb70-9"></a></span>
<span id="cb70-10"><a href="adding-covariates-to-checklist-data.html#cb70-10"></a><span class="co"># filtering on !pres_abs keeps absences</span></span>
<span id="cb70-11"><a href="adding-covariates-to-checklist-data.html#cb70-11"></a><span class="co"># this absence data will be thinned</span></span>
<span id="cb70-12"><a href="adding-covariates-to-checklist-data.html#cb70-12"></a>data_thin_absences &lt;-<span class="st"> </span><span class="kw">filter</span>(dataGrouped, <span class="op">!</span>pres_abs)</span>
<span id="cb70-13"><a href="adding-covariates-to-checklist-data.html#cb70-13"></a>data_presences &lt;-<span class="st"> </span><span class="kw">filter</span>(dataGrouped, pres_abs)</span>
<span id="cb70-14"><a href="adding-covariates-to-checklist-data.html#cb70-14"></a></span>
<span id="cb70-15"><a href="adding-covariates-to-checklist-data.html#cb70-15"></a><span class="co"># split data by species</span></span>
<span id="cb70-16"><a href="adding-covariates-to-checklist-data.html#cb70-16"></a>data_thin_absences &lt;-<span class="st"> </span><span class="kw">split</span>(</span>
<span id="cb70-17"><a href="adding-covariates-to-checklist-data.html#cb70-17"></a>  <span class="dt">x =</span> data_thin_absences,</span>
<span id="cb70-18"><a href="adding-covariates-to-checklist-data.html#cb70-18"></a>  <span class="dt">f =</span> data_thin_absences<span class="op">$</span>scientific_name</span>
<span id="cb70-19"><a href="adding-covariates-to-checklist-data.html#cb70-19"></a>)</span></code></pre></div>
<div id="counting-presence-observation-proportion" class="section level3">
<h3><span class="header-section-number">8.2.1</span> Counting presence observation proportion</h3>
<div class="sourceCode" id="cb71"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb71-1"><a href="adding-covariates-to-checklist-data.html#cb71-1"></a>data_presence_prop &lt;-<span class="st"> </span><span class="kw">count</span>(data_presences, scientific_name, <span class="dt">name =</span> <span class="st">&quot;presences&quot;</span>) <span class="op">%&gt;%</span></span>
<span id="cb71-2"><a href="adding-covariates-to-checklist-data.html#cb71-2"></a><span class="st">  </span><span class="kw">mutate</span>(</span>
<span id="cb71-3"><a href="adding-covariates-to-checklist-data.html#cb71-3"></a>    <span class="dt">absences =</span> <span class="kw">map_int</span>(data_thin_absences, nrow),</span>
<span id="cb71-4"><a href="adding-covariates-to-checklist-data.html#cb71-4"></a>    <span class="dt">presence_prop =</span> presences <span class="op">/</span><span class="st"> </span>(presences <span class="op">+</span><span class="st"> </span>absences)</span>
<span id="cb71-5"><a href="adding-covariates-to-checklist-data.html#cb71-5"></a>  )</span>
<span id="cb71-6"><a href="adding-covariates-to-checklist-data.html#cb71-6"></a></span>
<span id="cb71-7"><a href="adding-covariates-to-checklist-data.html#cb71-7"></a><span class="co"># mean and sd of presence prop</span></span>
<span id="cb71-8"><a href="adding-covariates-to-checklist-data.html#cb71-8"></a>data_presence_prop <span class="op">%&gt;%</span></span>
<span id="cb71-9"><a href="adding-covariates-to-checklist-data.html#cb71-9"></a><span class="st">  </span><span class="kw">summarise</span>(<span class="kw">mean</span>(presence_prop), <span class="kw">sd</span>(presence_prop))</span></code></pre></div>
<div class="sourceCode" id="cb72"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb72-1"><a href="adding-covariates-to-checklist-data.html#cb72-1"></a><span class="co"># spatial thinning on each species retains</span></span>
<span id="cb72-2"><a href="adding-covariates-to-checklist-data.html#cb72-2"></a><span class="co"># site with maximum visits per grid cell</span></span>
<span id="cb72-3"><a href="adding-covariates-to-checklist-data.html#cb72-3"></a>data_thin_absences &lt;-<span class="st"> </span><span class="kw">map</span>(data_thin_absences, <span class="cf">function</span>(df) {</span>
<span id="cb72-4"><a href="adding-covariates-to-checklist-data.html#cb72-4"></a></span>
<span id="cb72-5"><a href="adding-covariates-to-checklist-data.html#cb72-5"></a>  <span class="co"># count visits per locality</span></span>
<span id="cb72-6"><a href="adding-covariates-to-checklist-data.html#cb72-6"></a>  df &lt;-<span class="st"> </span><span class="kw">group_by</span>(df, locality) <span class="op">%&gt;%</span></span>
<span id="cb72-7"><a href="adding-covariates-to-checklist-data.html#cb72-7"></a><span class="st">    </span><span class="kw">mutate</span>(<span class="dt">tot_effort =</span> <span class="kw">length</span>(sampling_event_identifier)) <span class="op">%&gt;%</span></span>
<span id="cb72-8"><a href="adding-covariates-to-checklist-data.html#cb72-8"></a><span class="st">    </span><span class="kw">ungroup</span>()</span>
<span id="cb72-9"><a href="adding-covariates-to-checklist-data.html#cb72-9"></a></span>
<span id="cb72-10"><a href="adding-covariates-to-checklist-data.html#cb72-10"></a>  <span class="co"># remove sites with distances above spatial independence</span></span>
<span id="cb72-11"><a href="adding-covariates-to-checklist-data.html#cb72-11"></a>  df &lt;-<span class="st"> </span>df <span class="op">%&gt;%</span></span>
<span id="cb72-12"><a href="adding-covariates-to-checklist-data.html#cb72-12"></a><span class="st">    </span>dplyr<span class="op">::</span><span class="kw">filter</span>(effort_distance_km <span class="op">&lt;=</span><span class="st"> </span>effort_distance_max) <span class="op">%&gt;%</span></span>
<span id="cb72-13"><a href="adding-covariates-to-checklist-data.html#cb72-13"></a><span class="st">    </span><span class="kw">st_as_sf</span>(<span class="dt">coords =</span> <span class="kw">c</span>(<span class="st">&quot;longitude&quot;</span>, <span class="st">&quot;latitude&quot;</span>)) <span class="op">%&gt;%</span></span>
<span id="cb72-14"><a href="adding-covariates-to-checklist-data.html#cb72-14"></a><span class="st">    `</span><span class="dt">st_crs&lt;-</span><span class="st">`</span>(<span class="dv">4326</span>)</span>
<span id="cb72-15"><a href="adding-covariates-to-checklist-data.html#cb72-15"></a></span>
<span id="cb72-16"><a href="adding-covariates-to-checklist-data.html#cb72-16"></a>  <span class="co"># transform to regional UTM 43N and add id</span></span>
<span id="cb72-17"><a href="adding-covariates-to-checklist-data.html#cb72-17"></a>  df &lt;-<span class="st"> </span>df <span class="op">%&gt;%</span></span>
<span id="cb72-18"><a href="adding-covariates-to-checklist-data.html#cb72-18"></a><span class="st">    </span><span class="kw">st_transform</span>(<span class="dv">32643</span>) <span class="op">%&gt;%</span></span>
<span id="cb72-19"><a href="adding-covariates-to-checklist-data.html#cb72-19"></a><span class="st">    </span><span class="kw">mutate</span>(<span class="dt">coordId =</span> <span class="dv">1</span><span class="op">:</span><span class="kw">nrow</span>(.)) <span class="op">%&gt;%</span></span>
<span id="cb72-20"><a href="adding-covariates-to-checklist-data.html#cb72-20"></a><span class="st">    </span><span class="kw">bind_cols</span>(<span class="kw">as_tibble</span>(<span class="kw">st_coordinates</span>(.)))</span>
<span id="cb72-21"><a href="adding-covariates-to-checklist-data.html#cb72-21"></a></span>
<span id="cb72-22"><a href="adding-covariates-to-checklist-data.html#cb72-22"></a>  <span class="co"># whcih cell has which coords</span></span>
<span id="cb72-23"><a href="adding-covariates-to-checklist-data.html#cb72-23"></a>  grid_overlap &lt;-<span class="st"> </span><span class="kw">st_contains</span>(grid, df) <span class="op">%&gt;%</span></span>
<span id="cb72-24"><a href="adding-covariates-to-checklist-data.html#cb72-24"></a><span class="st">    </span><span class="kw">unclass</span>() <span class="op">%&gt;%</span></span>
<span id="cb72-25"><a href="adding-covariates-to-checklist-data.html#cb72-25"></a><span class="st">    </span>purrr<span class="op">::</span><span class="kw">discard</span>(<span class="dt">.p =</span> is_empty)</span>
<span id="cb72-26"><a href="adding-covariates-to-checklist-data.html#cb72-26"></a></span>
<span id="cb72-27"><a href="adding-covariates-to-checklist-data.html#cb72-27"></a>  <span class="co"># count length of grid overlap list</span></span>
<span id="cb72-28"><a href="adding-covariates-to-checklist-data.html#cb72-28"></a>  <span class="co"># this is the number of cells with points in them</span></span>
<span id="cb72-29"><a href="adding-covariates-to-checklist-data.html#cb72-29"></a>  sampled_cells &lt;-<span class="st"> </span><span class="kw">length</span>(grid_overlap)</span>
<span id="cb72-30"><a href="adding-covariates-to-checklist-data.html#cb72-30"></a></span>
<span id="cb72-31"><a href="adding-covariates-to-checklist-data.html#cb72-31"></a>  <span class="co"># make tibble</span></span>
<span id="cb72-32"><a href="adding-covariates-to-checklist-data.html#cb72-32"></a>  grid_overlap &lt;-<span class="st"> </span><span class="kw">tibble</span>(</span>
<span id="cb72-33"><a href="adding-covariates-to-checklist-data.html#cb72-33"></a>    <span class="dt">uid_cell =</span> <span class="kw">seq</span>(<span class="kw">length</span>(grid_overlap)), <span class="co"># the uid_cell is specific to this sp.</span></span>
<span id="cb72-34"><a href="adding-covariates-to-checklist-data.html#cb72-34"></a>    <span class="dt">coordId =</span> grid_overlap</span>
<span id="cb72-35"><a href="adding-covariates-to-checklist-data.html#cb72-35"></a>  )</span>
<span id="cb72-36"><a href="adding-covariates-to-checklist-data.html#cb72-36"></a></span>
<span id="cb72-37"><a href="adding-covariates-to-checklist-data.html#cb72-37"></a>  <span class="co"># unnest</span></span>
<span id="cb72-38"><a href="adding-covariates-to-checklist-data.html#cb72-38"></a>  grid_overlap &lt;-<span class="st"> </span><span class="kw">unnest</span>(grid_overlap, <span class="dt">cols =</span> <span class="st">&quot;coordId&quot;</span>)</span>
<span id="cb72-39"><a href="adding-covariates-to-checklist-data.html#cb72-39"></a></span>
<span id="cb72-40"><a href="adding-covariates-to-checklist-data.html#cb72-40"></a>  <span class="co"># join grid cell overlap with coordinate data</span></span>
<span id="cb72-41"><a href="adding-covariates-to-checklist-data.html#cb72-41"></a>  df &lt;-<span class="st"> </span><span class="kw">left_join</span>(df,</span>
<span id="cb72-42"><a href="adding-covariates-to-checklist-data.html#cb72-42"></a>    grid_overlap,</span>
<span id="cb72-43"><a href="adding-covariates-to-checklist-data.html#cb72-43"></a>    <span class="dt">by =</span> <span class="st">&quot;coordId&quot;</span></span>
<span id="cb72-44"><a href="adding-covariates-to-checklist-data.html#cb72-44"></a>  ) <span class="op">%&gt;%</span></span>
<span id="cb72-45"><a href="adding-covariates-to-checklist-data.html#cb72-45"></a><span class="st">    </span><span class="kw">st_drop_geometry</span>()</span>
<span id="cb72-46"><a href="adding-covariates-to-checklist-data.html#cb72-46"></a></span>
<span id="cb72-47"><a href="adding-covariates-to-checklist-data.html#cb72-47"></a>  <span class="co"># for each uid_cell, select coord where effort is max</span></span>
<span id="cb72-48"><a href="adding-covariates-to-checklist-data.html#cb72-48"></a>  points_max &lt;-<span class="st"> </span>df <span class="op">%&gt;%</span></span>
<span id="cb72-49"><a href="adding-covariates-to-checklist-data.html#cb72-49"></a><span class="st">    </span><span class="kw">group_by</span>(uid_cell) <span class="op">%&gt;%</span></span>
<span id="cb72-50"><a href="adding-covariates-to-checklist-data.html#cb72-50"></a><span class="st">    </span>dplyr<span class="op">::</span><span class="kw">filter</span>(tot_effort <span class="op">==</span><span class="st"> </span><span class="kw">max</span>(tot_effort)) <span class="op">%&gt;%</span></span>
<span id="cb72-51"><a href="adding-covariates-to-checklist-data.html#cb72-51"></a><span class="st">    </span><span class="co"># there may be multiple rows with max effort, select first</span></span>
<span id="cb72-52"><a href="adding-covariates-to-checklist-data.html#cb72-52"></a><span class="st">    </span>dplyr<span class="op">::</span><span class="kw">filter</span>(<span class="kw">row_number</span>() <span class="op">==</span><span class="st"> </span><span class="dv">1</span>)</span>
<span id="cb72-53"><a href="adding-covariates-to-checklist-data.html#cb72-53"></a></span>
<span id="cb72-54"><a href="adding-covariates-to-checklist-data.html#cb72-54"></a>  <span class="co"># check for number of samples</span></span>
<span id="cb72-55"><a href="adding-covariates-to-checklist-data.html#cb72-55"></a>  assertthat<span class="op">::</span><span class="kw">assert_that</span>(</span>
<span id="cb72-56"><a href="adding-covariates-to-checklist-data.html#cb72-56"></a>    assertthat<span class="op">::</span><span class="kw">are_equal</span>(sampled_cells, <span class="kw">nrow</span>(points_max),</span>
<span id="cb72-57"><a href="adding-covariates-to-checklist-data.html#cb72-57"></a>      <span class="dt">msg =</span> <span class="st">&quot;spatial thinning error: more samples than</span><span class="ch">\\</span></span>
<span id="cb72-58"><a href="adding-covariates-to-checklist-data.html#cb72-58"></a><span class="st">                          sampled cells&quot;</span></span>
<span id="cb72-59"><a href="adding-covariates-to-checklist-data.html#cb72-59"></a>    )</span>
<span id="cb72-60"><a href="adding-covariates-to-checklist-data.html#cb72-60"></a>  )</span>
<span id="cb72-61"><a href="adding-covariates-to-checklist-data.html#cb72-61"></a>  <span class="co"># check that there is one sample per cell</span></span>
<span id="cb72-62"><a href="adding-covariates-to-checklist-data.html#cb72-62"></a>  assertthat<span class="op">::</span><span class="kw">assert_that</span>(</span>
<span id="cb72-63"><a href="adding-covariates-to-checklist-data.html#cb72-63"></a>    assertthat<span class="op">::</span><span class="kw">are_equal</span>(</span>
<span id="cb72-64"><a href="adding-covariates-to-checklist-data.html#cb72-64"></a>      <span class="kw">max</span>(<span class="kw">count</span>(points_max, uid_cell)<span class="op">$</span>n), <span class="dv">1</span></span>
<span id="cb72-65"><a href="adding-covariates-to-checklist-data.html#cb72-65"></a>    )</span>
<span id="cb72-66"><a href="adding-covariates-to-checklist-data.html#cb72-66"></a>  )</span>
<span id="cb72-67"><a href="adding-covariates-to-checklist-data.html#cb72-67"></a></span>
<span id="cb72-68"><a href="adding-covariates-to-checklist-data.html#cb72-68"></a>  <span class="co"># return data without UID cell and coordinate Id</span></span>
<span id="cb72-69"><a href="adding-covariates-to-checklist-data.html#cb72-69"></a>  dplyr<span class="op">::</span><span class="kw">select</span>(<span class="kw">ungroup</span>(points_max), <span class="op">-</span>uid_cell, <span class="op">-</span>coordId, <span class="op">-</span>tot_effort)</span>
<span id="cb72-70"><a href="adding-covariates-to-checklist-data.html#cb72-70"></a>})</span>
<span id="cb72-71"><a href="adding-covariates-to-checklist-data.html#cb72-71"></a></span>
<span id="cb72-72"><a href="adding-covariates-to-checklist-data.html#cb72-72"></a><span class="co"># remove old data</span></span>
<span id="cb72-73"><a href="adding-covariates-to-checklist-data.html#cb72-73"></a><span class="kw">rm</span>(dataGrouped)</span></code></pre></div>
</div>
<div id="count-absences-after-spatial-thinning" class="section level3">
<h3><span class="header-section-number">8.2.2</span> Count absences after spatial thinning</h3>
<div class="sourceCode" id="cb73"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb73-1"><a href="adding-covariates-to-checklist-data.html#cb73-1"></a>data_presence_prop &lt;-<span class="st"> </span>data_presence_prop <span class="op">%&gt;%</span></span>
<span id="cb73-2"><a href="adding-covariates-to-checklist-data.html#cb73-2"></a><span class="st">  </span><span class="kw">mutate</span>(</span>
<span id="cb73-3"><a href="adding-covariates-to-checklist-data.html#cb73-3"></a>    <span class="dt">absences_sp_thin =</span> <span class="kw">map_int</span>(data_thin_absences, nrow)</span>
<span id="cb73-4"><a href="adding-covariates-to-checklist-data.html#cb73-4"></a>  )</span></code></pre></div>
</div>
</div>
<div id="temporal-subsampling" class="section level2">
<h2><span class="header-section-number">8.3</span> Temporal subsampling</h2>
<p>Additionally, from each selected site, we randomly selected a maximum of 10 <strong>absence</strong> checklists, which reduced temporal clustering. We kept <strong>all</strong> presence checklists.</p>
<div class="sourceCode" id="cb74"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb74-1"><a href="adding-covariates-to-checklist-data.html#cb74-1"></a><span class="co"># subsample data for random 10 observations</span></span>
<span id="cb74-2"><a href="adding-covariates-to-checklist-data.html#cb74-2"></a>dataSubsample &lt;-<span class="st"> </span><span class="kw">map</span>(data_thin_absences, <span class="cf">function</span>(df) {</span>
<span id="cb74-3"><a href="adding-covariates-to-checklist-data.html#cb74-3"></a>  df &lt;-<span class="st"> </span><span class="kw">ungroup</span>(df)</span>
<span id="cb74-4"><a href="adding-covariates-to-checklist-data.html#cb74-4"></a>  df_to_locality &lt;-<span class="st"> </span><span class="kw">split</span>(<span class="dt">x =</span> df, <span class="dt">f =</span> df<span class="op">$</span>locality)</span>
<span id="cb74-5"><a href="adding-covariates-to-checklist-data.html#cb74-5"></a>  df_samples &lt;-<span class="st"> </span><span class="kw">map_if</span>(</span>
<span id="cb74-6"><a href="adding-covariates-to-checklist-data.html#cb74-6"></a>    <span class="dt">.x =</span> df_to_locality,</span>
<span id="cb74-7"><a href="adding-covariates-to-checklist-data.html#cb74-7"></a>    <span class="dt">.p =</span> <span class="cf">function</span>(x) {</span>
<span id="cb74-8"><a href="adding-covariates-to-checklist-data.html#cb74-8"></a>      <span class="kw">nrow</span>(x) <span class="op">&gt;</span><span class="st"> </span><span class="dv">10</span></span>
<span id="cb74-9"><a href="adding-covariates-to-checklist-data.html#cb74-9"></a>    },</span>
<span id="cb74-10"><a href="adding-covariates-to-checklist-data.html#cb74-10"></a>    <span class="dt">.f =</span> <span class="cf">function</span>(x) <span class="kw">sample_n</span>(x, <span class="dv">10</span>, <span class="dt">replace =</span> <span class="ot">FALSE</span>)</span>
<span id="cb74-11"><a href="adding-covariates-to-checklist-data.html#cb74-11"></a>  )</span>
<span id="cb74-12"><a href="adding-covariates-to-checklist-data.html#cb74-12"></a></span>
<span id="cb74-13"><a href="adding-covariates-to-checklist-data.html#cb74-13"></a>  <span class="kw">bind_rows</span>(df_samples)</span>
<span id="cb74-14"><a href="adding-covariates-to-checklist-data.html#cb74-14"></a>})</span></code></pre></div>
<div id="count-absences-after-temporal-thinning" class="section level3">
<h3><span class="header-section-number">8.3.1</span> Count absences after temporal thinning</h3>
<div class="sourceCode" id="cb75"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb75-1"><a href="adding-covariates-to-checklist-data.html#cb75-1"></a>data_presence_prop &lt;-<span class="st"> </span>data_presence_prop <span class="op">%&gt;%</span></span>
<span id="cb75-2"><a href="adding-covariates-to-checklist-data.html#cb75-2"></a><span class="st">  </span><span class="kw">mutate</span>(</span>
<span id="cb75-3"><a href="adding-covariates-to-checklist-data.html#cb75-3"></a>    <span class="dt">absences_tmp_thin =</span> <span class="kw">map_int</span>(dataSubsample, nrow),</span>
<span id="cb75-4"><a href="adding-covariates-to-checklist-data.html#cb75-4"></a>    <span class="dt">presence_prop_post_thin =</span> presences <span class="op">/</span><span class="st"> </span>(presences <span class="op">+</span><span class="st"> </span>absences_tmp_thin)</span>
<span id="cb75-5"><a href="adding-covariates-to-checklist-data.html#cb75-5"></a>  )</span>
<span id="cb75-6"><a href="adding-covariates-to-checklist-data.html#cb75-6"></a></span>
<span id="cb75-7"><a href="adding-covariates-to-checklist-data.html#cb75-7"></a><span class="co"># save data</span></span>
<span id="cb75-8"><a href="adding-covariates-to-checklist-data.html#cb75-8"></a><span class="kw">write_csv</span>(data_presence_prop, <span class="st">&quot;data/results/data_class_balance.csv&quot;</span>)</span></code></pre></div>
<div class="sourceCode" id="cb76"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb76-1"><a href="adding-covariates-to-checklist-data.html#cb76-1"></a><span class="co"># bind all spatially and temporally thinned absences rows for data frame</span></span>
<span id="cb76-2"><a href="adding-covariates-to-checklist-data.html#cb76-2"></a>dataSubsample &lt;-<span class="st"> </span><span class="kw">bind_rows</span>(dataSubsample)</span>
<span id="cb76-3"><a href="adding-covariates-to-checklist-data.html#cb76-3"></a></span>
<span id="cb76-4"><a href="adding-covariates-to-checklist-data.html#cb76-4"></a><span class="co"># convert presence data to UTM 43 N and long-lat to X-Y</span></span>
<span id="cb76-5"><a href="adding-covariates-to-checklist-data.html#cb76-5"></a>data_presences &lt;-<span class="st"> </span><span class="kw">bind_cols</span>(</span>
<span id="cb76-6"><a href="adding-covariates-to-checklist-data.html#cb76-6"></a>  data_presences,</span>
<span id="cb76-7"><a href="adding-covariates-to-checklist-data.html#cb76-7"></a>  <span class="kw">as_tibble</span>(</span>
<span id="cb76-8"><a href="adding-covariates-to-checklist-data.html#cb76-8"></a>    <span class="kw">st_as_sf</span>(</span>
<span id="cb76-9"><a href="adding-covariates-to-checklist-data.html#cb76-9"></a>      data_presences,</span>
<span id="cb76-10"><a href="adding-covariates-to-checklist-data.html#cb76-10"></a>      <span class="dt">coords =</span> <span class="kw">c</span>(<span class="st">&quot;longitude&quot;</span>, <span class="st">&quot;latitude&quot;</span>),</span>
<span id="cb76-11"><a href="adding-covariates-to-checklist-data.html#cb76-11"></a>      <span class="dt">crs =</span> <span class="dv">4326</span></span>
<span id="cb76-12"><a href="adding-covariates-to-checklist-data.html#cb76-12"></a>    ) <span class="op">%&gt;%</span></span>
<span id="cb76-13"><a href="adding-covariates-to-checklist-data.html#cb76-13"></a><span class="st">      </span><span class="kw">st_transform</span>(<span class="dv">32643</span>) <span class="op">%&gt;%</span></span>
<span id="cb76-14"><a href="adding-covariates-to-checklist-data.html#cb76-14"></a><span class="st">      </span><span class="kw">st_coordinates</span>()</span>
<span id="cb76-15"><a href="adding-covariates-to-checklist-data.html#cb76-15"></a>  )</span>
<span id="cb76-16"><a href="adding-covariates-to-checklist-data.html#cb76-16"></a>)</span>
<span id="cb76-17"><a href="adding-covariates-to-checklist-data.html#cb76-17"></a></span>
<span id="cb76-18"><a href="adding-covariates-to-checklist-data.html#cb76-18"></a><span class="co"># drop long lat</span></span>
<span id="cb76-19"><a href="adding-covariates-to-checklist-data.html#cb76-19"></a>data_presences &lt;-<span class="st"> </span>dplyr<span class="op">::</span><span class="kw">select</span>(data_presences, <span class="op">-</span>longitude, <span class="op">-</span>latitude)</span>
<span id="cb76-20"><a href="adding-covariates-to-checklist-data.html#cb76-20"></a></span>
<span id="cb76-21"><a href="adding-covariates-to-checklist-data.html#cb76-21"></a><span class="co"># join ALL PRESENCES and THINNED ABSENCES</span></span>
<span id="cb76-22"><a href="adding-covariates-to-checklist-data.html#cb76-22"></a>dataSubsample &lt;-<span class="st"> </span><span class="kw">bind_rows</span>(dataSubsample, data_presences)</span>
<span id="cb76-23"><a href="adding-covariates-to-checklist-data.html#cb76-23"></a></span>
<span id="cb76-24"><a href="adding-covariates-to-checklist-data.html#cb76-24"></a><span class="co"># check joined data</span></span>
<span id="cb76-25"><a href="adding-covariates-to-checklist-data.html#cb76-25"></a>assertthat<span class="op">::</span><span class="kw">assert_that</span>(</span>
<span id="cb76-26"><a href="adding-covariates-to-checklist-data.html#cb76-26"></a>  <span class="kw">max</span>(<span class="kw">apply</span>(dataSubsample, <span class="dv">2</span>, <span class="cf">function</span>(x) <span class="kw">sum</span>(<span class="kw">is.na</span>(x)))) <span class="op">==</span><span class="st"> </span><span class="dv">0</span>,</span>
<span id="cb76-27"><a href="adding-covariates-to-checklist-data.html#cb76-27"></a>  <span class="dt">msg =</span> <span class="st">&quot;some columns missing from one of the datasets&quot;</span></span>
<span id="cb76-28"><a href="adding-covariates-to-checklist-data.html#cb76-28"></a>)</span>
<span id="cb76-29"><a href="adding-covariates-to-checklist-data.html#cb76-29"></a></span>
<span id="cb76-30"><a href="adding-covariates-to-checklist-data.html#cb76-30"></a><span class="co"># remove previous data</span></span>
<span id="cb76-31"><a href="adding-covariates-to-checklist-data.html#cb76-31"></a><span class="kw">rm</span>(data_thin_absences)</span></code></pre></div>
</div>
</div>
<div id="add-checklist-calibration-index" class="section level2">
<h2><span class="header-section-number">8.4</span> Add checklist calibration index</h2>
<p>Load the CCI computed in the previous section. The CCI was the lone observer’s expertise score for single-observer checklists, and the highest expertise score among observers for group checklists.</p>
<div class="sourceCode" id="cb77"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb77-1"><a href="adding-covariates-to-checklist-data.html#cb77-1"></a><span class="co"># read in obs score and extract numbers</span></span>
<span id="cb77-2"><a href="adding-covariates-to-checklist-data.html#cb77-2"></a>expertiseScore &lt;-<span class="st"> </span><span class="kw">read_csv</span>(<span class="st">&quot;data/03_data-obsExpertise-score.csv&quot;</span>) <span class="op">%&gt;%</span></span>
<span id="cb77-3"><a href="adding-covariates-to-checklist-data.html#cb77-3"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">numObserver =</span> <span class="kw">str_extract</span>(observer, <span class="st">&quot;</span><span class="ch">\\</span><span class="st">d+&quot;</span>)) <span class="op">%&gt;%</span></span>
<span id="cb77-4"><a href="adding-covariates-to-checklist-data.html#cb77-4"></a><span class="st">  </span>dplyr<span class="op">::</span><span class="kw">select</span>(<span class="op">-</span>observer)</span>
<span id="cb77-5"><a href="adding-covariates-to-checklist-data.html#cb77-5"></a></span>
<span id="cb77-6"><a href="adding-covariates-to-checklist-data.html#cb77-6"></a><span class="co"># group seis consist of multiple observers</span></span>
<span id="cb77-7"><a href="adding-covariates-to-checklist-data.html#cb77-7"></a><span class="co"># in this case, seis need to have the highest expertise observer score</span></span>
<span id="cb77-8"><a href="adding-covariates-to-checklist-data.html#cb77-8"></a><span class="co"># as the associated covariate</span></span>
<span id="cb77-9"><a href="adding-covariates-to-checklist-data.html#cb77-9"></a></span>
<span id="cb77-10"><a href="adding-covariates-to-checklist-data.html#cb77-10"></a><span class="co"># get unique observers per sei</span></span>
<span id="cb77-11"><a href="adding-covariates-to-checklist-data.html#cb77-11"></a>dataSeiScore &lt;-<span class="st"> </span><span class="kw">distinct</span>(</span>
<span id="cb77-12"><a href="adding-covariates-to-checklist-data.html#cb77-12"></a>  dataSubsample, sampling_event_identifier,</span>
<span id="cb77-13"><a href="adding-covariates-to-checklist-data.html#cb77-13"></a>  observer_id</span>
<span id="cb77-14"><a href="adding-covariates-to-checklist-data.html#cb77-14"></a>) <span class="op">%&gt;%</span></span>
<span id="cb77-15"><a href="adding-covariates-to-checklist-data.html#cb77-15"></a><span class="st">  </span><span class="co"># make list column of observers</span></span>
<span id="cb77-16"><a href="adding-covariates-to-checklist-data.html#cb77-16"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">observers =</span> <span class="kw">str_split</span>(observer_id, <span class="st">&quot;,&quot;</span>)) <span class="op">%&gt;%</span></span>
<span id="cb77-17"><a href="adding-covariates-to-checklist-data.html#cb77-17"></a><span class="st">  </span><span class="kw">unnest</span>(<span class="dt">cols =</span> <span class="kw">c</span>(observers)) <span class="op">%&gt;%</span></span>
<span id="cb77-18"><a href="adding-covariates-to-checklist-data.html#cb77-18"></a><span class="st">  </span><span class="co"># add numeric observer id</span></span>
<span id="cb77-19"><a href="adding-covariates-to-checklist-data.html#cb77-19"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">numObserver =</span> <span class="kw">str_extract</span>(observers, <span class="st">&quot;</span><span class="ch">\\</span><span class="st">d+&quot;</span>)) <span class="op">%&gt;%</span></span>
<span id="cb77-20"><a href="adding-covariates-to-checklist-data.html#cb77-20"></a><span class="st">  </span><span class="co"># now get distinct sei and observer id numeric</span></span>
<span id="cb77-21"><a href="adding-covariates-to-checklist-data.html#cb77-21"></a><span class="st">  </span><span class="kw">distinct</span>(sampling_event_identifier, numObserver)</span>
<span id="cb77-22"><a href="adding-covariates-to-checklist-data.html#cb77-22"></a></span>
<span id="cb77-23"><a href="adding-covariates-to-checklist-data.html#cb77-23"></a><span class="co"># now add expertise score to sei</span></span>
<span id="cb77-24"><a href="adding-covariates-to-checklist-data.html#cb77-24"></a>dataSeiScore &lt;-<span class="st"> </span><span class="kw">left_join</span>(dataSeiScore, expertiseScore,</span>
<span id="cb77-25"><a href="adding-covariates-to-checklist-data.html#cb77-25"></a>  <span class="dt">by =</span> <span class="st">&quot;numObserver&quot;</span></span>
<span id="cb77-26"><a href="adding-covariates-to-checklist-data.html#cb77-26"></a>) <span class="op">%&gt;%</span></span>
<span id="cb77-27"><a href="adding-covariates-to-checklist-data.html#cb77-27"></a><span class="st">  </span><span class="co"># get max expertise score per sei</span></span>
<span id="cb77-28"><a href="adding-covariates-to-checklist-data.html#cb77-28"></a><span class="st">  </span><span class="kw">group_by</span>(sampling_event_identifier) <span class="op">%&gt;%</span></span>
<span id="cb77-29"><a href="adding-covariates-to-checklist-data.html#cb77-29"></a><span class="st">  </span><span class="kw">summarise</span>(<span class="dt">expertise =</span> <span class="kw">max</span>(score))</span>
<span id="cb77-30"><a href="adding-covariates-to-checklist-data.html#cb77-30"></a></span>
<span id="cb77-31"><a href="adding-covariates-to-checklist-data.html#cb77-31"></a><span class="co"># add to dataCovar</span></span>
<span id="cb77-32"><a href="adding-covariates-to-checklist-data.html#cb77-32"></a>dataSubsample &lt;-<span class="st"> </span><span class="kw">left_join</span>(dataSubsample, dataSeiScore,</span>
<span id="cb77-33"><a href="adding-covariates-to-checklist-data.html#cb77-33"></a>  <span class="dt">by =</span> <span class="st">&quot;sampling_event_identifier&quot;</span></span>
<span id="cb77-34"><a href="adding-covariates-to-checklist-data.html#cb77-34"></a>)</span>
<span id="cb77-35"><a href="adding-covariates-to-checklist-data.html#cb77-35"></a></span>
<span id="cb77-36"><a href="adding-covariates-to-checklist-data.html#cb77-36"></a><span class="co"># remove data without expertise score</span></span>
<span id="cb77-37"><a href="adding-covariates-to-checklist-data.html#cb77-37"></a>dataSubsample &lt;-<span class="st"> </span><span class="kw">filter</span>(dataSubsample, <span class="op">!</span><span class="kw">is.na</span>(expertise))</span></code></pre></div>
</div>
<div id="add-climatic-and-landscape-covariates" class="section level2">
<h2><span class="header-section-number">8.5</span> Add climatic and landscape covariates</h2>
<p>Reload climate and land cover predictors prepared previously.</p>
<div class="sourceCode" id="cb78"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb78-1"><a href="adding-covariates-to-checklist-data.html#cb78-1"></a><span class="co"># list landscape covariate stacks</span></span>
<span id="cb78-2"><a href="adding-covariates-to-checklist-data.html#cb78-2"></a>landscape_files &lt;-<span class="st"> &quot;data/spatial/landscape_resamp01_km.tif&quot;</span></span>
<span id="cb78-3"><a href="adding-covariates-to-checklist-data.html#cb78-3"></a></span>
<span id="cb78-4"><a href="adding-covariates-to-checklist-data.html#cb78-4"></a><span class="co"># read in as stacks</span></span>
<span id="cb78-5"><a href="adding-covariates-to-checklist-data.html#cb78-5"></a>landscape_data &lt;-<span class="st"> </span><span class="kw">stack</span>(landscape_files)</span>
<span id="cb78-6"><a href="adding-covariates-to-checklist-data.html#cb78-6"></a></span>
<span id="cb78-7"><a href="adding-covariates-to-checklist-data.html#cb78-7"></a><span class="co"># get proper names</span></span>
<span id="cb78-8"><a href="adding-covariates-to-checklist-data.html#cb78-8"></a>elev_names &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;elev&quot;</span>, <span class="st">&quot;slope&quot;</span>, <span class="st">&quot;aspect&quot;</span>)</span>
<span id="cb78-9"><a href="adding-covariates-to-checklist-data.html#cb78-9"></a>chelsa_names &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;bio_1&quot;</span>, <span class="st">&quot;bio_12&quot;</span>)</span>
<span id="cb78-10"><a href="adding-covariates-to-checklist-data.html#cb78-10"></a></span>
<span id="cb78-11"><a href="adding-covariates-to-checklist-data.html#cb78-11"></a><span class="kw">names</span>(landscape_data) &lt;-<span class="st"> </span><span class="kw">as.character</span>(<span class="kw">glue</span>(<span class="st">&#39;{c(elev_names, chelsa_names, &quot;landcover&quot;)}&#39;</span>))</span></code></pre></div>
</div>
<div id="spatial-buffers-around-selected-checklists" class="section level2">
<h2><span class="header-section-number">8.6</span> Spatial buffers around selected checklists</h2>
<p>Every checklist on eBird is associated with a latitude and longitude. However, the coordinates entered by an observer may not accurately depict the location at which a species was detected. This can occur for two reasons: first, traveling checklists are often associated with a single location along the route travelled by observers; and second, checklist locations could be assigned to a ‘hotspot’ – a location that is marked by eBird as being frequented by multiple observers. In many cases, an observation might be assigned to a hotspot even though the observation was not made at the precise location of the hotspot (Praveen J 2017). Johnston et al. (2021) showed that a large proportion of observations occurred within a 3km grid, even for those checklists up to 5km in length. Hence to adjust for spatial precision, we considered a minimum radius of 2.5km around each unique locality when sampling environmental covariate values.</p>
<div class="sourceCode" id="cb79"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb79-1"><a href="adding-covariates-to-checklist-data.html#cb79-1"></a><span class="co"># assign neighbourhood radius in m</span></span>
<span id="cb79-2"><a href="adding-covariates-to-checklist-data.html#cb79-2"></a>sample_radius &lt;-<span class="st"> </span><span class="fl">2.5</span> <span class="op">*</span><span class="st"> </span><span class="fl">1e3</span></span>
<span id="cb79-3"><a href="adding-covariates-to-checklist-data.html#cb79-3"></a></span>
<span id="cb79-4"><a href="adding-covariates-to-checklist-data.html#cb79-4"></a><span class="co"># get distinct points and make buffer</span></span>
<span id="cb79-5"><a href="adding-covariates-to-checklist-data.html#cb79-5"></a>ebird_buff &lt;-<span class="st"> </span>dataSubsample <span class="op">%&gt;%</span></span>
<span id="cb79-6"><a href="adding-covariates-to-checklist-data.html#cb79-6"></a><span class="st">  </span><span class="kw">ungroup</span>() <span class="op">%&gt;%</span></span>
<span id="cb79-7"><a href="adding-covariates-to-checklist-data.html#cb79-7"></a><span class="st">  </span><span class="kw">distinct</span>(X, Y) <span class="op">%&gt;%</span></span>
<span id="cb79-8"><a href="adding-covariates-to-checklist-data.html#cb79-8"></a><span class="st">  </span><span class="co"># remove NAs</span></span>
<span id="cb79-9"><a href="adding-covariates-to-checklist-data.html#cb79-9"></a><span class="st">  </span><span class="kw">drop_na</span>()</span>
<span id="cb79-10"><a href="adding-covariates-to-checklist-data.html#cb79-10"></a></span>
<span id="cb79-11"><a href="adding-covariates-to-checklist-data.html#cb79-11"></a><span class="co"># convert to spatial features</span></span>
<span id="cb79-12"><a href="adding-covariates-to-checklist-data.html#cb79-12"></a>ebird_buff &lt;-<span class="st"> </span><span class="kw">st_as_sf</span>(ebird_buff, <span class="dt">coords =</span> <span class="kw">c</span>(<span class="st">&quot;X&quot;</span>, <span class="st">&quot;Y&quot;</span>), <span class="dt">crs =</span> <span class="dv">32643</span>) <span class="op">%&gt;%</span></span>
<span id="cb79-13"><a href="adding-covariates-to-checklist-data.html#cb79-13"></a><span class="st">  </span><span class="co"># add long lat</span></span>
<span id="cb79-14"><a href="adding-covariates-to-checklist-data.html#cb79-14"></a><span class="st">  </span><span class="kw">bind_cols</span>(<span class="kw">as_tibble</span>(<span class="kw">st_coordinates</span>(.))) <span class="op">%&gt;%</span></span>
<span id="cb79-15"><a href="adding-covariates-to-checklist-data.html#cb79-15"></a><span class="st">  </span><span class="co"># make buffer around points</span></span>
<span id="cb79-16"><a href="adding-covariates-to-checklist-data.html#cb79-16"></a><span class="st">  </span><span class="kw">st_buffer</span>(<span class="dt">dist =</span> sample_radius)</span></code></pre></div>
</div>
<div id="spatial-buffer-wide-covariates" class="section level2">
<h2><span class="header-section-number">8.7</span> Spatial buffer-wide covariates</h2>
<div id="mean-climatic-covariates" class="section level3">
<h3><span class="header-section-number">8.7.1</span> Mean climatic covariates</h3>
<p>All climatic covariates are sampled by considering the mean values within a 2.5km radius as discussed above and prefixed “am_”.</p>
<div class="sourceCode" id="cb80"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb80-1"><a href="adding-covariates-to-checklist-data.html#cb80-1"></a><span class="co"># get area mean for all preds except landcover, which is the last one</span></span>
<span id="cb80-2"><a href="adding-covariates-to-checklist-data.html#cb80-2"></a>stk &lt;-<span class="st"> </span>raster<span class="op">::</span><span class="kw">dropLayer</span>(landscape_data, <span class="st">&quot;landcover&quot;</span>) <span class="co"># removing landcover here</span></span>
<span id="cb80-3"><a href="adding-covariates-to-checklist-data.html#cb80-3"></a>velstk &lt;-<span class="st"> </span><span class="kw">velox</span>(stk)</span>
<span id="cb80-4"><a href="adding-covariates-to-checklist-data.html#cb80-4"></a></span>
<span id="cb80-5"><a href="adding-covariates-to-checklist-data.html#cb80-5"></a><span class="co"># velox raster value extraction</span></span>
<span id="cb80-6"><a href="adding-covariates-to-checklist-data.html#cb80-6"></a>dextr &lt;-<span class="st"> </span>velstk<span class="op">$</span><span class="kw">extract</span>(</span>
<span id="cb80-7"><a href="adding-covariates-to-checklist-data.html#cb80-7"></a>  <span class="dt">sp =</span> ebird_buff, <span class="dt">df =</span> <span class="ot">TRUE</span>,</span>
<span id="cb80-8"><a href="adding-covariates-to-checklist-data.html#cb80-8"></a>  <span class="dt">fun =</span> <span class="cf">function</span>(x) <span class="kw">mean</span>(x, <span class="dt">na.rm =</span> T)</span>
<span id="cb80-9"><a href="adding-covariates-to-checklist-data.html#cb80-9"></a>)</span>
<span id="cb80-10"><a href="adding-covariates-to-checklist-data.html#cb80-10"></a></span>
<span id="cb80-11"><a href="adding-covariates-to-checklist-data.html#cb80-11"></a><span class="co"># assign names for joining</span></span>
<span id="cb80-12"><a href="adding-covariates-to-checklist-data.html#cb80-12"></a><span class="kw">names</span>(dextr) &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;id&quot;</span>, <span class="kw">names</span>(stk))</span>
<span id="cb80-13"><a href="adding-covariates-to-checklist-data.html#cb80-13"></a>env_area_mean &lt;-<span class="st"> </span><span class="kw">as_tibble</span>(dextr)</span>
<span id="cb80-14"><a href="adding-covariates-to-checklist-data.html#cb80-14"></a></span>
<span id="cb80-15"><a href="adding-covariates-to-checklist-data.html#cb80-15"></a><span class="co"># add id to buffer data</span></span>
<span id="cb80-16"><a href="adding-covariates-to-checklist-data.html#cb80-16"></a>ebird_buff &lt;-<span class="st"> </span><span class="kw">mutate</span>(ebird_buff,</span>
<span id="cb80-17"><a href="adding-covariates-to-checklist-data.html#cb80-17"></a>  <span class="dt">id =</span> <span class="kw">seq</span>(<span class="kw">nrow</span>(ebird_buff))</span>
<span id="cb80-18"><a href="adding-covariates-to-checklist-data.html#cb80-18"></a>)</span>
<span id="cb80-19"><a href="adding-covariates-to-checklist-data.html#cb80-19"></a></span>
<span id="cb80-20"><a href="adding-covariates-to-checklist-data.html#cb80-20"></a><span class="co"># join to buffer data</span></span>
<span id="cb80-21"><a href="adding-covariates-to-checklist-data.html#cb80-21"></a>ebird_buff &lt;-<span class="st"> </span><span class="kw">inner_join</span>(ebird_buff, env_area_mean)</span></code></pre></div>
</div>
<div id="proportions-of-land-cover-type" class="section level3">
<h3><span class="header-section-number">8.7.2</span> Proportions of land cover type</h3>
<p>All land cover covariates were sampled by considering the proportion of each land cover type within a 2.5km radius.</p>
<div class="sourceCode" id="cb81"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb81-1"><a href="adding-covariates-to-checklist-data.html#cb81-1"></a><span class="co"># get the last element of each stack from the list</span></span>
<span id="cb81-2"><a href="adding-covariates-to-checklist-data.html#cb81-2"></a><span class="co"># this is the landcover at that resolution</span></span>
<span id="cb81-3"><a href="adding-covariates-to-checklist-data.html#cb81-3"></a>lc &lt;-<span class="st"> </span>landscape_data[[<span class="st">&quot;landcover&quot;</span>]] <span class="co"># accessing landcover here</span></span>
<span id="cb81-4"><a href="adding-covariates-to-checklist-data.html#cb81-4"></a>lc_velox &lt;-<span class="st"> </span><span class="kw">velox</span>(lc)</span>
<span id="cb81-5"><a href="adding-covariates-to-checklist-data.html#cb81-5"></a>lc_vals &lt;-<span class="st"> </span>lc_velox<span class="op">$</span><span class="kw">extract</span>(<span class="dt">sp =</span> ebird_buff, <span class="dt">df =</span> <span class="ot">TRUE</span>)</span>
<span id="cb81-6"><a href="adding-covariates-to-checklist-data.html#cb81-6"></a><span class="kw">names</span>(lc_vals) &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;id&quot;</span>, <span class="st">&quot;lc&quot;</span>)</span>
<span id="cb81-7"><a href="adding-covariates-to-checklist-data.html#cb81-7"></a></span>
<span id="cb81-8"><a href="adding-covariates-to-checklist-data.html#cb81-8"></a><span class="co"># get landcover proportions</span></span>
<span id="cb81-9"><a href="adding-covariates-to-checklist-data.html#cb81-9"></a>lc_prop &lt;-<span class="st"> </span><span class="kw">count</span>(lc_vals, id, lc) <span class="op">%&gt;%</span></span>
<span id="cb81-10"><a href="adding-covariates-to-checklist-data.html#cb81-10"></a><span class="st">  </span><span class="kw">group_by</span>(id) <span class="op">%&gt;%</span></span>
<span id="cb81-11"><a href="adding-covariates-to-checklist-data.html#cb81-11"></a><span class="st">  </span><span class="kw">mutate</span>(</span>
<span id="cb81-12"><a href="adding-covariates-to-checklist-data.html#cb81-12"></a>    <span class="dt">lc =</span> <span class="kw">glue</span>(<span class="st">&#39;lc_{str_pad(lc, 2, pad = &quot;0&quot;)}&#39;</span>),</span>
<span id="cb81-13"><a href="adding-covariates-to-checklist-data.html#cb81-13"></a>    <span class="dt">prop =</span> n <span class="op">/</span><span class="st"> </span><span class="kw">sum</span>(n)</span>
<span id="cb81-14"><a href="adding-covariates-to-checklist-data.html#cb81-14"></a>  ) <span class="op">%&gt;%</span></span>
<span id="cb81-15"><a href="adding-covariates-to-checklist-data.html#cb81-15"></a><span class="st">  </span>dplyr<span class="op">::</span><span class="kw">select</span>(<span class="op">-</span>n) <span class="op">%&gt;%</span></span>
<span id="cb81-16"><a href="adding-covariates-to-checklist-data.html#cb81-16"></a><span class="st">  </span>tidyr<span class="op">::</span><span class="kw">pivot_wider</span>(</span>
<span id="cb81-17"><a href="adding-covariates-to-checklist-data.html#cb81-17"></a>    <span class="dt">names_from =</span> lc,</span>
<span id="cb81-18"><a href="adding-covariates-to-checklist-data.html#cb81-18"></a>    <span class="dt">values_from =</span> prop,</span>
<span id="cb81-19"><a href="adding-covariates-to-checklist-data.html#cb81-19"></a>    <span class="dt">values_fill =</span> <span class="kw">list</span>(<span class="dt">prop =</span> <span class="dv">0</span>)</span>
<span id="cb81-20"><a href="adding-covariates-to-checklist-data.html#cb81-20"></a>  ) <span class="op">%&gt;%</span></span>
<span id="cb81-21"><a href="adding-covariates-to-checklist-data.html#cb81-21"></a><span class="st">  </span><span class="kw">ungroup</span>()</span>
<span id="cb81-22"><a href="adding-covariates-to-checklist-data.html#cb81-22"></a></span>
<span id="cb81-23"><a href="adding-covariates-to-checklist-data.html#cb81-23"></a><span class="co"># join to data</span></span>
<span id="cb81-24"><a href="adding-covariates-to-checklist-data.html#cb81-24"></a>ebird_buff &lt;-<span class="st"> </span><span class="kw">mutate</span>(ebird_buff, lc_prop)</span></code></pre></div>
</div>
<div id="link-environmental-covariates-to-checklists" class="section level3">
<h3><span class="header-section-number">8.7.3</span> Link environmental covariates to checklists</h3>
<div class="sourceCode" id="cb82"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb82-1"><a href="adding-covariates-to-checklist-data.html#cb82-1"></a><span class="co"># drop geometry</span></span>
<span id="cb82-2"><a href="adding-covariates-to-checklist-data.html#cb82-2"></a>ebird_buff &lt;-<span class="st"> </span><span class="kw">st_drop_geometry</span>(ebird_buff)</span>
<span id="cb82-3"><a href="adding-covariates-to-checklist-data.html#cb82-3"></a></span>
<span id="cb82-4"><a href="adding-covariates-to-checklist-data.html#cb82-4"></a><span class="co"># link to dataSubsample</span></span>
<span id="cb82-5"><a href="adding-covariates-to-checklist-data.html#cb82-5"></a>dataSubsample &lt;-<span class="st"> </span><span class="kw">inner_join</span>(dataSubsample, ebird_buff,</span>
<span id="cb82-6"><a href="adding-covariates-to-checklist-data.html#cb82-6"></a>  <span class="dt">by =</span> <span class="kw">c</span>(<span class="st">&quot;X&quot;</span>, <span class="st">&quot;Y&quot;</span>)</span>
<span id="cb82-7"><a href="adding-covariates-to-checklist-data.html#cb82-7"></a>)</span></code></pre></div>
<p>Save data to file.</p>
<div class="sourceCode" id="cb83"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb83-1"><a href="adding-covariates-to-checklist-data.html#cb83-1"></a><span class="co"># write to file</span></span>
<span id="cb83-2"><a href="adding-covariates-to-checklist-data.html#cb83-2"></a><span class="kw">write_csv</span>(dataSubsample, <span class="dt">path =</span> <span class="kw">glue</span>(<span class="st">&quot;data/04_data-covars-2.5km.csv&quot;</span>))</span></code></pre></div>

</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="checking-temporal-sampling-frequency.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="modelling-species-occupancy.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": false,
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/pratikunterwegs/eBirdOccupancy/edit/master/08_final-covar-data.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "section"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
