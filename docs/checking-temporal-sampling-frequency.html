<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Section 7 Checking Temporal Sampling Frequency | Source code and supplementary material for Using citizen science to parse climatic and landcover influences on bird occupancy within a tropical biodiversity hotspot</title>
  <meta name="description" content="Section 7 Checking Temporal Sampling Frequency | Source code and supplementary material for Using citizen science to parse climatic and landcover influences on bird occupancy within a tropical biodiversity hotspot" />
  <meta name="generator" content="bookdown 0.24 and GitBook 2.6.7" />

  <meta property="og:title" content="Section 7 Checking Temporal Sampling Frequency | Source code and supplementary material for Using citizen science to parse climatic and landcover influences on bird occupancy within a tropical biodiversity hotspot" />
  <meta property="og:type" content="book" />
  
  
  
  <meta name="github-repo" content="vjjan91/eBirdOccupancy" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Section 7 Checking Temporal Sampling Frequency | Source code and supplementary material for Using citizen science to parse climatic and landcover influences on bird occupancy within a tropical biodiversity hotspot" />
  
  
  



<meta name="date" content="2022-04-28" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="examining-spatial-sampling-bias.html"/>
<link rel="next" href="adding-covariates-to-checklist-data.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<script src="libs/accessible-code-block-0.0.1/empty-anchor.js"></script>
<link href="libs/anchor-sections-1.0.1/anchor-sections.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.0.1/anchor-sections.js"></script>


<style type="text/css">
code.sourceCode > span { display: inline-block; line-height: 1.25; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Introduction</a><ul>
<li class="chapter" data-level="1.1" data-path="index.html"><a href="index.html#data-processing"><i class="fa fa-check"></i><b>1.1</b> Data processing</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="selecting-species-of-interest.html"><a href="selecting-species-of-interest.html"><i class="fa fa-check"></i><b>2</b> Selecting species of interest</a><ul>
<li class="chapter" data-level="2.1" data-path="selecting-species-of-interest.html"><a href="selecting-species-of-interest.html#prepare-libraries"><i class="fa fa-check"></i><b>2.1</b> Prepare libraries</a></li>
<li class="chapter" data-level="2.2" data-path="selecting-species-of-interest.html"><a href="selecting-species-of-interest.html#subset-species-by-geographical-confines-of-the-study-area"><i class="fa fa-check"></i><b>2.2</b> Subset species by geographical confines of the study area</a></li>
<li class="chapter" data-level="2.3" data-path="selecting-species-of-interest.html"><a href="selecting-species-of-interest.html#subset-an-initial-list-of-terrestrial-birds-based-on-a-minimum-of-1000-detections-between-2013-2021-and-b-remove-species-that-are-often-easily-confused-with-congeners"><i class="fa fa-check"></i><b>2.3</b> Subset an initial list of terrestrial birds based on a) minimum of 1000 detections between 2013-2021 and b) remove species that are often easily confused with congeners</a></li>
<li class="chapter" data-level="2.4" data-path="selecting-species-of-interest.html"><a href="selecting-species-of-interest.html#read-subset-of-species-following-filtering-and-removal-of-waterbirds-raptors-and-other-noctural-species"><i class="fa fa-check"></i><b>2.4</b> Read subset of species following filtering and removal of waterbirds, raptors, and other noctural species</a></li>
<li class="chapter" data-level="2.5" data-path="selecting-species-of-interest.html"><a href="selecting-species-of-interest.html#load-raw-data-for-locations"><i class="fa fa-check"></i><b>2.5</b> Load raw data for locations</a></li>
<li class="chapter" data-level="2.6" data-path="selecting-species-of-interest.html"><a href="selecting-species-of-interest.html#get-proportional-obs-counts-in-25km-cells"><i class="fa fa-check"></i><b>2.6</b> Get proportional obs counts in 25km cells</a></li>
<li class="chapter" data-level="2.7" data-path="selecting-species-of-interest.html"><a href="selecting-species-of-interest.html#which-species-are-reported-sufficiently-in-checklists"><i class="fa fa-check"></i><b>2.7</b> Which species are reported sufficiently in checklists?</a></li>
<li class="chapter" data-level="2.8" data-path="selecting-species-of-interest.html"><a href="selecting-species-of-interest.html#figure-checklist-distribution"><i class="fa fa-check"></i><b>2.8</b> Figure: Checklist distribution</a></li>
<li class="chapter" data-level="2.9" data-path="selecting-species-of-interest.html"><a href="selecting-species-of-interest.html#prepare-the-species-list"><i class="fa fa-check"></i><b>2.9</b> Prepare the species list</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="preparing-ebird-data.html"><a href="preparing-ebird-data.html"><i class="fa fa-check"></i><b>3</b> Preparing eBird Data</a><ul>
<li class="chapter" data-level="3.1" data-path="preparing-ebird-data.html"><a href="preparing-ebird-data.html#prepare-libraries-and-data-sources"><i class="fa fa-check"></i><b>3.1</b> Prepare libraries and data sources</a></li>
<li class="chapter" data-level="3.2" data-path="preparing-ebird-data.html"><a href="preparing-ebird-data.html#filter-data"><i class="fa fa-check"></i><b>3.2</b> Filter data</a></li>
<li class="chapter" data-level="3.3" data-path="preparing-ebird-data.html"><a href="preparing-ebird-data.html#process-filtered-data"><i class="fa fa-check"></i><b>3.3</b> Process filtered data</a></li>
<li class="chapter" data-level="3.4" data-path="preparing-ebird-data.html"><a href="preparing-ebird-data.html#spatial-filter"><i class="fa fa-check"></i><b>3.4</b> Spatial filter</a></li>
<li class="chapter" data-level="3.5" data-path="preparing-ebird-data.html"><a href="preparing-ebird-data.html#handle-presence-data"><i class="fa fa-check"></i><b>3.5</b> Handle presence data</a></li>
<li class="chapter" data-level="3.6" data-path="preparing-ebird-data.html"><a href="preparing-ebird-data.html#add-decimal-time"><i class="fa fa-check"></i><b>3.6</b> Add decimal time</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="preparing-environmental-predictors.html"><a href="preparing-environmental-predictors.html"><i class="fa fa-check"></i><b>4</b> Preparing Environmental Predictors</a><ul>
<li class="chapter" data-level="4.1" data-path="preparing-environmental-predictors.html"><a href="preparing-environmental-predictors.html#prepare-libraries-1"><i class="fa fa-check"></i><b>4.1</b> Prepare libraries</a></li>
<li class="chapter" data-level="4.2" data-path="preparing-environmental-predictors.html"><a href="preparing-environmental-predictors.html#prepare-spatial-extent"><i class="fa fa-check"></i><b>4.2</b> Prepare spatial extent</a></li>
<li class="chapter" data-level="4.3" data-path="preparing-environmental-predictors.html"><a href="preparing-environmental-predictors.html#prepare-terrain-rasters"><i class="fa fa-check"></i><b>4.3</b> Prepare terrain rasters</a></li>
<li class="chapter" data-level="4.4" data-path="preparing-environmental-predictors.html"><a href="preparing-environmental-predictors.html#prepare-chelsa-rasters"><i class="fa fa-check"></i><b>4.4</b> Prepare CHELSA rasters</a><ul>
<li class="chapter" data-level="4.4.1" data-path="preparing-environmental-predictors.html"><a href="preparing-environmental-predictors.html#prepare-bioclim-4a-and-15"><i class="fa fa-check"></i><b>4.4.1</b> Prepare BIOCLIM 4a and 15</a></li>
<li class="chapter" data-level="4.4.2" data-path="preparing-environmental-predictors.html"><a href="preparing-environmental-predictors.html#prepare-bioclim-4a"><i class="fa fa-check"></i><b>4.4.2</b> Prepare BIOCLIM 4a</a></li>
<li class="chapter" data-level="4.4.3" data-path="preparing-environmental-predictors.html"><a href="preparing-environmental-predictors.html#prepare-bioclim-15"><i class="fa fa-check"></i><b>4.4.3</b> Prepare Bioclim 15</a></li>
<li class="chapter" data-level="4.4.4" data-path="preparing-environmental-predictors.html"><a href="preparing-environmental-predictors.html#stack-terrain-and-climate"><i class="fa fa-check"></i><b>4.4.4</b> Stack terrain and climate</a></li>
<li class="chapter" data-level="4.4.5" data-path="preparing-environmental-predictors.html"><a href="preparing-environmental-predictors.html#stack-terrain-and-climate-1"><i class="fa fa-check"></i><b>4.4.5</b> Stack terrain and climate</a></li>
</ul></li>
<li class="chapter" data-level="4.5" data-path="preparing-environmental-predictors.html"><a href="preparing-environmental-predictors.html#resample-landcover-from-10m-to-1km"><i class="fa fa-check"></i><b>4.5</b> Resample landcover from 10m to 1km</a></li>
<li class="chapter" data-level="4.6" data-path="preparing-environmental-predictors.html"><a href="preparing-environmental-predictors.html#resample-other-rasters-to-1km"><i class="fa fa-check"></i><b>4.6</b> Resample other rasters to 1km</a><ul>
<li class="chapter" data-level="4.6.1" data-path="preparing-environmental-predictors.html"><a href="preparing-environmental-predictors.html#read-in-resampled-landcover"><i class="fa fa-check"></i><b>4.6.1</b> Read in resampled landcover</a></li>
<li class="chapter" data-level="4.6.2" data-path="preparing-environmental-predictors.html"><a href="preparing-environmental-predictors.html#reproject-environmental-data-using-landcover-as-a-template"><i class="fa fa-check"></i><b>4.6.2</b> Reproject environmental data using landcover as a template</a></li>
</ul></li>
<li class="chapter" data-level="4.7" data-path="preparing-environmental-predictors.html"><a href="preparing-environmental-predictors.html#climate-variables-in-relation-to-elevation"><i class="fa fa-check"></i><b>4.7</b> Climate variables in relation to elevation</a><ul>
<li class="chapter" data-level="4.7.1" data-path="preparing-environmental-predictors.html"><a href="preparing-environmental-predictors.html#load-resampled-environmental-rasters"><i class="fa fa-check"></i><b>4.7.1</b> Load resampled environmental rasters</a></li>
</ul></li>
<li class="chapter" data-level="4.8" data-path="preparing-environmental-predictors.html"><a href="preparing-environmental-predictors.html#climate-across-land-cover-types"><i class="fa fa-check"></i><b>4.8</b> Climate across land cover types</a></li>
<li class="chapter" data-level="4.9" data-path="preparing-environmental-predictors.html"><a href="preparing-environmental-predictors.html#land-cover-type-in-relation-to-elevation"><i class="fa fa-check"></i><b>4.9</b> Land cover type in relation to elevation</a></li>
<li class="chapter" data-level="4.10" data-path="preparing-environmental-predictors.html"><a href="preparing-environmental-predictors.html#main-text-figure-2"><i class="fa fa-check"></i><b>4.10</b> Main Text Figure 2</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="preparing-checklist-calibration-index.html"><a href="preparing-checklist-calibration-index.html"><i class="fa fa-check"></i><b>5</b> Preparing Checklist Calibration Index</a><ul>
<li class="chapter" data-level="5.1" data-path="preparing-checklist-calibration-index.html"><a href="preparing-checklist-calibration-index.html#prepare-libraries-2"><i class="fa fa-check"></i><b>5.1</b> Prepare libraries</a></li>
<li class="chapter" data-level="5.2" data-path="preparing-checklist-calibration-index.html"><a href="preparing-checklist-calibration-index.html#prepare-data"><i class="fa fa-check"></i><b>5.2</b> Prepare data</a></li>
<li class="chapter" data-level="5.3" data-path="preparing-checklist-calibration-index.html"><a href="preparing-checklist-calibration-index.html#spatially-explicit-filter-on-checklists"><i class="fa fa-check"></i><b>5.3</b> Spatially explicit filter on checklists</a></li>
<li class="chapter" data-level="5.4" data-path="preparing-checklist-calibration-index.html"><a href="preparing-checklist-calibration-index.html#prepare-species-of-interest"><i class="fa fa-check"></i><b>5.4</b> Prepare species of interest</a></li>
<li class="chapter" data-level="5.5" data-path="preparing-checklist-calibration-index.html"><a href="preparing-checklist-calibration-index.html#prepare-checklists-for-observer-score"><i class="fa fa-check"></i><b>5.5</b> Prepare checklists for observer score</a></li>
<li class="chapter" data-level="5.6" data-path="preparing-checklist-calibration-index.html"><a href="preparing-checklist-calibration-index.html#get-landcover"><i class="fa fa-check"></i><b>5.6</b> Get landcover</a></li>
<li class="chapter" data-level="5.7" data-path="preparing-checklist-calibration-index.html"><a href="preparing-checklist-calibration-index.html#filter-checklist-data"><i class="fa fa-check"></i><b>5.7</b> Filter checklist data</a></li>
<li class="chapter" data-level="5.8" data-path="preparing-checklist-calibration-index.html"><a href="preparing-checklist-calibration-index.html#model-observer-expertise"><i class="fa fa-check"></i><b>5.8</b> Model observer expertise</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="examining-spatial-sampling-bias.html"><a href="examining-spatial-sampling-bias.html"><i class="fa fa-check"></i><b>6</b> Examining Spatial Sampling Bias</a><ul>
<li class="chapter" data-level="6.1" data-path="examining-spatial-sampling-bias.html"><a href="examining-spatial-sampling-bias.html#prepare-libraries-3"><i class="fa fa-check"></i><b>6.1</b> Prepare libraries</a></li>
<li class="chapter" data-level="6.2" data-path="examining-spatial-sampling-bias.html"><a href="examining-spatial-sampling-bias.html#read-checklist-data"><i class="fa fa-check"></i><b>6.2</b> Read checklist data</a><ul>
<li class="chapter" data-level="6.2.1" data-path="examining-spatial-sampling-bias.html"><a href="examining-spatial-sampling-bias.html#spatially-explicit-filter-on-checklists-1"><i class="fa fa-check"></i><b>6.2.1</b> Spatially explicit filter on checklists</a></li>
<li class="chapter" data-level="6.2.2" data-path="examining-spatial-sampling-bias.html"><a href="examining-spatial-sampling-bias.html#get-background-land-for-plotting"><i class="fa fa-check"></i><b>6.2.2</b> Get background land for plotting</a></li>
</ul></li>
<li class="chapter" data-level="6.3" data-path="examining-spatial-sampling-bias.html"><a href="examining-spatial-sampling-bias.html#prepare-main-text-figure-3"><i class="fa fa-check"></i><b>6.3</b> Prepare Main Text Figure 3</a><ul>
<li class="chapter" data-level="6.3.1" data-path="examining-spatial-sampling-bias.html"><a href="examining-spatial-sampling-bias.html#prepare-histogram-of-distance-to-roads"><i class="fa fa-check"></i><b>6.3.1</b> Prepare histogram of distance to roads</a></li>
<li class="chapter" data-level="6.3.2" data-path="examining-spatial-sampling-bias.html"><a href="examining-spatial-sampling-bias.html#table-distance-to-roads"><i class="fa fa-check"></i><b>6.3.2</b> Table: Distance to roads</a></li>
<li class="chapter" data-level="6.3.3" data-path="examining-spatial-sampling-bias.html"><a href="examining-spatial-sampling-bias.html#distance-to-nearest-neighbouring-site"><i class="fa fa-check"></i><b>6.3.3</b> Distance to nearest neighbouring site</a></li>
<li class="chapter" data-level="6.3.4" data-path="examining-spatial-sampling-bias.html"><a href="examining-spatial-sampling-bias.html#spatial-distribution-of-distances-to-neighbours"><i class="fa fa-check"></i><b>6.3.4</b> Spatial distribution of distances to neighbours</a></li>
</ul></li>
<li class="chapter" data-level="6.4" data-path="examining-spatial-sampling-bias.html"><a href="examining-spatial-sampling-bias.html#figure-spatial-sampling-bias"><i class="fa fa-check"></i><b>6.4</b> Figure: Spatial sampling bias</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="checking-temporal-sampling-frequency.html"><a href="checking-temporal-sampling-frequency.html"><i class="fa fa-check"></i><b>7</b> Checking Temporal Sampling Frequency</a><ul>
<li class="chapter" data-level="7.1" data-path="checking-temporal-sampling-frequency.html"><a href="checking-temporal-sampling-frequency.html#load-libraries"><i class="fa fa-check"></i><b>7.1</b> Load libraries</a></li>
<li class="chapter" data-level="7.2" data-path="checking-temporal-sampling-frequency.html"><a href="checking-temporal-sampling-frequency.html#load-checklist-data"><i class="fa fa-check"></i><b>7.2</b> Load checklist data</a></li>
<li class="chapter" data-level="7.3" data-path="checking-temporal-sampling-frequency.html"><a href="checking-temporal-sampling-frequency.html#get-time-differences-per-grid-cell"><i class="fa fa-check"></i><b>7.3</b> Get time differences per grid cell</a></li>
<li class="chapter" data-level="7.4" data-path="checking-temporal-sampling-frequency.html"><a href="checking-temporal-sampling-frequency.html#time-since-previous-checklist"><i class="fa fa-check"></i><b>7.4</b> Time Since Previous Checklist</a><ul>
<li class="chapter" data-level="7.4.1" data-path="checking-temporal-sampling-frequency.html"><a href="checking-temporal-sampling-frequency.html#get-aux-data"><i class="fa fa-check"></i><b>7.4.1</b> Get aux data</a></li>
<li class="chapter" data-level="7.4.2" data-path="checking-temporal-sampling-frequency.html"><a href="checking-temporal-sampling-frequency.html#histogram-of-lags"><i class="fa fa-check"></i><b>7.4.2</b> Histogram of lags</a></li>
</ul></li>
<li class="chapter" data-level="7.5" data-path="checking-temporal-sampling-frequency.html"><a href="checking-temporal-sampling-frequency.html#main-text-figure-3"><i class="fa fa-check"></i><b>7.5</b> Main Text Figure 3</a></li>
<li class="chapter" data-level="7.6" data-path="checking-temporal-sampling-frequency.html"><a href="checking-temporal-sampling-frequency.html#checklists-per-month"><i class="fa fa-check"></i><b>7.6</b> Checklists per Month</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="adding-covariates-to-checklist-data.html"><a href="adding-covariates-to-checklist-data.html"><i class="fa fa-check"></i><b>8</b> Adding Covariates to Checklist Data</a><ul>
<li class="chapter" data-level="8.1" data-path="adding-covariates-to-checklist-data.html"><a href="adding-covariates-to-checklist-data.html#prepare-libraries-and-data"><i class="fa fa-check"></i><b>8.1</b> Prepare libraries and data</a></li>
<li class="chapter" data-level="8.2" data-path="adding-covariates-to-checklist-data.html"><a href="adding-covariates-to-checklist-data.html#spatial-subsampling"><i class="fa fa-check"></i><b>8.2</b> Spatial subsampling</a><ul>
<li class="chapter" data-level="8.2.1" data-path="adding-covariates-to-checklist-data.html"><a href="adding-covariates-to-checklist-data.html#counting-presence-observation-proportion"><i class="fa fa-check"></i><b>8.2.1</b> Counting presence observation proportion</a></li>
<li class="chapter" data-level="8.2.2" data-path="adding-covariates-to-checklist-data.html"><a href="adding-covariates-to-checklist-data.html#count-absences-after-spatial-thinning"><i class="fa fa-check"></i><b>8.2.2</b> Count absences after spatial thinning</a></li>
</ul></li>
<li class="chapter" data-level="8.3" data-path="adding-covariates-to-checklist-data.html"><a href="adding-covariates-to-checklist-data.html#temporal-subsampling"><i class="fa fa-check"></i><b>8.3</b> Temporal subsampling</a><ul>
<li class="chapter" data-level="8.3.1" data-path="adding-covariates-to-checklist-data.html"><a href="adding-covariates-to-checklist-data.html#count-absences-after-temporal-thinning"><i class="fa fa-check"></i><b>8.3.1</b> Count absences after temporal thinning</a></li>
</ul></li>
<li class="chapter" data-level="8.4" data-path="adding-covariates-to-checklist-data.html"><a href="adding-covariates-to-checklist-data.html#add-checklist-calibration-index"><i class="fa fa-check"></i><b>8.4</b> Add checklist calibration index</a></li>
<li class="chapter" data-level="8.5" data-path="adding-covariates-to-checklist-data.html"><a href="adding-covariates-to-checklist-data.html#add-climatic-and-landscape-covariates"><i class="fa fa-check"></i><b>8.5</b> Add climatic and landscape covariates</a></li>
<li class="chapter" data-level="8.6" data-path="adding-covariates-to-checklist-data.html"><a href="adding-covariates-to-checklist-data.html#spatial-buffers-around-selected-checklists"><i class="fa fa-check"></i><b>8.6</b> Spatial buffers around selected checklists</a></li>
<li class="chapter" data-level="8.7" data-path="adding-covariates-to-checklist-data.html"><a href="adding-covariates-to-checklist-data.html#spatial-buffer-wide-covariates"><i class="fa fa-check"></i><b>8.7</b> Spatial buffer-wide covariates</a><ul>
<li class="chapter" data-level="8.7.1" data-path="adding-covariates-to-checklist-data.html"><a href="adding-covariates-to-checklist-data.html#mean-climatic-covariates"><i class="fa fa-check"></i><b>8.7.1</b> Mean climatic covariates</a></li>
<li class="chapter" data-level="8.7.2" data-path="adding-covariates-to-checklist-data.html"><a href="adding-covariates-to-checklist-data.html#proportions-of-land-cover-type"><i class="fa fa-check"></i><b>8.7.2</b> Proportions of land cover type</a></li>
<li class="chapter" data-level="8.7.3" data-path="adding-covariates-to-checklist-data.html"><a href="adding-covariates-to-checklist-data.html#link-environmental-covariates-to-checklists"><i class="fa fa-check"></i><b>8.7.3</b> Link environmental covariates to checklists</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="9" data-path="modelling-species-occupancy.html"><a href="modelling-species-occupancy.html"><i class="fa fa-check"></i><b>9</b> Modelling Species Occupancy</a><ul>
<li class="chapter" data-level="9.0.1" data-path="modelling-species-occupancy.html"><a href="modelling-species-occupancy.html#load-necessary-libraries"><i class="fa fa-check"></i><b>9.0.1</b> Load necessary libraries</a></li>
<li class="chapter" data-level="9.1" data-path="modelling-species-occupancy.html"><a href="modelling-species-occupancy.html#load-dataframe-and-prepare-covariates"><i class="fa fa-check"></i><b>9.1</b> Load dataframe and prepare covariates</a><ul>
<li class="chapter" data-level="9.1.1" data-path="modelling-species-occupancy.html"><a href="modelling-species-occupancy.html#handle-the-sampling-protocol"><i class="fa fa-check"></i><b>9.1.1</b> Handle the sampling protocol</a></li>
<li class="chapter" data-level="9.1.2" data-path="modelling-species-occupancy.html"><a href="modelling-species-occupancy.html#handle-time-and-date"><i class="fa fa-check"></i><b>9.1.2</b> Handle time and date</a></li>
<li class="chapter" data-level="9.1.3" data-path="modelling-species-occupancy.html"><a href="modelling-species-occupancy.html#scaling-covariates"><i class="fa fa-check"></i><b>9.1.3</b> Scaling covariates</a></li>
<li class="chapter" data-level="9.1.4" data-path="modelling-species-occupancy.html"><a href="modelling-species-occupancy.html#correct-date-format"><i class="fa fa-check"></i><b>9.1.4</b> Correct date format</a></li>
<li class="chapter" data-level="9.1.5" data-path="modelling-species-occupancy.html"><a href="modelling-species-occupancy.html#check-for-correlated-covariates"><i class="fa fa-check"></i><b>9.1.5</b> Check for correlated covariates</a></li>
</ul></li>
<li class="chapter" data-level="9.2" data-path="modelling-species-occupancy.html"><a href="modelling-species-occupancy.html#running-a-null-model"><i class="fa fa-check"></i><b>9.2</b> Running a null model</a></li>
<li class="chapter" data-level="9.3" data-path="modelling-species-occupancy.html"><a href="modelling-species-occupancy.html#identifying-covariates-necessary-to-model-the-detection-process"><i class="fa fa-check"></i><b>9.3</b> Identifying covariates necessary to model the detection process</a></li>
<li class="chapter" data-level="9.4" data-path="modelling-species-occupancy.html"><a href="modelling-species-occupancy.html#land-cover-and-climate"><i class="fa fa-check"></i><b>9.4</b> Land Cover and Climate</a></li>
<li class="chapter" data-level="9.5" data-path="modelling-species-occupancy.html"><a href="modelling-species-occupancy.html#goodness-of-fit-tests"><i class="fa fa-check"></i><b>9.5</b> Goodness-of-fit tests</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="visualizing-occupancy-predictor-effects.html"><a href="visualizing-occupancy-predictor-effects.html"><i class="fa fa-check"></i><b>10</b> Visualizing Occupancy Predictor Effects</a><ul>
<li class="chapter" data-level="10.1" data-path="visualizing-occupancy-predictor-effects.html"><a href="visualizing-occupancy-predictor-effects.html#prepare-libraries-4"><i class="fa fa-check"></i><b>10.1</b> Prepare libraries</a></li>
<li class="chapter" data-level="10.2" data-path="visualizing-occupancy-predictor-effects.html"><a href="visualizing-occupancy-predictor-effects.html#load-species-list"><i class="fa fa-check"></i><b>10.2</b> Load species list</a></li>
<li class="chapter" data-level="10.3" data-path="visualizing-occupancy-predictor-effects.html"><a href="visualizing-occupancy-predictor-effects.html#show-aic-weight-importance"><i class="fa fa-check"></i><b>10.3</b> Show AIC weight importance</a><ul>
<li class="chapter" data-level="10.3.1" data-path="visualizing-occupancy-predictor-effects.html"><a href="visualizing-occupancy-predictor-effects.html#read-in-aic-weight-data"><i class="fa fa-check"></i><b>10.3.1</b> Read in AIC weight data</a></li>
<li class="chapter" data-level="10.3.2" data-path="visualizing-occupancy-predictor-effects.html"><a href="visualizing-occupancy-predictor-effects.html#prepare-cumulative-aic-weight-data"><i class="fa fa-check"></i><b>10.3.2</b> Prepare cumulative AIC weight data</a></li>
</ul></li>
<li class="chapter" data-level="10.4" data-path="visualizing-occupancy-predictor-effects.html"><a href="visualizing-occupancy-predictor-effects.html#prepare-model-coefficient-data"><i class="fa fa-check"></i><b>10.4</b> Prepare model coefficient data</a></li>
<li class="chapter" data-level="10.5" data-path="visualizing-occupancy-predictor-effects.html"><a href="visualizing-occupancy-predictor-effects.html#get-predictor-effects"><i class="fa fa-check"></i><b>10.5</b> Get predictor effects</a></li>
</ul></li>
<li class="chapter" data-level="11" data-path="predicting-species-specific-occupancy-as-a-function-of-significant-predictors.html"><a href="predicting-species-specific-occupancy-as-a-function-of-significant-predictors.html"><i class="fa fa-check"></i><b>11</b> Predicting species-specific occupancy as a function of significant predictors</a><ul>
<li class="chapter" data-level="11.1" data-path="predicting-species-specific-occupancy-as-a-function-of-significant-predictors.html"><a href="predicting-species-specific-occupancy-as-a-function-of-significant-predictors.html#prepare-libraries-5"><i class="fa fa-check"></i><b>11.1</b> Prepare libraries</a></li>
<li class="chapter" data-level="11.2" data-path="predicting-species-specific-occupancy-as-a-function-of-significant-predictors.html"><a href="predicting-species-specific-occupancy-as-a-function-of-significant-predictors.html#read-data"><i class="fa fa-check"></i><b>11.2</b> Read data</a></li>
<li class="chapter" data-level="11.3" data-path="predicting-species-specific-occupancy-as-a-function-of-significant-predictors.html"><a href="predicting-species-specific-occupancy-as-a-function-of-significant-predictors.html#prepare-predictor-data"><i class="fa fa-check"></i><b>11.3</b> Prepare predictor data</a></li>
<li class="chapter" data-level="11.4" data-path="predicting-species-specific-occupancy-as-a-function-of-significant-predictors.html"><a href="predicting-species-specific-occupancy-as-a-function-of-significant-predictors.html#get-predictor-responses"><i class="fa fa-check"></i><b>11.4</b> Get predictor responses</a></li>
<li class="chapter" data-level="11.5" data-path="predicting-species-specific-occupancy-as-a-function-of-significant-predictors.html"><a href="predicting-species-specific-occupancy-as-a-function-of-significant-predictors.html#get-probability-of-occupancy"><i class="fa fa-check"></i><b>11.5</b> Get probability of occupancy</a></li>
<li class="chapter" data-level="11.6" data-path="predicting-species-specific-occupancy-as-a-function-of-significant-predictors.html"><a href="predicting-species-specific-occupancy-as-a-function-of-significant-predictors.html#add-scaling-for-predictors"><i class="fa fa-check"></i><b>11.6</b> Add scaling for predictors</a><ul>
<li class="chapter" data-level="11.6.1" data-path="predicting-species-specific-occupancy-as-a-function-of-significant-predictors.html"><a href="predicting-species-specific-occupancy-as-a-function-of-significant-predictors.html#figure-occupancy-predictors"><i class="fa fa-check"></i><b>11.6.1</b> Figure: Occupancy ~ predictors</a></li>
<li class="chapter" data-level="11.6.2" data-path="predicting-species-specific-occupancy-as-a-function-of-significant-predictors.html"><a href="predicting-species-specific-occupancy-as-a-function-of-significant-predictors.html#figures-occupancy-predictors-for-all-species"><i class="fa fa-check"></i><b>11.6.2</b> Figures: Occupancy ~ predictors for all species</a></li>
</ul></li>
<li class="chapter" data-level="11.7" data-path="predicting-species-specific-occupancy-as-a-function-of-significant-predictors.html"><a href="predicting-species-specific-occupancy-as-a-function-of-significant-predictors.html#mapping-species-occupancy"><i class="fa fa-check"></i><b>11.7</b> Mapping species occupancy</a><ul>
<li class="chapter" data-level="11.7.1" data-path="predicting-species-specific-occupancy-as-a-function-of-significant-predictors.html"><a href="predicting-species-specific-occupancy-as-a-function-of-significant-predictors.html#read-in-raster-layers"><i class="fa fa-check"></i><b>11.7.1</b> Read in raster layers</a></li>
<li class="chapter" data-level="11.7.2" data-path="predicting-species-specific-occupancy-as-a-function-of-significant-predictors.html"><a href="predicting-species-specific-occupancy-as-a-function-of-significant-predictors.html#split-landcover-into-proportions-per-1km"><i class="fa fa-check"></i><b>11.7.2</b> Split landcover into proportions per 1km</a></li>
<li class="chapter" data-level="11.7.3" data-path="predicting-species-specific-occupancy-as-a-function-of-significant-predictors.html"><a href="predicting-species-specific-occupancy-as-a-function-of-significant-predictors.html#prepare-climatic-layers"><i class="fa fa-check"></i><b>11.7.3</b> Prepare climatic layers</a></li>
<li class="chapter" data-level="11.7.4" data-path="predicting-species-specific-occupancy-as-a-function-of-significant-predictors.html"><a href="predicting-species-specific-occupancy-as-a-function-of-significant-predictors.html#mask-by-study-area"><i class="fa fa-check"></i><b>11.7.4</b> Mask by study area</a></li>
<li class="chapter" data-level="11.7.5" data-path="predicting-species-specific-occupancy-as-a-function-of-significant-predictors.html"><a href="predicting-species-specific-occupancy-as-a-function-of-significant-predictors.html#plot-full-bounds-of-landscape-variables"><i class="fa fa-check"></i><b>11.7.5</b> Plot full bounds of landscape variables</a></li>
<li class="chapter" data-level="11.7.6" data-path="predicting-species-specific-occupancy-as-a-function-of-significant-predictors.html"><a href="predicting-species-specific-occupancy-as-a-function-of-significant-predictors.html#prepare-soi-predictors"><i class="fa fa-check"></i><b>11.7.6</b> Prepare soi predictors</a></li>
<li class="chapter" data-level="11.7.7" data-path="predicting-species-specific-occupancy-as-a-function-of-significant-predictors.html"><a href="predicting-species-specific-occupancy-as-a-function-of-significant-predictors.html#prepare-species-occupancy-for-soi"><i class="fa fa-check"></i><b>11.7.7</b> Prepare species occupancy for SOI</a></li>
<li class="chapter" data-level="11.7.8" data-path="predicting-species-specific-occupancy-as-a-function-of-significant-predictors.html"><a href="predicting-species-specific-occupancy-as-a-function-of-significant-predictors.html#prepare-species-occupancy-for-all-species"><i class="fa fa-check"></i><b>11.7.8</b> Prepare species occupancy for all species</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="12" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i><b>12</b> References</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Source code and supplementary material for <em>Using citizen science to parse climatic and landcover influences on bird occupancy within a tropical biodiversity hotspot</em></a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="checking-temporal-sampling-frequency" class="section level1">
<h1><span class="header-section-number">Section 7</span> Checking Temporal Sampling Frequency</h1>
<p>How often are checklists recorded in each grid cell?</p>
<div id="load-libraries" class="section level2">
<h2><span class="header-section-number">7.1</span> Load libraries</h2>
<div class="sourceCode" id="cb61"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb61-1"><a href="checking-temporal-sampling-frequency.html#cb61-1"></a><span class="co"># load libraries</span></span>
<span id="cb61-2"><a href="checking-temporal-sampling-frequency.html#cb61-2"></a><span class="kw">library</span>(tidyverse)</span>
<span id="cb61-3"><a href="checking-temporal-sampling-frequency.html#cb61-3"></a><span class="kw">library</span>(sf)</span>
<span id="cb61-4"><a href="checking-temporal-sampling-frequency.html#cb61-4"></a></span>
<span id="cb61-5"><a href="checking-temporal-sampling-frequency.html#cb61-5"></a><span class="co"># for plotting</span></span>
<span id="cb61-6"><a href="checking-temporal-sampling-frequency.html#cb61-6"></a><span class="kw">library</span>(ggplot2)</span>
<span id="cb61-7"><a href="checking-temporal-sampling-frequency.html#cb61-7"></a><span class="kw">library</span>(colorspace)</span>
<span id="cb61-8"><a href="checking-temporal-sampling-frequency.html#cb61-8"></a><span class="kw">library</span>(scico)</span>
<span id="cb61-9"><a href="checking-temporal-sampling-frequency.html#cb61-9"></a><span class="kw">library</span>(ggthemes)</span>
<span id="cb61-10"><a href="checking-temporal-sampling-frequency.html#cb61-10"></a><span class="kw">library</span>(ggspatial)</span>
<span id="cb61-11"><a href="checking-temporal-sampling-frequency.html#cb61-11"></a><span class="kw">library</span>(patchwork)</span></code></pre></div>
</div>
<div id="load-checklist-data" class="section level2">
<h2><span class="header-section-number">7.2</span> Load checklist data</h2>
<p>Here we load filtered checklist data and convert to UTM 43N coordinates.</p>
<div class="sourceCode" id="cb62"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb62-1"><a href="checking-temporal-sampling-frequency.html#cb62-1"></a><span class="co"># load checklist data</span></span>
<span id="cb62-2"><a href="checking-temporal-sampling-frequency.html#cb62-2"></a><span class="kw">load</span>(<span class="st">&quot;results/02_data_prelim_processing.rdata&quot;</span>)</span>
<span id="cb62-3"><a href="checking-temporal-sampling-frequency.html#cb62-3"></a></span>
<span id="cb62-4"><a href="checking-temporal-sampling-frequency.html#cb62-4"></a><span class="co"># get checklists</span></span>
<span id="cb62-5"><a href="checking-temporal-sampling-frequency.html#cb62-5"></a>data &lt;-<span class="st"> </span><span class="kw">distinct</span>(</span>
<span id="cb62-6"><a href="checking-temporal-sampling-frequency.html#cb62-6"></a>  dataGrouped, sampling_event_identifier, observation_date,</span>
<span id="cb62-7"><a href="checking-temporal-sampling-frequency.html#cb62-7"></a>  longitude, latitude</span>
<span id="cb62-8"><a href="checking-temporal-sampling-frequency.html#cb62-8"></a>)</span>
<span id="cb62-9"><a href="checking-temporal-sampling-frequency.html#cb62-9"></a></span>
<span id="cb62-10"><a href="checking-temporal-sampling-frequency.html#cb62-10"></a><span class="co"># remove old data</span></span>
<span id="cb62-11"><a href="checking-temporal-sampling-frequency.html#cb62-11"></a><span class="kw">rm</span>(dataGrouped)</span>
<span id="cb62-12"><a href="checking-temporal-sampling-frequency.html#cb62-12"></a></span>
<span id="cb62-13"><a href="checking-temporal-sampling-frequency.html#cb62-13"></a><span class="co"># transform to UTM 43N</span></span>
<span id="cb62-14"><a href="checking-temporal-sampling-frequency.html#cb62-14"></a>data &lt;-<span class="st"> </span><span class="kw">st_as_sf</span>(data, <span class="dt">coords =</span> <span class="kw">c</span>(<span class="st">&quot;longitude&quot;</span>, <span class="st">&quot;latitude&quot;</span>), <span class="dt">crs =</span> <span class="dv">4326</span>)</span>
<span id="cb62-15"><a href="checking-temporal-sampling-frequency.html#cb62-15"></a>data &lt;-<span class="st"> </span><span class="kw">st_transform</span>(data, <span class="dt">crs =</span> <span class="dv">32643</span>)</span>
<span id="cb62-16"><a href="checking-temporal-sampling-frequency.html#cb62-16"></a></span>
<span id="cb62-17"><a href="checking-temporal-sampling-frequency.html#cb62-17"></a><span class="co"># get coordinates and bind to data</span></span>
<span id="cb62-18"><a href="checking-temporal-sampling-frequency.html#cb62-18"></a>data &lt;-<span class="st"> </span><span class="kw">cbind</span>(</span>
<span id="cb62-19"><a href="checking-temporal-sampling-frequency.html#cb62-19"></a>  <span class="kw">st_drop_geometry</span>(data),</span>
<span id="cb62-20"><a href="checking-temporal-sampling-frequency.html#cb62-20"></a>  <span class="kw">st_coordinates</span>(data)</span>
<span id="cb62-21"><a href="checking-temporal-sampling-frequency.html#cb62-21"></a>)</span>
<span id="cb62-22"><a href="checking-temporal-sampling-frequency.html#cb62-22"></a></span>
<span id="cb62-23"><a href="checking-temporal-sampling-frequency.html#cb62-23"></a><span class="co"># bin to 1000m</span></span>
<span id="cb62-24"><a href="checking-temporal-sampling-frequency.html#cb62-24"></a>data &lt;-<span class="st"> </span><span class="kw">mutate</span>(data,</span>
<span id="cb62-25"><a href="checking-temporal-sampling-frequency.html#cb62-25"></a>  <span class="dt">X =</span> plyr<span class="op">::</span><span class="kw">round_any</span>(X, <span class="dv">2500</span>),</span>
<span id="cb62-26"><a href="checking-temporal-sampling-frequency.html#cb62-26"></a>  <span class="dt">Y =</span> plyr<span class="op">::</span><span class="kw">round_any</span>(Y, <span class="dv">2500</span>)</span>
<span id="cb62-27"><a href="checking-temporal-sampling-frequency.html#cb62-27"></a>)</span></code></pre></div>
</div>
<div id="get-time-differences-per-grid-cell" class="section level2">
<h2><span class="header-section-number">7.3</span> Get time differences per grid cell</h2>
<div class="sourceCode" id="cb63"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb63-1"><a href="checking-temporal-sampling-frequency.html#cb63-1"></a><span class="co"># get time differences in days</span></span>
<span id="cb63-2"><a href="checking-temporal-sampling-frequency.html#cb63-2"></a>data &lt;-<span class="st"> </span><span class="kw">mutate</span>(data, <span class="dt">observation_date =</span> <span class="kw">as.POSIXct</span>(observation_date))</span>
<span id="cb63-3"><a href="checking-temporal-sampling-frequency.html#cb63-3"></a>data &lt;-<span class="st"> </span><span class="kw">nest</span>(data, <span class="dt">data =</span> <span class="kw">c</span>(<span class="st">&quot;sampling_event_identifier&quot;</span>, <span class="st">&quot;observation_date&quot;</span>))</span>
<span id="cb63-4"><a href="checking-temporal-sampling-frequency.html#cb63-4"></a></span>
<span id="cb63-5"><a href="checking-temporal-sampling-frequency.html#cb63-5"></a><span class="co"># map over data</span></span>
<span id="cb63-6"><a href="checking-temporal-sampling-frequency.html#cb63-6"></a>data &lt;-<span class="st"> </span><span class="kw">mutate</span>(data,</span>
<span id="cb63-7"><a href="checking-temporal-sampling-frequency.html#cb63-7"></a>  <span class="dt">lag_metrics =</span> <span class="kw">lapply</span>(data, <span class="cf">function</span>(df) {</span>
<span id="cb63-8"><a href="checking-temporal-sampling-frequency.html#cb63-8"></a>    df &lt;-<span class="st"> </span><span class="kw">arrange</span>(df, observation_date)</span>
<span id="cb63-9"><a href="checking-temporal-sampling-frequency.html#cb63-9"></a></span>
<span id="cb63-10"><a href="checking-temporal-sampling-frequency.html#cb63-10"></a>    lag &lt;-<span class="st"> </span><span class="kw">as.numeric</span>(<span class="kw">diff</span>(df<span class="op">$</span>observation_date, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>) <span class="op">/</span><span class="st"> </span>(<span class="dv">24</span> <span class="op">*</span><span class="st"> </span><span class="dv">3600</span>))</span>
<span id="cb63-11"><a href="checking-temporal-sampling-frequency.html#cb63-11"></a></span>
<span id="cb63-12"><a href="checking-temporal-sampling-frequency.html#cb63-12"></a>    data &lt;-<span class="st"> </span><span class="kw">tibble</span>(</span>
<span id="cb63-13"><a href="checking-temporal-sampling-frequency.html#cb63-13"></a>      <span class="dt">mean_lag =</span> <span class="kw">mean</span>(lag, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>),</span>
<span id="cb63-14"><a href="checking-temporal-sampling-frequency.html#cb63-14"></a>      <span class="dt">median_lag =</span> <span class="kw">median</span>(lag, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>),</span>
<span id="cb63-15"><a href="checking-temporal-sampling-frequency.html#cb63-15"></a>      <span class="dt">sd_lag =</span> <span class="kw">sd</span>(lag, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>),</span>
<span id="cb63-16"><a href="checking-temporal-sampling-frequency.html#cb63-16"></a>      <span class="dt">n_chk =</span> <span class="kw">nrow</span>(df)</span>
<span id="cb63-17"><a href="checking-temporal-sampling-frequency.html#cb63-17"></a>    )</span>
<span id="cb63-18"><a href="checking-temporal-sampling-frequency.html#cb63-18"></a></span>
<span id="cb63-19"><a href="checking-temporal-sampling-frequency.html#cb63-19"></a>    data</span>
<span id="cb63-20"><a href="checking-temporal-sampling-frequency.html#cb63-20"></a>  })</span>
<span id="cb63-21"><a href="checking-temporal-sampling-frequency.html#cb63-21"></a>)</span></code></pre></div>
<div class="sourceCode" id="cb64"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb64-1"><a href="checking-temporal-sampling-frequency.html#cb64-1"></a><span class="co"># unnest lag metrics</span></span>
<span id="cb64-2"><a href="checking-temporal-sampling-frequency.html#cb64-2"></a>data_lag &lt;-<span class="st"> </span><span class="kw">select</span>(data, <span class="op">-</span>data)</span>
<span id="cb64-3"><a href="checking-temporal-sampling-frequency.html#cb64-3"></a>data_lag &lt;-<span class="st"> </span><span class="kw">unnest</span>(data_lag, <span class="dt">cols =</span> <span class="st">&quot;lag_metrics&quot;</span>)</span>
<span id="cb64-4"><a href="checking-temporal-sampling-frequency.html#cb64-4"></a></span>
<span id="cb64-5"><a href="checking-temporal-sampling-frequency.html#cb64-5"></a><span class="co"># set the mean and median to infinity if nchk is 1</span></span>
<span id="cb64-6"><a href="checking-temporal-sampling-frequency.html#cb64-6"></a>data_lag &lt;-<span class="st"> </span><span class="kw">mutate</span>(data_lag,</span>
<span id="cb64-7"><a href="checking-temporal-sampling-frequency.html#cb64-7"></a>  <span class="dt">mean_lag =</span> <span class="kw">ifelse</span>(n_chk <span class="op">==</span><span class="st"> </span><span class="dv">1</span>, <span class="ot">Inf</span>, mean_lag),</span>
<span id="cb64-8"><a href="checking-temporal-sampling-frequency.html#cb64-8"></a>  <span class="dt">median_lag =</span> <span class="kw">ifelse</span>(n_chk <span class="op">==</span><span class="st"> </span><span class="dv">1</span>, <span class="ot">Inf</span>, median_lag),</span>
<span id="cb64-9"><a href="checking-temporal-sampling-frequency.html#cb64-9"></a>  <span class="dt">sd_lag =</span> <span class="kw">ifelse</span>(n_chk <span class="op">==</span><span class="st"> </span><span class="dv">1</span>, <span class="ot">Inf</span>, sd_lag)</span>
<span id="cb64-10"><a href="checking-temporal-sampling-frequency.html#cb64-10"></a>)</span>
<span id="cb64-11"><a href="checking-temporal-sampling-frequency.html#cb64-11"></a></span>
<span id="cb64-12"><a href="checking-temporal-sampling-frequency.html#cb64-12"></a><span class="co"># set all 0 to 1</span></span>
<span id="cb64-13"><a href="checking-temporal-sampling-frequency.html#cb64-13"></a>data_lag &lt;-<span class="st"> </span><span class="kw">mutate</span>(data_lag,</span>
<span id="cb64-14"><a href="checking-temporal-sampling-frequency.html#cb64-14"></a>  <span class="dt">mean_lag =</span> mean_lag <span class="op">+</span><span class="st"> </span><span class="dv">1</span>,</span>
<span id="cb64-15"><a href="checking-temporal-sampling-frequency.html#cb64-15"></a>  <span class="dt">median_lag =</span> median_lag <span class="op">+</span><span class="st"> </span><span class="dv">1</span></span>
<span id="cb64-16"><a href="checking-temporal-sampling-frequency.html#cb64-16"></a>)</span>
<span id="cb64-17"><a href="checking-temporal-sampling-frequency.html#cb64-17"></a><span class="co"># melt data by tile</span></span>
<span id="cb64-18"><a href="checking-temporal-sampling-frequency.html#cb64-18"></a><span class="co"># data_lag = pivot_longer(data_lag, cols = c(&quot;mean_lag&quot;, &quot;median_lag&quot;, &quot;sd_lag&quot;))</span></span></code></pre></div>
</div>
<div id="time-since-previous-checklist" class="section level2">
<h2><span class="header-section-number">7.4</span> Time Since Previous Checklist</h2>
<div id="get-aux-data" class="section level3">
<h3><span class="header-section-number">7.4.1</span> Get aux data</h3>
<div class="sourceCode" id="cb65"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb65-1"><a href="checking-temporal-sampling-frequency.html#cb65-1"></a><span class="co"># hills data</span></span>
<span id="cb65-2"><a href="checking-temporal-sampling-frequency.html#cb65-2"></a>wg &lt;-<span class="st"> </span><span class="kw">st_read</span>(<span class="st">&quot;data/spatial/hillsShapefile/Nil_Ana_Pal.shp&quot;</span>) <span class="op">%&gt;%</span></span>
<span id="cb65-3"><a href="checking-temporal-sampling-frequency.html#cb65-3"></a><span class="st">  </span><span class="kw">st_transform</span>(<span class="dv">32643</span>)</span>
<span id="cb65-4"><a href="checking-temporal-sampling-frequency.html#cb65-4"></a></span>
<span id="cb65-5"><a href="checking-temporal-sampling-frequency.html#cb65-5"></a>roads &lt;-<span class="st"> </span><span class="kw">st_read</span>(<span class="st">&quot;data/spatial/roads_studysite_2019/roads_studysite_2019.shp&quot;</span>) <span class="op">%&gt;%</span></span>
<span id="cb65-6"><a href="checking-temporal-sampling-frequency.html#cb65-6"></a><span class="st">  </span><span class="kw">st_transform</span>(<span class="dv">32643</span>)</span>
<span id="cb65-7"><a href="checking-temporal-sampling-frequency.html#cb65-7"></a></span>
<span id="cb65-8"><a href="checking-temporal-sampling-frequency.html#cb65-8"></a><span class="co"># add land</span></span>
<span id="cb65-9"><a href="checking-temporal-sampling-frequency.html#cb65-9"></a><span class="kw">library</span>(rnaturalearth)</span>
<span id="cb65-10"><a href="checking-temporal-sampling-frequency.html#cb65-10"></a>land &lt;-<span class="st"> </span><span class="kw">ne_countries</span>(</span>
<span id="cb65-11"><a href="checking-temporal-sampling-frequency.html#cb65-11"></a>  <span class="dt">scale =</span> <span class="dv">50</span>, <span class="dt">type =</span> <span class="st">&quot;countries&quot;</span>, <span class="dt">continent =</span> <span class="st">&quot;asia&quot;</span>,</span>
<span id="cb65-12"><a href="checking-temporal-sampling-frequency.html#cb65-12"></a>  <span class="dt">country =</span> <span class="st">&quot;india&quot;</span>,</span>
<span id="cb65-13"><a href="checking-temporal-sampling-frequency.html#cb65-13"></a>  <span class="dt">returnclass =</span> <span class="kw">c</span>(<span class="st">&quot;sf&quot;</span>)</span>
<span id="cb65-14"><a href="checking-temporal-sampling-frequency.html#cb65-14"></a>) <span class="op">%&gt;%</span></span>
<span id="cb65-15"><a href="checking-temporal-sampling-frequency.html#cb65-15"></a><span class="st">  </span><span class="kw">st_transform</span>(<span class="dv">32643</span>)</span>
<span id="cb65-16"><a href="checking-temporal-sampling-frequency.html#cb65-16"></a></span>
<span id="cb65-17"><a href="checking-temporal-sampling-frequency.html#cb65-17"></a>bbox &lt;-<span class="st"> </span><span class="kw">st_bbox</span>(wg)</span></code></pre></div>
</div>
<div id="histogram-of-lags" class="section level3">
<h3><span class="header-section-number">7.4.2</span> Histogram of lags</h3>
<p>Figure code hidden in HTML and PDF versions.</p>
<div class="sourceCode" id="cb66"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb66-1"><a href="checking-temporal-sampling-frequency.html#cb66-1"></a><span class="co"># get lags</span></span>
<span id="cb66-2"><a href="checking-temporal-sampling-frequency.html#cb66-2"></a>data &lt;-<span class="st"> </span><span class="kw">mutate</span>(data,</span>
<span id="cb66-3"><a href="checking-temporal-sampling-frequency.html#cb66-3"></a>  <span class="dt">lag_hist =</span> <span class="kw">lapply</span>(data, <span class="cf">function</span>(df) {</span>
<span id="cb66-4"><a href="checking-temporal-sampling-frequency.html#cb66-4"></a>    df &lt;-<span class="st"> </span><span class="kw">arrange</span>(df, observation_date)</span>
<span id="cb66-5"><a href="checking-temporal-sampling-frequency.html#cb66-5"></a></span>
<span id="cb66-6"><a href="checking-temporal-sampling-frequency.html#cb66-6"></a>    lag &lt;-<span class="st"> </span><span class="kw">as.numeric</span>(<span class="kw">diff</span>(df<span class="op">$</span>observation_date, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>) <span class="op">/</span><span class="st"> </span>(<span class="dv">24</span> <span class="op">*</span><span class="st"> </span><span class="dv">3600</span>))</span>
<span id="cb66-7"><a href="checking-temporal-sampling-frequency.html#cb66-7"></a></span>
<span id="cb66-8"><a href="checking-temporal-sampling-frequency.html#cb66-8"></a>    data &lt;-<span class="st"> </span><span class="kw">tibble</span>(</span>
<span id="cb66-9"><a href="checking-temporal-sampling-frequency.html#cb66-9"></a>      <span class="dt">lag =</span> lag <span class="op">+</span><span class="st"> </span><span class="dv">1</span>,</span>
<span id="cb66-10"><a href="checking-temporal-sampling-frequency.html#cb66-10"></a>      <span class="dt">index =</span> <span class="kw">seq</span>(lag)</span>
<span id="cb66-11"><a href="checking-temporal-sampling-frequency.html#cb66-11"></a>    )</span>
<span id="cb66-12"><a href="checking-temporal-sampling-frequency.html#cb66-12"></a></span>
<span id="cb66-13"><a href="checking-temporal-sampling-frequency.html#cb66-13"></a>    data</span>
<span id="cb66-14"><a href="checking-temporal-sampling-frequency.html#cb66-14"></a>  })</span>
<span id="cb66-15"><a href="checking-temporal-sampling-frequency.html#cb66-15"></a>)</span>
<span id="cb66-16"><a href="checking-temporal-sampling-frequency.html#cb66-16"></a></span>
<span id="cb66-17"><a href="checking-temporal-sampling-frequency.html#cb66-17"></a><span class="co"># unnest lags</span></span>
<span id="cb66-18"><a href="checking-temporal-sampling-frequency.html#cb66-18"></a>data_hist &lt;-<span class="st"> </span><span class="kw">select</span>(data, X, Y, lag_hist) <span class="op">%&gt;%</span></span>
<span id="cb66-19"><a href="checking-temporal-sampling-frequency.html#cb66-19"></a><span class="st">  </span><span class="kw">unnest</span>(<span class="dt">cols =</span> <span class="st">&quot;lag_hist&quot;</span>)</span></code></pre></div>
<div class="figure">
<img src="figs/fig_temporal_bias.png" alt="" />
<p class="caption">Most sites are resurveyed at least once, but some are visited much more frequently than others. There does not appear to be a link between roads and visit frequency. eBird checklists are also strongly clustered in time, with some of the most sampled areas over the study period visited at intervals of &gt; 1 week, and with some less intensively sampled areas visited frequently, at intervals of &lt; 1 week. Overall, the majority of checklists are reported only a day after the previous checklist at that location (see inset).</p>
</div>
</div>
</div>
<div id="main-text-figure-3" class="section level2">
<h2><span class="header-section-number">7.5</span> Main Text Figure 3</h2>
<p>Combining figures for spatial and temporal clustering into main text figure 3. This overall figure is not shown here, see main text.</p>
<div class="sourceCode" id="cb67"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb67-1"><a href="checking-temporal-sampling-frequency.html#cb67-1"></a><span class="co"># load spatial bias figure</span></span>
<span id="cb67-2"><a href="checking-temporal-sampling-frequency.html#cb67-2"></a><span class="kw">load</span>(<span class="st">&quot;data/fig_checklists_grid.Rds&quot;</span>)</span></code></pre></div>
<div class="figure">
<img src="figs/fig_03.png" alt="" />
<p class="caption"><strong>Distribution of sampling effort in the form of eBird checklists in the Nilgiri and Anamalai Hills between 2013 and 2021.</strong>
(a) Sampling effort across the Nilgiri and Anamalai Hills, in the form of eBird checklists reported by birdwatchers, mostly takes place along roads, with the majority of checklists located &lt;1 km from a roadway (see distribution in inset), and therefore, only about 300m, on average, from the location of another checklist. (b) eBird checklists are also strongly clustered in time, with some of the most sampled areas over the study period visited at intervals of &gt; 1 week, and with some less intensively sampled areas visited frequently, at intervals of &lt; 1 week. Overall, most checklists are reported only a day after the previous checklist at that location (see inset). Both spatial and temporal clustering make data thinning necessary. Both panels show counts or mean intervals in a 2.5km grid cell; the study area is bounded by a dashed line, and roads within it are shown as (a) blue or (b) red lines.</p>
</div>
</div>
<div id="checklists-per-month" class="section level2">
<h2><span class="header-section-number">7.6</span> Checklists per Month</h2>
<p>We counted the checklists per month, pooled over years, to determine how sampling effort varies over the year.</p>
<div class="sourceCode" id="cb68"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb68-1"><a href="checking-temporal-sampling-frequency.html#cb68-1"></a><span class="co"># get two week period by date</span></span>
<span id="cb68-2"><a href="checking-temporal-sampling-frequency.html#cb68-2"></a>data &lt;-<span class="st"> </span><span class="kw">select</span>(data, X, Y, data)</span>
<span id="cb68-3"><a href="checking-temporal-sampling-frequency.html#cb68-3"></a></span>
<span id="cb68-4"><a href="checking-temporal-sampling-frequency.html#cb68-4"></a><span class="co"># unnest</span></span>
<span id="cb68-5"><a href="checking-temporal-sampling-frequency.html#cb68-5"></a>data &lt;-<span class="st"> </span><span class="kw">unnest</span>(data, <span class="dt">cols =</span> <span class="st">&quot;data&quot;</span>)</span>
<span id="cb68-6"><a href="checking-temporal-sampling-frequency.html#cb68-6"></a></span>
<span id="cb68-7"><a href="checking-temporal-sampling-frequency.html#cb68-7"></a><span class="co"># get fortnight</span></span>
<span id="cb68-8"><a href="checking-temporal-sampling-frequency.html#cb68-8"></a><span class="kw">library</span>(lubridate)</span>
<span id="cb68-9"><a href="checking-temporal-sampling-frequency.html#cb68-9"></a>data &lt;-<span class="st"> </span><span class="kw">mutate</span>(data,</span>
<span id="cb68-10"><a href="checking-temporal-sampling-frequency.html#cb68-10"></a>  <span class="dt">week =</span> <span class="kw">week</span>(observation_date),</span>
<span id="cb68-11"><a href="checking-temporal-sampling-frequency.html#cb68-11"></a>  <span class="dt">week =</span> plyr<span class="op">::</span><span class="kw">round_any</span>(week, <span class="dv">2</span>),</span>
<span id="cb68-12"><a href="checking-temporal-sampling-frequency.html#cb68-12"></a>  <span class="dt">year =</span> <span class="kw">year</span>(observation_date),</span>
<span id="cb68-13"><a href="checking-temporal-sampling-frequency.html#cb68-13"></a>  <span class="dt">month =</span> <span class="kw">month</span>(observation_date)</span>
<span id="cb68-14"><a href="checking-temporal-sampling-frequency.html#cb68-14"></a>)</span>
<span id="cb68-15"><a href="checking-temporal-sampling-frequency.html#cb68-15"></a></span>
<span id="cb68-16"><a href="checking-temporal-sampling-frequency.html#cb68-16"></a><span class="co"># count checklists per fortnight</span></span>
<span id="cb68-17"><a href="checking-temporal-sampling-frequency.html#cb68-17"></a>data_count &lt;-<span class="st"> </span><span class="kw">count</span>(data, month, year)</span></code></pre></div>
<div class="figure">
<img src="figs/fig_chk_per_month.png" alt="" />
<p class="caption">Observations peak in the early months of the year, and decline towards the rainy months, slowly increasing until the following winter.</p>
</div>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="examining-spatial-sampling-bias.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="adding-covariates-to-checklist-data.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": false,
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/pratikunterwegs/eBirdOccupancy/edit/master/07_temporal-sampling.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "section"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
